/*! For license information please see main.bundle.js.LICENSE.txt */
(self.webpackChunkfortal_polu=self.webpackChunkfortal_polu||[]).push([[179],{377:(t,e,n)=>{"use strict";var i={};n.r(i),n.d(i,{afterMain:()=>Kp,afterRead:()=>$p,afterWrite:()=>Yp,applyStyles:()=>rm,arrow:()=>Em,auto:()=>Np,basePlacements:()=>Dp,beforeMain:()=>Wp,beforeRead:()=>qp,beforeWrite:()=>Gp,bottom:()=>Lp,clippingParents:()=>jp,computeStyles:()=>Im,createPopper:()=>rg,createPopperBase:()=>ig,createPopperLite:()=>sg,detectOverflow:()=>qm,end:()=>Mp,eventListeners:()=>Lm,flip:()=>Hm,hide:()=>Zm,left:()=>Pp,main:()=>Zp,modifierPhases:()=>Qp,offset:()=>Km,placements:()=>Vp,popper:()=>zp,popperGenerator:()=>ng,popperOffsets:()=>Gm,preventOverflow:()=>Xm,read:()=>Hp,reference:()=>Bp,right:()=>Op,start:()=>Rp,top:()=>Ap,variationPlacements:()=>Up,viewport:()=>Fp,write:()=>Xp}),n(372);var r=n(563),s=n.n(r);n(148),n(851),n(984),window.jQuery=s(),window.$=s();const o=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw new c;const l=r<<2|s>>4;if(i.push(l),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(t){return function(t){const e=o(t);return a.encodeByteArray(e,!0)}(t).replace(/\./g,"")},u=function(t){try{return a.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},h=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&u(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},d=t=>{var e,n;return null===(n=null===(e=h())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},f=()=>{var t;return null===(t=h())||void 0===t?void 0:t.config},p=t=>{var e;return null===(e=h())||void 0===e?void 0:e[`_${t}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class v extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,y.prototype.create)}}class y{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(_,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new v(i,o,n)}}const _=/\{\$([^}]+)}/g;function b(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(w(n)&&w(s)){if(!b(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function w(t){return null!==t&&"object"==typeof t}function x(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function T(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function E(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class S{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=k),void 0===i.error&&(i.error=k),void 0===i.complete&&(i.complete=k);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function k(){}function C(t){return t&&t._delegate?t._delegate:t}class I{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const A="[DEFAULT]";class O{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new m;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:A})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=A){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=A){return this.instances.has(t)}getOptions(t=A){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===A?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=A){return this.component?this.component.multipleInstances?t:A:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class P{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new O(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const N=[];var D,R;(R=D||(D={}))[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT";const M={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},j=D.INFO,F={[D.DEBUG]:"log",[D.VERBOSE]:"log",[D.INFO]:"info",[D.WARN]:"warn",[D.ERROR]:"error"},z=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=F[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class B{constructor(t){this.name=t,this._logLevel=j,this._logHandler=z,this._userLogHandler=null,N.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in D))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?M[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,D.DEBUG,...t),this._logHandler(this,D.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,D.VERBOSE,...t),this._logHandler(this,D.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,D.INFO,...t),this._logHandler(this,D.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,D.WARN,...t),this._logHandler(this,D.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,D.ERROR,...t),this._logHandler(this,D.ERROR,...t)}}const U=(t,e)=>e.some((e=>t instanceof e));let V,q;const H=new WeakMap,$=new WeakMap,W=new WeakMap,Z=new WeakMap,K=new WeakMap;let G={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return $.get(t);if("objectStoreNames"===e)return t.objectStoreNames||W.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Y(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function X(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Q(this),t),Y(H.get(this))}:function(...t){return Y(e.apply(Q(this),t))}:function(t,...n){const i=e.call(Q(this),t,...n);return W.set(i,t.sort?t.sort():[t]),Y(i)}:(t instanceof IDBTransaction&&function(t){if($.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));$.set(t,e)}(t),U(t,V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,G):t);var e}function Y(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Y(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&H.set(e,t)})).catch((()=>{})),K.set(e,t),e}(t);if(Z.has(t))return Z.get(t);const e=X(t);return e!==t&&(Z.set(t,e),K.set(e,t)),e}const Q=t=>K.get(t),J=["get","getKey","getAll","getAllKeys","count"],tt=["put","add","delete","clear"],et=new Map;function nt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(et.get(e))return et.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=tt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!J.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return et.set(e,s),s}var it;it=G,G={...it,get:(t,e,n)=>nt(t,e)||it.get(t,e,n),has:(t,e)=>!!nt(t,e)||it.has(t,e)};class rt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const st="@firebase/app",ot="0.9.10",at=new B("@firebase/app"),ct="[DEFAULT]",lt={[st]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ut=new Map,ht=new Map;function dt(t,e){try{t.container.addComponent(e)}catch(n){at.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ft(t){const e=t.name;if(ht.has(e))return at.debug(`There were multiple attempts to register component ${e}.`),!1;ht.set(e,t);for(const e of ut.values())dt(e,t);return!0}function pt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const mt=new y("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new I("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}const vt="9.22.0";function yt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:ct,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw mt.create("bad-app-name",{appName:String(r)});if(n||(n=f()),!n)throw mt.create("no-options");const s=ut.get(r);if(s){if(b(n,s.options)&&b(i,s.config))return s;throw mt.create("duplicate-app",{appName:r})}const o=new P(r);for(const t of ht.values())o.addComponent(t);const a=new gt(n,i,o);return ut.set(r,a),a}function _t(t=ct){const e=ut.get(t);if(!e&&t===ct&&f())return yt();if(!e)throw mt.create("no-app",{appName:t});return e}function bt(t,e,n){var i;let r=null!==(i=lt[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void at.warn(t.join(" "))}ft(new I(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const wt="firebase-heartbeat-database",xt=1,Tt="firebase-heartbeat-store";let Et=null;function St(){return Et||(Et=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Y(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Y(o.result),t.oldVersion,t.newVersion,Y(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(wt,xt,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Tt)}}).catch((t=>{throw mt.create("idb-open",{originalErrorMessage:t.message})}))),Et}async function kt(t,e){try{const n=(await St()).transaction(Tt,"readwrite"),i=n.objectStore(Tt);await i.put(e,Ct(t)),await n.done}catch(t){if(t instanceof v)at.warn(t.message);else{const e=mt.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});at.warn(e.message)}}}function Ct(t){return`${t.name}!${t.options.appId}`}class It{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Lt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=At();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=At(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Ot(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ot(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function At(){return(new Date).toISOString().substring(0,10)}class Lt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await St();return await e.transaction(Tt).objectStore(Tt).get(Ct(t))}catch(t){if(t instanceof v)at.warn(t.message);else{const e=mt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});at.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return kt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return kt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Ot(t){return l(JSON.stringify({version:2,heartbeats:t})).length}ft(new I("platform-logger",(t=>new rt(t)),"PRIVATE")),ft(new I("heartbeat",(t=>new It(t)),"PRIVATE")),bt(st,ot,""),bt(st,ot,"esm2017"),bt("fire-js",""),bt("firebase","9.22.0","app");var Pt,Nt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Dt={},Rt=Rt||{},Mt=Nt||self;function jt(){}function Ft(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function zt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Bt="closure_uid_"+(1e9*Math.random()>>>0),Ut=0;function Vt(t,e,n){return t.call.apply(t.bind,arguments)}function qt(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ht(t,e,n){return(Ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vt:qt).apply(null,arguments)}function $t(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Wt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function Zt(){this.s=this.s,this.o=this.o}Zt.prototype.s=!1,Zt.prototype.ra=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Bt)&&t[Bt]||(t[Bt]=++Ut))},Zt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Kt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Gt(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Xt(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Ft(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function Yt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};var Qt=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Mt.addEventListener("test",jt,e),Mt.removeEventListener("test",jt,e)}catch(t){}return t}();function Jt(t){return/^[\s\xa0]*$/.test(t)}var te=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ee(t,e){return t<e?-1:t>e?1:0}function ne(){var t=Mt.navigator;return t&&(t=t.userAgent)?t:""}function ie(t){return-1!=ne().indexOf(t)}function re(t){return re[" "](t),t}function se(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}re[" "]=jt;var oe,ae,ce=ie("Opera"),le=ie("Trident")||ie("MSIE"),ue=ie("Edge"),he=ue||le,de=ie("Gecko")&&!(-1!=ne().toLowerCase().indexOf("webkit")&&!ie("Edge"))&&!(ie("Trident")||ie("MSIE"))&&!ie("Edge"),fe=-1!=ne().toLowerCase().indexOf("webkit")&&!ie("Edge");function pe(){var t=Mt.document;return t?t.documentMode:void 0}t:{var me="",ge=(ae=ne(),de?/rv:([^\);]+)(\)|;)/.exec(ae):ue?/Edge\/([\d\.]+)/.exec(ae):le?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ae):fe?/WebKit\/(\S+)/.exec(ae):ce?/(?:Version)[ \/]?(\S+)/.exec(ae):void 0);if(ge&&(me=ge?ge[1]:""),le){var ve=pe();if(null!=ve&&ve>parseFloat(me)){oe=String(ve);break t}}oe=me}var ye,_e={};Mt.document&&le?ye=pe()||parseInt(oe,10)||void 0:ye=void 0;var be=ye;function we(t,e){if(Yt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(de){t:{try{re(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:xe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&we.$.h.call(this)}}Wt(we,Yt);var xe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function Se(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Ee,this.fa=this.ia=!1}function ke(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ce(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Ie(t){const e={};for(const n in t)e[n]=t[n];return e}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Le(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<Ae.length;e++)n=Ae[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Oe(t){this.src=t,this.g={},this.h=0}function Pe(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Kt(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ke(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ne(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}Oe.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Ne(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Se(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var De="closure_lm_"+(1e6*Math.random()|0),Re={};function Me(t,e,n,i,r){if(i&&i.once)return Fe(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Me(t,e[s],n,i,r);return null}return n=$e(n),t&&t[Te]?t.O(e,n,zt(i)?!!i.capture:!!i,r):je(t,e,n,!1,i,r)}function je(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=zt(r)?!!r.capture:!!r,a=qe(t);if(a||(t[De]=a=new Oe(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=Ve;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Qt||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ue(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Fe(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Fe(t,e[s],n,i,r);return null}return n=$e(n),t&&t[Te]?t.P(e,n,zt(i)?!!i.capture:!!i,r):je(t,e,n,!0,i,r)}function ze(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)ze(t,e[s],n,i,r);else i=zt(i)?!!i.capture:!!i,n=$e(n),t&&t[Te]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ne(s=t.g[e],n,i,r))&&(ke(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=qe(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ne(e,n,i,r)),(n=-1<t?e[t]:null)&&Be(n))}function Be(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Te])Pe(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ue(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=qe(e))?(Pe(n,t),0==n.h&&(n.src=null,e[De]=null)):ke(t)}}}function Ue(t){return t in Re?Re[t]:Re[t]="on"+t}function Ve(t,e){if(t.fa)t=!0;else{e=new we(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Be(t),t=n.call(i,e)}return t}function qe(t){return(t=t[De])instanceof Oe?t:null}var He="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(t){return"function"==typeof t?t:(t[He]||(t[He]=function(e){return t.handleEvent(e)}),t[He])}function We(){Zt.call(this),this.i=new Oe(this),this.S=this,this.J=null}function Ze(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new Yt(e,t);else if(e instanceof Yt)e.target=e.target||t;else{var r=e;Le(e=new Yt(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Ke(o,i,!0,e)&&r}if(r=Ke(o=e.g=t,i,!0,e)&&r,r=Ke(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=Ke(o=e.g=n[s],i,!1,e)&&r}function Ke(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Pe(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}Wt(We,Zt),We.prototype[Te]=!0,We.prototype.removeEventListener=function(t,e,n,i){ze(this,t,e,n,i)},We.prototype.N=function(){if(We.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)ke(n[i]);delete e.g[t],e.h--}}this.J=null},We.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},We.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Ge=Mt.JSON.stringify;function Xe(){var t=rn;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ye,Qe=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Je),(t=>t.reset()));class Je{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function tn(t){Mt.setTimeout((()=>{throw t}),0)}function en(t,e){Ye||function(){var t=Mt.Promise.resolve(void 0);Ye=function(){t.then(sn)}}(),nn||(Ye(),nn=!0),rn.add(t,e)}var nn=!1,rn=new class{constructor(){this.h=this.g=null}add(t,e){const n=Qe.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function sn(){for(var t;t=Xe();){try{t.h.call(t.g)}catch(t){tn(t)}var e=Qe;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}nn=!1}function on(t,e){We.call(this),this.h=t||1,this.g=e||Mt,this.j=Ht(this.qb,this),this.l=Date.now()}function an(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function cn(t,e,n){if("function"==typeof t)n&&(t=Ht(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ht(t.handleEvent,t)}return 2147483647<Number(e)?-1:Mt.setTimeout(t,e||0)}function ln(t){t.g=cn((()=>{t.g=null,t.i&&(t.i=!1,ln(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Wt(on,We),(Pt=on.prototype).ga=!1,Pt.T=null,Pt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ze(this,"tick"),this.ga&&(an(this),this.start()))}},Pt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pt.N=function(){on.$.N.call(this),an(this),delete this.g};class un extends Zt{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ln(this)}N(){super.N(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hn(t){Zt.call(this),this.h=t,this.g={}}Wt(hn,Zt);var dn=[];function fn(t,e,n,i){Array.isArray(n)||(n&&(dn[0]=n.toString()),n=dn);for(var r=0;r<n.length;r++){var s=Me(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function pn(t){Ce(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Be(t)}),t),t.g={}}function mn(){this.g=!0}function gn(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Ge(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}hn.prototype.N=function(){hn.$.N.call(this),pn(this)},hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mn.prototype.Ea=function(){this.g=!1},mn.prototype.info=function(){};var vn={},yn=null;function _n(){return yn=yn||new We}function bn(t){Yt.call(this,vn.Ta,t)}function wn(t){const e=_n();Ze(e,new bn(e))}function xn(t,e){Yt.call(this,vn.STAT_EVENT,t),this.stat=e}function Tn(t){const e=_n();Ze(e,new xn(e,t))}function En(t,e){Yt.call(this,vn.Ua,t),this.size=e}function Sn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Mt.setTimeout((function(){t()}),e)}vn.Ta="serverreachability",Wt(bn,Yt),vn.STAT_EVENT="statevent",Wt(xn,Yt),vn.Ua="timingevent",Wt(En,Yt);var kn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Cn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function In(){}function An(t){return t.h||(t.h=t.i())}function Ln(){}In.prototype.h=null;var On,Pn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nn(){Yt.call(this,"d")}function Dn(){Yt.call(this,"c")}function Rn(){}function Mn(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new hn(this),this.P=Fn,t=he?125:void 0,this.V=new on(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new jn}function jn(){this.i=null,this.g="",this.h=!1}Wt(Nn,Yt),Wt(Dn,Yt),Wt(Rn,In),Rn.prototype.g=function(){return new XMLHttpRequest},Rn.prototype.i=function(){return{}},On=new Rn;var Fn=45e3,zn={},Bn={};function Un(t,e,n){t.L=1,t.v=oi(ei(e)),t.s=n,t.S=!0,Vn(t,null)}function Vn(t,e){t.G=Date.now(),Wn(t),t.A=ei(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),_i(n.i,"t",i),t.C=0,n=t.l.I,t.h=new jn,t.g=yr(t.l,n?e:null,!t.s),0<t.O&&(t.M=new un(Ht(t.Pa,t,t.g),t.O)),fn(t.U,t.g,"readystatechange",t.nb),e=t.I?Ie(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),wn(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.W,t.s)}function qn(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function Hn(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=$n(t,n),i==Bn){4==e&&(t.o=4,Tn(14),r=!1),gn(t.j,t.m,null,"[Incomplete Response]");break}if(i==zn){t.o=4,Tn(15),gn(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}gn(t.j,t.m,i,null),Yn(t,i)}qn(t)&&i!=Bn&&i!=zn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Tn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ca&&(t.ca=!0,(e=t.l).g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ur(e),e.L=!0,Tn(11))):(gn(t.j,t.m,n,"[Invalid Chunked Response]"),Xn(t),Gn(t))}function $n(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Bn:(n=Number(e.substring(n,i)),isNaN(n)?zn:(i+=1)+n>e.length?Bn:(e=e.substr(i,n),t.C=i+n,e))}function Wn(t){t.Y=Date.now()+t.P,Zn(t,t.P)}function Zn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Sn(Ht(t.lb,t),e)}function Kn(t){t.B&&(Mt.clearTimeout(t.B),t.B=null)}function Gn(t){0==t.l.H||t.J||fr(t.l,t)}function Xn(t){Kn(t);var e=t.M;e&&"function"==typeof e.ra&&e.ra(),t.M=null,an(t.V),pn(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Yn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Si(n.h,t)))if(!t.K&&Si(n.h,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;dr(n),nr(n)}lr(n),Tn(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&0==n.A&&!n.v&&(n.v=Sn(Ht(n.ib,n),6e3));if(1>=Ei(n.h)&&n.na){try{n.na()}catch(t){}n.na=void 0}}else mr(n,11)}else if((t.K||n.g==t)&&dr(n),!Jt(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.J=l[1],n.oa=l[2];const e=l[3];null!=e&&(n.qa=e,n.j.info("VER="+n.qa));const r=l[4];null!=r&&(n.Ga=r,n.j.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.K=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ki(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,si(i.G,i.F,t))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=vr(i,i.I?i.oa:null,i.Y),o.K){Ci(i.h,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(Kn(a),Wn(a)),i.g=o}else cr(i);0<n.i.length&&rr(n)}else"stop"!=l[0]&&"close"!=l[0]||mr(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?mr(n,7):er(n):"noop"!=l[0]&&n.l&&n.l.Aa(l),n.A=0)}wn()}catch(t){}}function Qn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ft(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.sa&&"function"==typeof t.sa)return t.sa();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Ft(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Ft(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(Pt=Mn.prototype).setTimeout=function(t){this.P=t},Pt.nb=function(t){t=t.target;const e=this.M;e&&3==Gi(t)?e.l():this.Pa(t)},Pt.Pa=function(t){try{if(t==this.g)t:{const u=Gi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||he||this.g&&(this.h.h||this.g.ja()||Xi(this.g)))){this.J||4!=u||7==e||wn(),Kn(this);var n=this.g.da();this.aa=n;e:if(qn(this)){var i=Xi(this.g);t="";var r=i.length,s=4==Gi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xn(this),Gn(this);var o="";break e}this.h.i=new Mt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.ba&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jt(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,Tn(12),Xn(this),Gn(this);break t}gn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yn(this,n)}this.S?(Hn(this,u,o),he&&this.i&&3==u&&(fn(this.U,this.V,"tick",this.mb),this.V.start())):(gn(this.j,this.m,o,null),Yn(this,o)),4==u&&Xn(this),this.i&&!this.J&&(4==u?fr(this.l,this):(this.i=!1,Wn(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Tn(12)):(this.o=0,Tn(13)),Xn(this),Gn(this)}}}catch(t){}},Pt.mb=function(){if(this.g){var t=Gi(this.g),e=this.g.ja();this.C<e.length&&(Kn(this),Hn(this,t,e),this.i&&4!=t&&Wn(this))}},Pt.cancel=function(){this.J=!0,Xn(this)},Pt.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.L&&(wn(),Tn(17)),Xn(this),this.o=2,Gn(this)):Zn(this,this.Y-t)};var Jn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ti(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ti){this.h=void 0!==e?e:t.h,ni(this,t.j),this.s=t.s,this.g=t.g,ii(this,t.m),this.l=t.l,e=t.i;var n=new mi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ri(this,n),this.o=t.o}else t&&(n=String(t).match(Jn))?(this.h=!!e,ni(this,n[1]||"",!0),this.s=ai(n[2]||""),this.g=ai(n[3]||"",!0),ii(this,n[4]),this.l=ai(n[5]||"",!0),ri(this,n[6]||"",!0),this.o=ai(n[7]||"")):(this.h=!!e,this.i=new mi(null,this.h))}function ei(t){return new ti(t)}function ni(t,e,n){t.j=n?ai(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ii(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ri(t,e,n){e instanceof mi?(t.i=e,function(t,e){e&&!t.j&&(gi(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(vi(this,e),_i(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=ci(e,fi)),t.i=new mi(e,t.h))}function si(t,e,n){t.i.set(e,n)}function oi(t){return si(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ai(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ci(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,li),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function li(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ti.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ci(e,ui,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ci(e,ui,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(ci(n,"/"==n.charAt(0)?di:hi,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ci(n,pi)),t.join("")};var ui=/[#\/\?@]/g,hi=/[#\?:]/g,di=/[#\?]/g,fi=/[#\?@]/g,pi=/#/g;function mi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gi(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function vi(t,e){gi(t),e=bi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function yi(t,e){return gi(t),e=bi(t,e),t.g.has(e)}function _i(t,e,n){vi(t,e),0<n.length&&(t.i=null,t.g.set(bi(t,e),Gt(n)),t.h+=n.length)}function bi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function wi(t){this.l=t||xi,t=Mt.PerformanceNavigationTiming?0<(t=Mt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ka&&Mt.g.Ka()&&Mt.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Pt=mi.prototype).add=function(t,e){gi(this),this.i=null,t=bi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Pt.forEach=function(t,e){gi(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},Pt.sa=function(){gi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},Pt.Z=function(t){gi(this);let e=[];if("string"==typeof t)yi(this,t)&&(e=e.concat(this.g.get(bi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Pt.set=function(t,e){return gi(this),this.i=null,yi(this,t=bi(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Pt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var xi=10;function Ti(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ei(t){return t.h?1:t.g?t.g.size:0}function Si(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ki(t,e){t.g?t.g.add(e):t.h=e}function Ci(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ii(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Gt(t.i)}function Ai(){}function Li(){this.g=new Ai}function Oi(t,e,n){const i=n||"";try{Qn(t,(function(t,n){let r=t;zt(t)&&(r=Ge(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function Pi(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Ni(t){this.l=t.fc||null,this.j=t.ob||!1}function Di(t,e){We.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ri,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wi.prototype.cancel=function(){if(this.i=Ii(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Ai.prototype.stringify=function(t){return Mt.JSON.stringify(t,void 0)},Ai.prototype.parse=function(t){return Mt.JSON.parse(t,void 0)},Wt(Ni,In),Ni.prototype.g=function(){return new Di(this.l,this.j)},Ni.prototype.i=function(t){return function(){return t}}({}),Wt(Di,We);var Ri=0;function Mi(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function ji(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fi(t)}function Fi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Pt=Di.prototype).open=function(t,e){if(this.readyState!=Ri)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fi(this)},Pt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Mt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ji(this)),this.readyState=Ri},Pt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mi(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Pt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ji(this):Fi(this),3==this.readyState&&Mi(this)}},Pt.Za=function(t){this.g&&(this.response=this.responseText=t,ji(this))},Pt.Ya=function(t){this.g&&(this.response=t,ji(this))},Pt.ka=function(){this.g&&ji(this)},Pt.setRequestHeader=function(t,e){this.v.append(t,e)},Pt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Pt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var zi=Mt.JSON.parse;function Bi(t){We.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ui,this.L=this.M=!1}Wt(Bi,We);var Ui="",Vi=/^https?$/i,qi=["POST","PUT"];function Hi(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,$i(t),Zi(t)}function $i(t){t.F||(t.F=!0,Ze(t,"complete"),Ze(t,"error"))}function Wi(t){if(t.h&&void 0!==Rt&&(!t.C[1]||4!=Gi(t)||2!=t.da()))if(t.v&&4==Gi(t))cn(t.La,0,t);else if(Ze(t,"readystatechange"),4==Gi(t)){t.h=!1;try{const a=t.da();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.I).match(Jn)[1]||null;if(!r&&Mt.self&&Mt.self.location){var s=Mt.self.location.protocol;r=s.substr(0,s.length-1)}i=!Vi.test(r?r.toLowerCase():"")}n=i}if(n)Ze(t,"complete"),Ze(t,"success");else{t.m=6;try{var o=2<Gi(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.da()+"]",$i(t)}}finally{Zi(t)}}}function Zi(t,e){if(t.g){Ki(t);const n=t.g,i=t.C[0]?jt:null;t.g=null,t.C=null,e||Ze(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function Ki(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Mt.clearTimeout(t.A),t.A=null)}function Gi(t){return t.g?t.g.readyState:0}function Xi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Ui:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Yi(t){let e="";return Ce(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Qi(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Yi(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):si(t,e,n))}function Ji(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function tr(t){this.Ga=0,this.i=[],this.j=new mn,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ji("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ji("baseRetryDelayMs",5e3,t),this.hb=Ji("retryDelaySeedMs",1e4,t),this.eb=Ji("forwardChannelMaxRetries",2,t),this.xa=Ji("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new wi(t&&t.concurrentRequestLimit),this.Ja=new Li,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function er(t){if(ir(t),3==t.H){var e=t.W++,n=ei(t.G);si(n,"SID",t.J),si(n,"RID",e),si(n,"TYPE","terminate"),or(t,n),(e=new Mn(t,t.j,e,void 0)).L=2,e.v=oi(ei(n)),n=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(n=Mt.navigator.sendBeacon(e.v.toString(),"")),!n&&Mt.Image&&((new Image).src=e.v,n=!0),n||(e.g=yr(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Wn(e)}gr(t)}function nr(t){t.g&&(ur(t),t.g.cancel(),t.g=null)}function ir(t){nr(t),t.u&&(Mt.clearTimeout(t.u),t.u=null),dr(t),t.h.cancel(),t.m&&("number"==typeof t.m&&Mt.clearTimeout(t.m),t.m=null)}function rr(t){Ti(t.h)||t.m||(t.m=!0,en(t.Na,t),t.C=0)}function sr(t,e){var n;n=e?e.m:t.W++;const i=ei(t.G);si(i,"SID",t.J),si(i,"RID",n),si(i,"AID",t.V),or(t,i),t.o&&t.s&&Qi(i,t.o,t.s),n=new Mn(t,t.j,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=ar(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ki(t.h,n),Un(n,i,e)}function or(t,e){t.ma&&Ce(t.ma,(function(t,n){si(e,n,t)})),t.l&&Qn({},(function(t,n){si(e,n,t)}))}function ar(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Ht(t.l.Va,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=e,0>n)e=Math.max(0,r[o].h-100),s=!1;else try{Oi(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.F=t,i}function cr(t){t.g||t.u||(t.ba=1,en(t.Ma,t),t.A=0)}function lr(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Sn(Ht(t.Ma,t),pr(t,t.A)),t.A++,0))}function ur(t){null!=t.B&&(Mt.clearTimeout(t.B),t.B=null)}function hr(t){t.g=new Mn(t,t.j,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=ei(t.wa);si(e,"RID","rpc"),si(e,"SID",t.J),si(e,"CI",t.M?"0":"1"),si(e,"AID",t.V),si(e,"TYPE","xmlhttp"),or(t,e),t.o&&t.s&&Qi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=oi(ei(e)),n.s=null,n.S=!0,Vn(n,t)}function dr(t){null!=t.v&&(Mt.clearTimeout(t.v),t.v=null)}function fr(t,e){var n=null;if(t.g==e){dr(t),ur(t),t.g=null;var i=2}else{if(!Si(t.h,e))return;n=e.F,Ci(t.h,e),i=1}if(0!=t.H)if(t.ta=e.aa,e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;Ze(i=_n(),new En(i,n)),rr(t)}else cr(t);else if(3==(r=e.o)||0==r&&0<t.ta||!(1==i&&function(t,e){return!(Ei(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.F.concat(t.i),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Sn(Ht(t.Na,t,e),pr(t,t.C)),t.C++,0)))}(t,e)||2==i&&lr(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:mr(t,5);break;case 4:mr(t,10);break;case 3:mr(t,6);break;default:mr(t,2)}}function pr(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function mr(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var i=Ht(t.pb,t);n||(n=new ti("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||ni(n,"https"),oi(n)),function(t,e){const n=new mn;if(Mt.Image){const i=new Image;i.onload=$t(Pi,n,i,"TestLoadImage: loaded",!0,e),i.onerror=$t(Pi,n,i,"TestLoadImage: error",!1,e),i.onabort=$t(Pi,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=$t(Pi,n,i,"TestLoadImage: timeout",!1,e),Mt.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Tn(2);t.H=0,t.l&&t.l.za(e),gr(t),ir(t)}function gr(t){if(t.H=0,t.pa=[],t.l){const e=Ii(t.h);0==e.length&&0==t.i.length||(Xt(t.pa,e),Xt(t.pa,t.i),t.h.i.length=0,Gt(t.i),t.i.length=0),t.l.ya()}}function vr(t,e,n){var i=n instanceof ti?ei(n):new ti(n,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),ii(i,i.m);else{var r=Mt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new ti(null,void 0);i&&ni(s,i),e&&(s.g=e),r&&ii(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&si(i,n,e),si(i,"VER",t.qa),or(t,i),i}function yr(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ha&&!t.va?new Bi(new Ni({ob:!0})):new Bi(t.va)).Oa(t.I),e}function _r(){}function br(){if(le&&!(10<=Number(be)))throw Error("Environmental error: no available transport.")}function wr(t,e){We.call(this),this.g=new tr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Jt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jt(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Er(this)}function xr(t){Nn.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Tr(){Dn.call(this),this.status=1}function Er(t){this.g=t}function Sr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function kr(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function Cr(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(Pt=Bi.prototype).Oa=function(t){this.M=t},Pt.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():On.g(),this.C=this.u?An(this.u):An(On),this.g.onreadystatechange=Ht(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Hi(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Mt.FormData&&t instanceof Mt.FormData,!(0<=Kt(qi,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ki(this),0<this.B&&((this.L=function(t){return le&&se(_e,9,(function(){let t=0;const e=te(String(oe)).split("."),n=te("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=ee(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||ee(0==r[2].length,0==s[2].length)||ee(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}))&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ht(this.ua,this)):this.A=cn(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Hi(this,t)}},Pt.ua=function(){void 0!==Rt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ze(this,"timeout"),this.abort(8))},Pt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ze(this,"complete"),Ze(this,"abort"),Zi(this))},Pt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zi(this,!0)),Bi.$.N.call(this)},Pt.La=function(){this.s||(this.G||this.v||this.l?Wi(this):this.kb())},Pt.kb=function(){Wi(this)},Pt.da=function(){try{return 2<Gi(this)?this.g.status:-1}catch(t){return-1}},Pt.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Pt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),zi(e)}},Pt.Ia=function(){return this.m},Pt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Pt=tr.prototype).qa=8,Pt.H=1,Pt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Mn(this,this.j,t,void 0);let s=this.s;if(this.U&&(s?(s=Ie(s),Le(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ar(this,r,e),si(n=ei(this.G),"RID",t),si(n,"CVER",22),this.F&&si(n,"X-HTTP-Session-Id",this.F),or(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Yi(s)))+"&"+e:this.o&&Qi(n,this.o,s)),ki(this.h,r),this.bb&&si(n,"TYPE","init"),this.P?(si(n,"$req",e),si(n,"SID","null"),r.ba=!0,Un(r,n,null)):Un(r,n,e),this.H=2}}else 3==this.H&&(t?sr(this,t):0==this.i.length||Ti(this.h)||sr(this))},Pt.Ma=function(){if(this.u=null,hr(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=Sn(Ht(this.jb,this),t)}},Pt.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Tn(10),nr(this),hr(this))},Pt.ib=function(){null!=this.v&&(this.v=null,nr(this),lr(this),Tn(19))},Pt.pb=function(t){t?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))},(Pt=_r.prototype).Ba=function(){},Pt.Aa=function(){},Pt.za=function(){},Pt.ya=function(){},Pt.Va=function(){},br.prototype.g=function(t,e){return new wr(t,e)},Wt(wr,We),wr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;Tn(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=vr(t,null,t.Y),rr(t)},wr.prototype.close=function(){er(this.g)},wr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Ge(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.fb++,t)),3==e.H&&rr(e)},wr.prototype.N=function(){this.g.l=null,delete this.j,er(this.g),delete this.g,wr.$.N.call(this)},Wt(xr,Nn),Wt(Tr,Dn),Wt(Er,_r),Er.prototype.Ba=function(){Ze(this.g,"a")},Er.prototype.Aa=function(t){Ze(this.g,new xr(t))},Er.prototype.za=function(t){Ze(this.g,new Tr)},Er.prototype.ya=function(){Ze(this.g,"b")},Wt(Sr,(function(){this.blockSize=-1})),Sr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Sr.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)kr(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){kr(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){kr(this,i),r=0;break}}this.h=r,this.i+=e},Sr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var Ir={};function Ar(t){return-128<=t&&128>t?se(Ir,t,(function(t){return new Cr([0|t],0>t?-1:0)})):new Cr([0|t],0>t?-1:0)}function Lr(t){if(isNaN(t)||!isFinite(t))return Pr;if(0>t)return jr(Lr(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Or;return new Cr(e,0)}var Or=4294967296,Pr=Ar(0),Nr=Ar(1),Dr=Ar(16777216);function Rr(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Mr(t){return-1==t.h}function jr(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Cr(n,~t.h).add(Nr)}function Fr(t,e){return t.add(jr(e))}function zr(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Br(t,e){this.g=t,this.h=e}function Ur(t,e){if(Rr(e))throw Error("division by zero");if(Rr(t))return new Br(Pr,Pr);if(Mr(t))return e=Ur(jr(t),e),new Br(jr(e.g),jr(e.h));if(Mr(e))return e=Ur(t,jr(e)),new Br(jr(e.g),e.h);if(30<t.g.length){if(Mr(t)||Mr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Nr,i=e;0>=i.X(t);)n=Vr(n),i=Vr(i);var r=qr(n,1),s=qr(i,1);for(i=qr(i,2),n=qr(n,2);!Rr(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=qr(i,1),n=qr(n,1)}return e=Fr(t,r.R(e)),new Br(r,e)}for(r=Pr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Lr(n)).R(e);Mr(o)||0<o.X(t);)o=(s=Lr(n-=i)).R(e);Rr(s)&&(s=Nr),r=r.add(s),t=Fr(t,o)}return new Br(r,t)}function Vr(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Cr(n,t.h)}function qr(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Cr(r,t.h)}(Pt=Cr.prototype).ea=function(){if(Mr(this))return-jr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Or+i)*e,e*=Or}return t},Pt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Rr(this))return"0";if(Mr(this))return"-"+jr(this).toString(t);for(var e=Lr(Math.pow(t,6)),n=this,i="";;){var r=Ur(n,e).g,s=((0<(n=Fr(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Rr(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Pt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Pt.X=function(t){return Mr(t=Fr(this,t))?-1:Rr(t)?0:1},Pt.abs=function(){return Mr(this)?jr(this):this},Pt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Cr(n,-2147483648&n[n.length-1]?-1:0)},Pt.R=function(t){if(Rr(this)||Rr(t))return Pr;if(Mr(this))return Mr(t)?jr(this).R(jr(t)):jr(jr(this).R(t));if(Mr(t))return jr(this.R(jr(t)));if(0>this.X(Dr)&&0>t.X(Dr))return Lr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,zr(n,2*i+2*r),n[2*i+2*r+1]+=s*c,zr(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,zr(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,zr(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Cr(n,0)},Pt.gb=function(t){return Ur(this,t).h},Pt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Cr(n,this.h&t.h)},Pt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Cr(n,this.h|t.h)},Pt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Cr(n,this.h^t.h)},br.prototype.createWebChannel=br.prototype.g,wr.prototype.send=wr.prototype.u,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,Cn.COMPLETE="complete",Ln.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",We.prototype.listen=We.prototype.O,Bi.prototype.listenOnce=Bi.prototype.P,Bi.prototype.getLastError=Bi.prototype.Sa,Bi.prototype.getLastErrorCode=Bi.prototype.Ia,Bi.prototype.getStatus=Bi.prototype.da,Bi.prototype.getResponseJson=Bi.prototype.Wa,Bi.prototype.getResponseText=Bi.prototype.ja,Bi.prototype.send=Bi.prototype.ha,Bi.prototype.setWithCredentials=Bi.prototype.Oa,Sr.prototype.digest=Sr.prototype.l,Sr.prototype.reset=Sr.prototype.reset,Sr.prototype.update=Sr.prototype.j,Cr.prototype.add=Cr.prototype.add,Cr.prototype.multiply=Cr.prototype.R,Cr.prototype.modulo=Cr.prototype.gb,Cr.prototype.compare=Cr.prototype.X,Cr.prototype.toNumber=Cr.prototype.ea,Cr.prototype.toString=Cr.prototype.toString,Cr.prototype.getBits=Cr.prototype.D,Cr.fromNumber=Lr,Cr.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return jr(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Lr(Math.pow(n,8)),r=Pr,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=Lr(Math.pow(n,o)),r=r.R(o).add(Lr(a))):r=(r=r.R(i)).add(Lr(a))}return r};var Hr=Dt.createWebChannelTransport=function(){return new br},$r=Dt.getStatEventTarget=function(){return _n()},Wr=Dt.ErrorCode=kn,Zr=Dt.EventType=Cn,Kr=Dt.Event=vn,Gr=Dt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Xr=Dt.FetchXmlHttpFactory=Ni,Yr=Dt.WebChannel=Ln,Qr=Dt.XhrIo=Bi,Jr=Dt.Md5=Sr,ts=Dt.Integer=Cr;const es="@firebase/firestore";class ns{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");let is="9.22.0";const rs=new B("@firebase/firestore");function ss(){return rs.logLevel}function os(t,...e){if(rs.logLevel<=D.DEBUG){const n=e.map(ls);rs.debug(`Firestore (${is}): ${t}`,...n)}}function as(t,...e){if(rs.logLevel<=D.ERROR){const n=e.map(ls);rs.error(`Firestore (${is}): ${t}`,...n)}}function cs(t,...e){if(rs.logLevel<=D.WARN){const n=e.map(ls);rs.warn(`Firestore (${is}): ${t}`,...n)}}function ls(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function us(t="Unexpected state"){const e=`FIRESTORE (${is}) INTERNAL ASSERTION FAILED: `+t;throw as(e),new Error(e)}function hs(t,e){t||us()}function ds(t,e){return t}const fs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ps extends v{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ms{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class gs{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class vs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ns.UNAUTHENTICATED)))}shutdown(){}}class ys{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class _s{constructor(t){this.t=t,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ms,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{os("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(os("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ms)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(os("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(hs("string"==typeof e.accessToken),new gs(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return hs(null===t||"string"==typeof t),new ns(t)}}class bs{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ws{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new bs(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(ns.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xs{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ts{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const n=t=>{null!=t.error&&os("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.T;return this.T=t.token,os("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{os("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.I.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.I.getImmediate({optional:!0});t?i(t):os("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(hs("string"==typeof t.token),this.T=t.token,new xs(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Es(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class Ss{static A(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Es(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function ks(t,e){return t<e?-1:t>e?1:0}function Cs(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Is{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ps(fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ps(fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ps(fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ps(fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Is.fromMillis(Date.now())}static fromDate(t){return Is.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Is(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ks(this.nanoseconds,t.nanoseconds):ks(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class As{constructor(t){this.timestamp=t}static fromTimestamp(t){return new As(t)}static min(){return new As(new Is(0,0))}static max(){return new As(new Is(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ls{constructor(t,e,n){void 0===e?e=0:e>t.length&&us(),void 0===n?n=t.length-e:n>t.length-e&&us(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Ls.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ls?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Os extends Ls{construct(t,e,n){return new Os(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ps(fs.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Os(e)}static emptyPath(){return new Os([])}}const Ps=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends Ls{construct(t,e,n){return new Ns(t,e,n)}static isValidIdentifier(t){return Ps.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ns(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new ps(fs.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new ps(fs.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ps(fs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new ps(fs.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ns(e)}static emptyPath(){return new Ns([])}}class Ds{constructor(t){this.path=t}static fromPath(t){return new Ds(Os.fromString(t))}static fromName(t){return new Ds(Os.fromString(t).popFirst(5))}static empty(){return new Ds(Os.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Os.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Os.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ds(new Os(t.slice()))}}function Rs(t){return new Ms(t.readTime,t.key,-1)}class Ms{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Ms(As.min(),Ds.empty(),-1)}static max(){return new Ms(As.max(),Ds.empty(),-1)}}function js(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ds.comparator(t.documentKey,e.documentKey),0!==n?n:ks(t.largestBatchId,e.largestBatchId))}const Fs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Bs(t){if(t.code!==fs.FAILED_PRECONDITION||t.message!==Fs)throw t;os("LocalStore","Unexpectedly lost primary lease")}class Us{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&us(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Us(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Us?e:Us.resolve(e)}catch(t){return Us.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Us.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Us.reject(e)}static resolve(t){return new Us(((e,n)=>{e(t)}))}static reject(t){return new Us(((e,n)=>{n(t)}))}static waitFor(t){return new Us(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Us.resolve(!1);for(const n of t)e=e.next((t=>t?Us.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Us(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Us(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}function Vs(t){return"IndexedDbTransactionError"===t.name}class qs{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ot(t),this.ut=t=>e.writeSequenceNumber(t))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}function Hs(t){return null==t}function $s(t){return 0===t&&1/t==-1/0}qs.ct=-1;function Ws(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ks(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Gs{constructor(t,e){this.comparator=t,this.root=e||Ys.EMPTY}insert(t,e){return new Gs(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ys.BLACK,null,null))}remove(t){return new Gs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ys.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Xs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Xs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Xs(this.root,t,this.comparator,!0)}}class Xs{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ys{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Ys.RED,this.left=null!=i?i:Ys.EMPTY,this.right=null!=r?r:Ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Ys(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ys.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Ys.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw us();if(this.right.isRed())throw us();const t=this.left.check();if(t!==this.right.check())throw us();return t+(this.isRed()?0:1)}}Ys.EMPTY=null,Ys.RED=!0,Ys.BLACK=!1,Ys.EMPTY=new class{constructor(){this.size=0}get key(){throw us()}get value(){throw us()}get color(){throw us()}get left(){throw us()}get right(){throw us()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Ys(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qs{constructor(t){this.comparator=t,this.data=new Gs(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Js(this.data.getIterator())}getIteratorFrom(t){return new Js(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Qs))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Qs(this.comparator);return e.data=t,e}}class Js{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class to{constructor(t){this.fields=t,t.sort(Ns.comparator)}static empty(){return new to([])}unionWith(t){let e=new Qs(Ns.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new to(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Cs(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class eo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class no{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new eo("Invalid base64 string: "+t):t}}(t);return new no(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new no(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ks(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}no.EMPTY_BYTE_STRING=new no("");const io=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(t){if(hs(!!t),"string"==typeof t){let e=0;const n=io.exec(t);if(hs(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:so(t.seconds),nanos:so(t.nanos)}}function so(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function oo(t){return"string"==typeof t?no.fromBase64String(t):no.fromUint8Array(t)}function ao(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function co(t){const e=t.mapValue.fields.__previous_value__;return ao(e)?co(e):e}function lo(t){const e=ro(t.mapValue.fields.__local_write_time__.timestampValue);return new Is(e.seconds,e.nanos)}class uo{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class ho{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ho("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ho&&t.projectId===this.projectId&&t.database===this.database}}const fo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ao(t)?4:Io(t)?9007199254740991:10:us()}function mo(t,e){if(t===e)return!0;const n=po(t);if(n!==po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lo(t).isEqual(lo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ro(t.timestampValue),i=ro(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return oo(t.bytesValue).isEqual(oo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return so(t.geoPointValue.latitude)===so(e.geoPointValue.latitude)&&so(t.geoPointValue.longitude)===so(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return so(t.integerValue)===so(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=so(t.doubleValue),i=so(e.doubleValue);return n===i?$s(n)===$s(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Cs(t.arrayValue.values||[],e.arrayValue.values||[],mo);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Ws(n)!==Ws(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!mo(n[t],i[t])))return!1;return!0}(t,e);default:return us()}}function go(t,e){return void 0!==(t.values||[]).find((t=>mo(t,e)))}function vo(t,e){if(t===e)return 0;const n=po(t),i=po(e);if(n!==i)return ks(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ks(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=so(t.integerValue||t.doubleValue),i=so(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return yo(t.timestampValue,e.timestampValue);case 4:return yo(lo(t),lo(e));case 5:return ks(t.stringValue,e.stringValue);case 6:return function(t,e){const n=oo(t),i=oo(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=ks(n[t],i[t]);if(0!==e)return e}return ks(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=ks(so(t.latitude),so(e.latitude));return 0!==n?n:ks(so(t.longitude),so(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=vo(n[t],i[t]);if(e)return e}return ks(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===fo.mapValue&&e===fo.mapValue)return 0;if(t===fo.mapValue)return 1;if(e===fo.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=ks(i[t],s[t]);if(0!==e)return e;const o=vo(n[i[t]],r[s[t]]);if(0!==o)return o}return ks(i.length,s.length)}(t.mapValue,e.mapValue);default:throw us()}}function yo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ks(t,e);const n=ro(t),i=ro(e),r=ks(n.seconds,i.seconds);return 0!==r?r:ks(n.nanos,i.nanos)}function _o(t){return bo(t)}function bo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ro(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?oo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ds.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=bo(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${bo(t.fields[r])}`;return n+"}"}(t.mapValue):us();var e,n}function wo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xo(t){return!!t&&"integerValue"in t}function To(t){return!!t&&"arrayValue"in t}function Eo(t){return!!t&&"nullValue"in t}function So(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ko(t){return!!t&&"mapValue"in t}function Co(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zs(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Co(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Co(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Io(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ao{constructor(t){this.value=t}static empty(){return new Ao({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ko(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Co(e)}setAll(t){let e=Ns.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Co(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());ko(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return mo(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];ko(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Zs(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Ao(Co(this.value))}}class Lo{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Lo(t,0,As.min(),As.min(),As.min(),Ao.empty(),0)}static newFoundDocument(t,e,n,i){return new Lo(t,1,e,As.min(),n,i,0)}static newNoDocument(t,e){return new Lo(t,2,e,As.min(),As.min(),Ao.empty(),0)}static newUnknownDocument(t,e){return new Lo(t,3,e,As.min(),As.min(),Ao.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(As.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ao.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ao.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=As.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Lo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Lo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Oo{constructor(t,e){this.position=t,this.inclusive=e}}function Po(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?Ds.comparator(Ds.fromName(o.referenceValue),n.key):vo(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function No(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mo(t.position[n],e.position[n]))return!1;return!0}class Do{constructor(t,e="asc"){this.field=t,this.dir=e}}function Ro(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Mo{}class jo extends Mo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Ho(t,e,n):"array-contains"===e?new Ko(t,n):"in"===e?new Go(t,n):"not-in"===e?new Xo(t,n):"array-contains-any"===e?new Yo(t,n):new jo(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new $o(t,n):new Wo(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(vo(e,this.value)):null!==e&&po(this.value)===po(e)&&this.matchesComparison(vo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return us()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fo extends Mo{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new Fo(t,e)}matches(t){return zo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft((t=>t.isInequality()));return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function zo(t){return"and"===t.op}function Bo(t){return function(t){for(const e of t.filters)if(e instanceof Fo)return!1;return!0}(t)&&zo(t)}function Uo(t){if(t instanceof jo)return t.field.canonicalString()+t.op.toString()+_o(t.value);if(Bo(t))return t.filters.map((t=>Uo(t))).join(",");{const e=t.filters.map((t=>Uo(t))).join(",");return`${t.op}(${e})`}}function Vo(t,e){return t instanceof jo?function(t,e){return e instanceof jo&&t.op===e.op&&t.field.isEqual(e.field)&&mo(t.value,e.value)}(t,e):t instanceof Fo?function(t,e){return e instanceof Fo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Vo(n,e.filters[i])),!0)}(t,e):void us()}function qo(t){return t instanceof jo?function(t){return`${t.field.canonicalString()} ${t.op} ${_o(t.value)}`}(t):t instanceof Fo?function(t){return t.op.toString()+" {"+t.getFilters().map(qo).join(" ,")+"}"}(t):"Filter"}class Ho extends jo{constructor(t,e,n){super(t,e,n),this.key=Ds.fromName(n.referenceValue)}matches(t){const e=Ds.comparator(t.key,this.key);return this.matchesComparison(e)}}class $o extends jo{constructor(t,e){super(t,"in",e),this.keys=Zo(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Wo extends jo{constructor(t,e){super(t,"not-in",e),this.keys=Zo(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Zo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Ds.fromName(t.referenceValue)))}class Ko extends jo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return To(e)&&go(e.arrayValue,this.value)}}class Go extends jo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&go(this.value.arrayValue,e)}}class Xo extends jo{constructor(t,e){super(t,"not-in",e)}matches(t){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!go(this.value.arrayValue,e)}}class Yo extends jo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!To(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>go(this.value.arrayValue,t)))}}class Qo{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.dt=null}}function Jo(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Qo(t,e,n,i,r,s,o)}function ta(t){const e=ds(t);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Uo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Hs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>_o(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>_o(t))).join(",")),e.dt=t}return e.dt}function ea(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ro(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vo(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!No(t.startAt,e.startAt)&&No(t.endAt,e.endAt)}function na(t){return Ds.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class ia{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function ra(t){return new ia(t)}function sa(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function oa(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function aa(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ca(t){return null!==t.collectionGroup}function la(t){const e=ds(t);if(null===e.wt){e.wt=[];const t=aa(e),n=oa(e);if(null!==t&&null===n)t.isKeyField()||e.wt.push(new Do(t)),e.wt.push(new Do(Ns.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.wt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Do(Ns.keyField(),t))}}}return e.wt}function ua(t){const e=ds(t);if(!e._t)if("F"===e.limitType)e._t=Jo(e.path,e.collectionGroup,la(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of la(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Do(n.field,e))}const n=e.endAt?new Oo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Oo(e.startAt.position,e.startAt.inclusive):null;e._t=Jo(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e._t}function ha(t,e){e.getFirstInequalityField(),aa(t);const n=t.filters.concat([e]);return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function da(t,e,n){return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fa(t,e){return ea(ua(t),ua(e))&&t.limitType===e.limitType}function pa(t){return`${ta(ua(t))}|lt:${t.limitType}`}function ma(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>qo(t))).join(", ")}]`),Hs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>_o(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>_o(t))).join(",")),`Target(${e})`}(ua(t))}; limitType=${t.limitType})`}function ga(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ds.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of la(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Po(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,la(t),e)||t.endAt&&!function(t,e,n){const i=Po(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,la(t),e))}(t,e)}function va(t){return(e,n)=>{let i=!1;for(const r of la(t)){const t=ya(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function ya(t,e,n){const i=t.field.isKeyField()?Ds.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?vo(i,r):us()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return us()}}class _a{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Zs(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return Ks(this.inner)}size(){return this.innerSize}}const ba=new Gs(Ds.comparator);function wa(){return ba}const xa=new Gs(Ds.comparator);function Ta(...t){let e=xa;for(const n of t)e=e.insert(n.key,n);return e}function Ea(t){let e=xa;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Sa(){return Ca()}function ka(){return Ca()}function Ca(){return new _a((t=>t.toString()),((t,e)=>t.isEqual(e)))}new Gs(Ds.comparator);const Ia=new Qs(Ds.comparator);function Aa(...t){let e=Ia;for(const n of t)e=e.add(n);return e}const La=new Qs(ks);function Oa(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$s(e)?"-0":e}}function Pa(t){return{integerValue:""+t}}function Na(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!$s(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Pa(e):Oa(t,e)}class Da{constructor(){this._=void 0}}function Ra(t,e,n){return t instanceof ja?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&ao(e)&&(e=co(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Fa?za(t,e):t instanceof Ba?Ua(t,e):function(t,e){const n=function(t,e){return t instanceof Va?xo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}(t,e),i=qa(n)+qa(t.gt);return xo(n)&&xo(t.gt)?Pa(i):Oa(t.serializer,i)}(t,e)}function Ma(t,e,n){return t instanceof Fa?za(t,e):t instanceof Ba?Ua(t,e):n}class ja extends Da{}class Fa extends Da{constructor(t){super(),this.elements=t}}function za(t,e){const n=Ha(e);for(const e of t.elements)n.some((t=>mo(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Ba extends Da{constructor(t){super(),this.elements=t}}function Ua(t,e){let n=Ha(e);for(const e of t.elements)n=n.filter((t=>!mo(t,e)));return{arrayValue:{values:n}}}class Va extends Da{constructor(t,e){super(),this.serializer=t,this.gt=e}}function qa(t){return so(t.integerValue||t.doubleValue)}function Ha(t){return To(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class $a{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new $a}static exists(t){return new $a(void 0,t)}static updateTime(t){return new $a(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Wa(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Za{}function Ka(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ic(t.key,$a.none()):new Qa(t.key,t.data,$a.none());{const n=t.data,i=Ao.empty();let r=new Qs(Ns.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Ja(t.key,i,new to(r.toArray()),$a.none())}}function Ga(t,e,n){t instanceof Qa?function(t,e,n){const i=t.value.clone(),r=ec(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Ja?function(t,e,n){if(!Wa(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=ec(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(tc(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Xa(t,e,n,i){return t instanceof Qa?function(t,e,n,i){if(!Wa(t.precondition,e))return n;const r=t.value.clone(),s=nc(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ja?function(t,e,n,i){if(!Wa(t.precondition,e))return n;const r=nc(t.fieldTransforms,i,e),s=e.data;return s.setAll(tc(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Wa(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Ya(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Cs(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Fa&&e instanceof Fa||t instanceof Ba&&e instanceof Ba?Cs(t.elements,e.elements,mo):t instanceof Va&&e instanceof Va?mo(t.gt,e.gt):t instanceof ja&&e instanceof ja}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qa extends Za{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ja extends Za{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function tc(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function ec(t,e,n){const i=new Map;hs(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Ma(o,a,n[r]))}return i}function nc(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Ra(t,s,e))}return i}class ic extends Za{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&Ga(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Xa(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Xa(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=ka();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Ka(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(As.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Aa())}isEqual(t){return this.batchId===t.batchId&&Cs(this.mutations,t.mutations,((t,e)=>Ya(t,e)))&&Cs(this.baseMutations,t.baseMutations,((t,e)=>Ya(t,e)))}}class sc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oc{constructor(t,e){this.count=t,this.unchangedNames=e}}var ac,cc;function lc(t){if(void 0===t)return as("GRPC error has no .code"),fs.UNKNOWN;switch(t){case ac.OK:return fs.OK;case ac.CANCELLED:return fs.CANCELLED;case ac.UNKNOWN:return fs.UNKNOWN;case ac.DEADLINE_EXCEEDED:return fs.DEADLINE_EXCEEDED;case ac.RESOURCE_EXHAUSTED:return fs.RESOURCE_EXHAUSTED;case ac.INTERNAL:return fs.INTERNAL;case ac.UNAVAILABLE:return fs.UNAVAILABLE;case ac.UNAUTHENTICATED:return fs.UNAUTHENTICATED;case ac.INVALID_ARGUMENT:return fs.INVALID_ARGUMENT;case ac.NOT_FOUND:return fs.NOT_FOUND;case ac.ALREADY_EXISTS:return fs.ALREADY_EXISTS;case ac.PERMISSION_DENIED:return fs.PERMISSION_DENIED;case ac.FAILED_PRECONDITION:return fs.FAILED_PRECONDITION;case ac.ABORTED:return fs.ABORTED;case ac.OUT_OF_RANGE:return fs.OUT_OF_RANGE;case ac.UNIMPLEMENTED:return fs.UNIMPLEMENTED;case ac.DATA_LOSS:return fs.DATA_LOSS;default:return us()}}(cc=ac||(ac={}))[cc.OK=0]="OK",cc[cc.CANCELLED=1]="CANCELLED",cc[cc.UNKNOWN=2]="UNKNOWN",cc[cc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cc[cc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cc[cc.NOT_FOUND=5]="NOT_FOUND",cc[cc.ALREADY_EXISTS=6]="ALREADY_EXISTS",cc[cc.PERMISSION_DENIED=7]="PERMISSION_DENIED",cc[cc.UNAUTHENTICATED=16]="UNAUTHENTICATED",cc[cc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cc[cc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cc[cc.ABORTED=10]="ABORTED",cc[cc.OUT_OF_RANGE=11]="OUT_OF_RANGE",cc[cc.UNIMPLEMENTED=12]="UNIMPLEMENTED",cc[cc.INTERNAL=13]="INTERNAL",cc[cc.UNAVAILABLE=14]="UNAVAILABLE",cc[cc.DATA_LOSS=15]="DATA_LOSS";class uc{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return hc}static getOrCreateInstance(){return null===hc&&(hc=new uc),hc}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach((e=>e(t)))}}let hc=null;const dc=new ts([4294967295,4294967295],0);function fc(t){const e=(new TextEncoder).encode(t),n=new Jr;return n.update(e),new Uint8Array(n.digest())}function pc(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ts([n,i],0),new ts([r,s],0)]}class mc{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new gc(`Invalid padding: ${e}`);if(n<0)throw new gc(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new gc(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new gc(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=ts.fromNumber(this.It)}Et(t,e,n){let i=t.add(e.multiply(ts.fromNumber(n)));return 1===i.compare(dc)&&(i=new ts([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=fc(t),[n,i]=pc(e);for(let t=0;t<this.hashCount;t++){const e=this.Et(n,i,t);if(!this.At(e))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new mc(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.It)return;const e=fc(t),[n,i]=pc(e);for(let t=0;t<this.hashCount;t++){const e=this.Et(n,i,t);this.Rt(e)}}Rt(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vc{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,yc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new vc(As.min(),i,new Gs(ks),wa(),Aa())}}class yc{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new yc(n,e,Aa(),Aa(),Aa())}}class _c{constructor(t,e,n,i){this.Pt=t,this.removedTargetIds=e,this.key=n,this.bt=i}}class bc{constructor(t,e){this.targetId=t,this.Vt=e}}class wc{constructor(t,e,n=no.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class xc{constructor(){this.St=0,this.Dt=Sc(),this.Ct=no.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=Aa(),e=Aa(),n=Aa();return this.Dt.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:us()}})),new yc(this.Ct,this.xt,t,e,n)}Ft(){this.Nt=!1,this.Dt=Sc()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Tc{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=wa(),this.zt=Ec(),this.Wt=new Gs(ks)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,(e=>{const n=this.Zt(e);switch(t.state){case 0:this.te(e)&&n.$t(t.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(t.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(e);break;case 3:this.te(e)&&(n.Kt(),n.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),n.$t(t.resumeToken));break;default:us()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach(((t,n)=>{this.te(n)&&e(n)}))}ne(t){var e;const n=t.targetId,i=t.Vt.count,r=this.se(n);if(r){const s=r.target;if(na(s))if(0===i){const t=new Ds(s.path);this.Yt(n,t,Lo.newNoDocument(t,As.min()))}else hs(1===i);else{const r=this.ie(n);if(r!==i){const i=this.re(t,r);if(0!==i){this.ee(n);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,t)}null===(e=uc.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(t,e,n){var i,r,s,o,a,c;const l={localCacheCount:e,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(l.bloomFilter={applied:0===t,hashCount:null!==(i=null==u?void 0:u.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===(s=null===(r=null==u?void 0:u.bits)||void 0===r?void 0:r.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),l}(i,r,t.Vt))}}}}re(t,e){const{unchangedNames:n,count:i}=t.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=oo(r).toUint8Array()}catch(t){if(t instanceof eo)return cs("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw t}try{c=new mc(a,s,o)}catch(t){return cs(t instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",t),1}return 0===c.It?1:i!==e-this.oe(t.targetId,c)?2:0}oe(t,e){const n=this.Gt.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const r=this.Gt.ue(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;e.vt(s)||(this.Yt(t,n,null),i++)})),i}ce(t){const e=new Map;this.Qt.forEach(((n,i)=>{const r=this.se(i);if(r){if(n.current&&na(r.target)){const e=new Ds(r.target.path);null!==this.jt.get(e)||this.ae(i,e)||this.Yt(i,e,Lo.newNoDocument(e,t))}n.Mt&&(e.set(i,n.Ot()),n.Ft())}}));let n=Aa();this.zt.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.se(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.jt.forEach(((e,n)=>n.setReadTime(t)));const i=new vc(t,e,this.Wt,this.jt,n);return this.jt=wa(),this.zt=Ec(),this.Wt=new Gs(ks),i}Jt(t,e){if(!this.te(t))return;const n=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,n),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,n){if(!this.te(t))return;const i=this.Zt(t);this.ae(t,e)?i.Bt(e,1):i.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),n&&(this.jt=this.jt.insert(e,n))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new xc,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Qs(ks),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||os("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new xc),this.Gt.getRemoteKeysForTarget(t).forEach((e=>{this.Yt(t,e,null)}))}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function Ec(){return new Gs(Ds.comparator)}function Sc(){return new Gs(Ds.comparator)}const kc={asc:"ASCENDING",desc:"DESCENDING"},Cc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ic={and:"AND",or:"OR"};class Ac{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Lc(t,e){return t.useProto3Json||Hs(e)?e:{value:e}}function Oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pc(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Nc(t){return hs(!!t),As.fromTimestamp(function(t){const e=ro(t);return new Is(e.seconds,e.nanos)}(t))}function Dc(t,e){return function(t){return new Os(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Rc(t){const e=Os.fromString(t);return hs(Xc(e)),e}function Mc(t,e){const n=Rc(e);if(n.get(1)!==t.databaseId.projectId)throw new ps(fs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ps(fs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ds(zc(n))}function jc(t,e){return Dc(t.databaseId,e)}function Fc(t){return new Os(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zc(t){return hs(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Bc(t,e){return{documents:[jc(t,e.path)]}}function Uc(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=jc(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jc(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(t){if(0!==t.length)return Gc(Fo.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Zc(t.field),direction:Hc(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Lc(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function Vc(t){let e=function(t){const e=Rc(t);return 4===e.length?Os.emptyPath():zc(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){hs(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=qc(t);return e instanceof Fo&&Bo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Do(Kc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Hs(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Oo(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Oo(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new ia(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function qc(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Kc(t.unaryFilter.field);return jo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Kc(t.unaryFilter.field);return jo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Kc(t.unaryFilter.field);return jo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Kc(t.unaryFilter.field);return jo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return us()}}(t):void 0!==t.fieldFilter?function(t){return jo.create(Kc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return us()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Fo.create(t.compositeFilter.filters.map((t=>qc(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return us()}}(t.compositeFilter.op))}(t):us()}function Hc(t){return kc[t]}function $c(t){return Cc[t]}function Wc(t){return Ic[t]}function Zc(t){return{fieldPath:t.canonicalString()}}function Kc(t){return Ns.fromServerFormat(t.fieldPath)}function Gc(t){return t instanceof jo?function(t){if("=="===t.op){if(So(t.value))return{unaryFilter:{field:Zc(t.field),op:"IS_NAN"}};if(Eo(t.value))return{unaryFilter:{field:Zc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(So(t.value))return{unaryFilter:{field:Zc(t.field),op:"IS_NOT_NAN"}};if(Eo(t.value))return{unaryFilter:{field:Zc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(t.field),op:$c(t.op),value:t.value}}}(t):t instanceof Fo?function(t){const e=t.getFilters().map((t=>Gc(t)));return 1===e.length?e[0]:{compositeFilter:{op:Wc(t.op),filters:e}}}(t):us()}function Xc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Yc{constructor(t,e,n,i,r=As.min(),s=As.min(),o=no.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Yc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Yc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Qc{constructor(t){this.fe=t}}function Jc(t){const e=Vc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?da(e,e.limit,"L"):e}class tl{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(so(t.integerValue));else if("doubleValue"in t){const n=so(t.doubleValue);isNaN(n)?this.ye(e,13):(this.ye(e,15),$s(n)?e.pe(0):e.pe(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ye(e,20),"string"==typeof n?e.Ie(n):(e.Ie(`${n.seconds||""}`),e.pe(n.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(oo(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ye(e,45),e.pe(n.latitude||0),e.pe(n.longitude||0)}else"mapValue"in t?Io(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):us()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const n=t.fields||{};this.ye(e,55);for(const t of Object.keys(n))this.Te(t,e),this.me(n[t],e)}Pe(t,e){const n=t.values||[];this.ye(e,50);for(const t of n)this.me(t,e)}ve(t,e){this.ye(e,37),Ds.fromName(t).path.forEach((t=>{this.ye(e,60),this.be(t,e)}))}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}tl.Ve=new tl;class el{constructor(){this.rn=new nl}addToCollectionParentIndex(t,e){return this.rn.add(e),Us.resolve()}getCollectionParents(t,e){return Us.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return Us.resolve()}deleteFieldIndex(t,e){return Us.resolve()}getDocumentsMatchingTarget(t,e){return Us.resolve(null)}getIndexType(t,e){return Us.resolve(0)}getFieldIndexes(t,e){return Us.resolve([])}getNextCollectionGroupToUpdate(t){return Us.resolve(null)}getMinOffset(t,e){return Us.resolve(Ms.min())}getMinOffsetFromCollectionGroup(t,e){return Us.resolve(Ms.min())}updateCollectionGroup(t,e,n){return Us.resolve()}updateIndexEntries(t,e){return Us.resolve()}}class nl{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Qs(Os.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Qs(Os.comparator)).toArray()}}new Uint8Array(0);class il{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new il(t,il.DEFAULT_COLLECTION_PERCENTILE,il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}il.DEFAULT_COLLECTION_PERCENTILE=10,il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,il.DEFAULT=new il(41943040,il.DEFAULT_COLLECTION_PERCENTILE,il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),il.DISABLED=new il(-1,0,0);class rl{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new rl(0)}static Mn(){return new rl(-1)}}class sl{constructor(){this.changes=new _a((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Lo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Us.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ol{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class al{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Xa(n.mutation,t,to.empty(),Is.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Aa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Aa()){const i=Sa();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Ta();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Sa();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Aa())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=wa();const s=Ca(),o=Ca();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof Ja)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Xa(o.mutation,e,o.mutation.getFieldMask(),Is.now())):s.set(e.key,to.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new ol(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Ca();let i=new Gs(((t,e)=>t-e)),r=Aa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||to.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Aa()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=ka();c.forEach((t=>{if(!r.has(t)){const i=Ka(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Us.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Ds.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):ca(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Us.resolve(Sa());let o=-1,a=r;return s.next((e=>Us.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Us.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Aa()))).next((t=>({batchId:o,changes:Ea(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ds(e)).next((t=>{let e=Ta();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const i=e.collectionGroup;let r=Ta();return this.indexManager.getCollectionParents(t,i).next((s=>Us.forEach(s,(s=>{const o=function(t,e){return new ia(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(t,e,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i)))).next((t=>{i.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Lo.newInvalidDocument(i)))}));let n=Ta();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&Xa(s.mutation,r,to.empty(),Is.now()),ga(e,r)&&(n=n.insert(t,r))})),n}))}}class cl{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return Us.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var n;return this.cs.set(e.id,{id:(n=e).id,version:n.version,createTime:Nc(n.createTime)}),Us.resolve()}getNamedQuery(t,e){return Us.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,function(t){return{name:t.name,query:Jc(t.bundledQuery),readTime:Nc(t.readTime)}}(e)),Us.resolve()}}class ll{constructor(){this.overlays=new Gs(Ds.comparator),this.ls=new Map}getOverlay(t,e){return Us.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Sa();return Us.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.we(t,e,i)})),Us.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.ls.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.ls.delete(n)),Us.resolve()}getOverlaysForCollection(t,e,n){const i=Sa(),r=e.length+1,s=new Ds(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Us.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Gs(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Sa(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Sa(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Us.resolve(o)}we(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.ls.get(i.largestBatchId).delete(n.key);this.ls.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new sc(e,n));let r=this.ls.get(e);void 0===r&&(r=Aa(),this.ls.set(e,r)),this.ls.set(e,r.add(n.key))}}class ul{constructor(){this.fs=new Qs(hl.ds),this.ws=new Qs(hl._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const n=new hl(t,e);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.ys(new hl(t,e))}ps(t,e){t.forEach((t=>this.removeReference(t,e)))}Is(t){const e=new Ds(new Os([])),n=new hl(e,t),i=new hl(e,t+1),r=[];return this.ws.forEachInRange([n,i],(t=>{this.ys(t),r.push(t.key)})),r}Ts(){this.fs.forEach((t=>this.ys(t)))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new Ds(new Os([])),n=new hl(e,t),i=new hl(e,t+1);let r=Aa();return this.ws.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new hl(t,0),n=this.fs.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class hl{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return Ds.comparator(t.key,e.key)||ks(t.As,e.As)}static _s(t,e){return ks(t.As,e.As)||Ds.comparator(t.key,e.key)}}class dl{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Qs(hl.ds)}checkEmpty(t){return Us.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new rc(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.Rs=this.Rs.add(new hl(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Us.resolve(s)}lookupMutationBatch(t,e){return Us.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.bs(n),r=i<0?0:i;return Us.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Us.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return Us.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new hl(e,0),i=new hl(e,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,i],(t=>{const e=this.Ps(t.As);r.push(e)})),Us.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Qs(ks);return e.forEach((t=>{const e=new hl(t,0),i=new hl(t,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([e,i],(t=>{n=n.add(t.As)}))})),Us.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;Ds.isDocumentKey(r)||(r=r.child(""));const s=new hl(new Ds(r),0);let o=new Qs(ks);return this.Rs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.As)),!0)}),s),Us.resolve(this.Vs(o))}Vs(t){const e=[];return t.forEach((t=>{const n=this.Ps(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){hs(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Us.forEach(e.mutations,(i=>{const r=new hl(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Rs=n}))}Cn(t){}containsKey(t,e){const n=new hl(e,0),i=this.Rs.firstAfterOrEqual(n);return Us.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Us.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class fl{constructor(t){this.Ds=t,this.docs=new Gs(Ds.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Ds(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Us.resolve(n?n.document.mutableCopy():Lo.newInvalidDocument(e))}getEntries(t,e){let n=wa();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Lo.newInvalidDocument(t))})),Us.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=wa();const s=e.path,o=new Ds(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||js(Rs(o),n)<=0||(i.has(o.key)||ga(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Us.resolve(r)}getAllFromCollectionGroup(t,e,n,i){us()}Cs(t,e){return Us.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new pl(this)}getSize(t){return Us.resolve(this.size)}}class pl extends sl{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.os.addEntry(t,i)):this.os.removeEntry(n)})),Us.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class ml{constructor(t){this.persistence=t,this.xs=new _a((t=>ta(t)),ea),this.lastRemoteSnapshotVersion=As.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ul,this.targetCount=0,this.Ms=rl.kn()}forEachTarget(t,e){return this.xs.forEach(((t,n)=>e(n))),Us.resolve()}getLastRemoteSnapshotVersion(t){return Us.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Us.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),Us.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ns&&(this.Ns=e),Us.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new rl(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,Us.resolve()}updateTargetData(t,e){return this.Fn(e),Us.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,Us.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.xs.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Us.waitFor(r).next((()=>i))}getTargetCount(t){return Us.resolve(this.targetCount)}getTargetData(t,e){const n=this.xs.get(e)||null;return Us.resolve(n)}addMatchingKeys(t,e,n){return this.ks.gs(e,n),Us.resolve()}removeMatchingKeys(t,e,n){this.ks.ps(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Us.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),Us.resolve()}getMatchingKeysForTargetId(t,e){const n=this.ks.Es(e);return Us.resolve(n)}containsKey(t,e){return Us.resolve(this.ks.containsKey(e))}}class gl{constructor(t,e){this.$s={},this.overlays={},this.Os=new qs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new ml(this),this.indexManager=new el,this.remoteDocumentCache=function(t){return new fl(t)}((t=>this.referenceDelegate.Ls(t))),this.serializer=new Qc(e),this.qs=new cl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ll,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.$s[t.toKey()];return n||(n=new dl(e,this.referenceDelegate),this.$s[t.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,n){os("MemoryPersistence","Starting transaction:",t);const i=new vl(this.Os.next());return this.referenceDelegate.Us(),n(i).next((t=>this.referenceDelegate.Ks(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gs(t,e){return Us.or(Object.values(this.$s).map((n=>()=>n.containsKey(t,e))))}}class vl extends zs{constructor(t){super(),this.currentSequenceNumber=t}}class yl{constructor(t){this.persistence=t,this.Qs=new ul,this.js=null}static zs(t){return new yl(t)}get Ws(){if(this.js)return this.js;throw us()}addReference(t,e,n){return this.Qs.addReference(n,e),this.Ws.delete(n.toString()),Us.resolve()}removeReference(t,e,n){return this.Qs.removeReference(n,e),this.Ws.add(n.toString()),Us.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),Us.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach((t=>this.Ws.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Ws.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Us.forEach(this.Ws,(n=>{const i=Ds.fromPath(n);return this.Hs(t,i).next((t=>{t||e.removeEntry(i,As.min())}))})).next((()=>(this.js=null,e.apply(t))))}updateLimboDocument(t,e){return this.Hs(t,e).next((t=>{t?this.Ws.delete(e.toString()):this.Ws.add(e.toString())}))}Ls(t){return 0}Hs(t,e){return Us.or([()=>Us.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class _l{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Fi=n,this.Bi=i}static Li(t,e){let n=Aa(),i=Aa();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new _l(t,e.fromCache,n,i)}}class bl{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,n,i){return this.Ki(t,e).next((r=>r||this.Gi(t,e,i,n))).next((n=>n||this.Qi(t,e)))}Ki(t,e){if(sa(e))return Us.resolve(null);let n=ua(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=da(e,null,"F"),n=ua(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Aa(...i);return this.Ui.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.ji(e,i);return this.zi(e,s,r,n.readTime)?this.Ki(t,da(e,null,"F")):this.Wi(t,s,e,n)}))))})))))}Gi(t,e,n,i){return sa(e)||i.isEqual(As.min())?this.Qi(t,e):this.Ui.getDocuments(t,n).next((r=>{const s=this.ji(e,r);return this.zi(e,s,n,i)?this.Qi(t,e):(ss()<=D.DEBUG&&os("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ma(e)),this.Wi(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=As.fromTimestamp(1e9===i?new Is(n+1,0):new Is(n,i));return new Ms(r,Ds.empty(),e)}(i,-1)))}))}ji(t,e){let n=new Qs(va(t));return e.forEach(((e,i)=>{ga(t,i)&&(n=n.add(i))})),n}zi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Qi(t,e){return ss()<=D.DEBUG&&os("QueryEngine","Using full collection scan to execute query:",ma(e)),this.Ui.getDocumentsMatchingQuery(t,e,Ms.min())}Wi(t,e,n,i){return this.Ui.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class wl{constructor(t,e,n,i){this.persistence=t,this.Hi=e,this.serializer=i,this.Ji=new Gs(ks),this.Yi=new _a((t=>ta(t)),ea),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(n)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new al(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ji)))}}async function xl(t,e){const n=ds(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.tr(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Aa();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({er:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function Tl(t){const e=ds(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Bs.getLastRemoteSnapshotVersion(t)))}async function El(t,e,n){const i=ds(t),r=i.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Vs(t))throw t;os("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}function Sl(t,e,n){const i=ds(t);let r=As.min(),s=Aa();return i.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const i=ds(t),r=i.Yi.get(n);return void 0!==r?Us.resolve(i.Ji.get(r)):i.Bs.getTargetData(e,n)}(i,t,ua(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.Hi.getDocumentsMatchingQuery(t,e,n?r:As.min(),n?s:Aa()))).next((t=>(function(t,e,n){let i=t.Xi.get(e)||As.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.Xi.set(e,i)}(i,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,ir:s})))))}class kl{constructor(){this.activeTargetIds=La}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Cl{constructor(){this.Hr=new kl,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,n){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new kl,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Il{Yr(t){}shutdown(){}}class Al{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){os("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){os("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ll=null;function Ol(){return null===Ll?Ll=268435456+Math.round(2147483648*Math.random()):Ll++,"0x"+Ll.toString(16)}const Pl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nl{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const Dl="WebChannelConnection";class Rl extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.mo=e+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,n,i,r){const s=Ol(),o=this.To(t,e);os("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={};return this.Eo(a,i,r),this.Ao(t,o,a,n).then((e=>(os("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw cs("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.Io(t,e,n,i,r)}Eo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+is,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}To(t,e){const n=Pl[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,n,i){const r=Ol();return new Promise(((s,o)=>{const a=new Qr;a.setWithCredentials(!0),a.listenOnce(Zr.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Wr.NO_ERROR:const e=a.getResponseJson();os(Dl,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case Wr.TIMEOUT:os(Dl,`RPC '${t}' ${r} timed out`),o(new ps(fs.DEADLINE_EXCEEDED,"Request time out"));break;case Wr.HTTP_ERROR:const n=a.getStatus();if(os(Dl,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(fs).indexOf(e)>=0?e:fs.UNKNOWN}(e.status);o(new ps(t,e.message))}else o(new ps(fs.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ps(fs.UNAVAILABLE,"Connection failed."));break;default:us()}}finally{os(Dl,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);os(Dl,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Ro(t,e,n){const i=Ol(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Hr(),o=$r(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Xr({})),this.Eo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");os(Dl,`Creating RPC '${t}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Nl({ro:e=>{d?os(Dl,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(os(Dl,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),os(Dl,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},oo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,Yr.EventType.OPEN,(()=>{d||os(Dl,`RPC '${t}' stream ${i} transport opened.`)})),p(u,Yr.EventType.CLOSE,(()=>{d||(d=!0,os(Dl,`RPC '${t}' stream ${i} transport closed`),f.wo())})),p(u,Yr.EventType.ERROR,(e=>{d||(d=!0,cs(Dl,`RPC '${t}' stream ${i} transport errored:`,e),f.wo(new ps(fs.UNAVAILABLE,"The operation could not be completed")))})),p(u,Yr.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];hs(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){os(Dl,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=ac[t];if(void 0!==e)return lc(e)}(e),r=o.message;void 0===n&&(n=fs.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.wo(new ps(n,r)),u.close()}else os(Dl,`RPC '${t}' stream ${i} received:`,r),f._o(r)}})),p(o,Kr.STAT_EVENT,(e=>{e.stat===Gr.PROXY?os(Dl,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===Gr.NOPROXY&&os(Dl,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function Ml(){return"undefined"!=typeof document?document:null}function jl(t){return new Ac(t,!0)}class Fl{constructor(t,e,n=1e3,i=1.5,r=6e4){this.ii=t,this.timerId=e,this.Po=n,this.bo=i,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),i=Math.max(0,e-n);i>0&&os("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(()=>(this.Co=Date.now(),t()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class zl{constructor(t,e,n,i,r,s,o,a){this.ii=t,this.$o=n,this.Oo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Fl(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(t){this.Ho(),this.stream.send(t)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(t,e){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():e&&e.code===fs.RESOURCE_EXHAUSTED?(as(e.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):e&&e.code===fs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.ao(e)}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Fo===e&&this.Zo(t,n)}),(e=>{t((()=>{const t=new ps(fs.UNKNOWN,"Fetching auth token failed: "+e.message);return this.tu(t)}))}))}Zo(t,e){const n=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((t=>{n((()=>this.tu(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(t){return os("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget((()=>this.Fo===t?e():(os("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Bl extends zl{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:us()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(hs(void 0===e||"string"==typeof e),no.fromBase64String(e||"")):(hs(void 0===e||e instanceof Uint8Array),no.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?fs.UNKNOWN:lc(t.code);return new ps(e,t.message||"")}(o);n=new wc(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Mc(t,i.document.name),s=Nc(i.document.updateTime),o=i.document.createTime?Nc(i.document.createTime):As.min(),a=new Ao({mapValue:{fields:i.document.fields}}),c=Lo.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new _c(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Mc(t,i.document),s=i.readTime?Nc(i.readTime):As.min(),o=Lo.newNoDocument(r,s),a=i.removedTargetIds||[];n=new _c([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Mc(t,i.document),s=i.removedTargetIds||[];n=new _c([],s,r,null)}else{if(!("filter"in e))return us();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new oc(i,r),o=t.targetId;n=new bc(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return As.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?As.min():e.readTime?Nc(e.readTime):As.min()}(t);return this.listener.nu(e,n)}su(t){const e={};e.database=Fc(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=na(i)?{documents:Bc(t,i)}:{query:Uc(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Pc(t,e.resumeToken);const i=Lc(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(As.min())>0){n.readTime=Oc(t,e.snapshotVersion.toTimestamp());const i=Lc(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return us()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.Wo(e)}iu(t){const e={};e.database=Fc(this.serializer),e.removeTarget=t,this.Wo(e)}}class Ul extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ps(fs.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.Io(t,e,n,i,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===fs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ps(fs.UNKNOWN,t.toString())}))}vo(t,e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.vo(t,e,n,r,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===fs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ps(fs.UNKNOWN,t.toString())}))}terminate(){this.lu=!0}}class Vl{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(as(e),this.mu=!1):os("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ql{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr((t=>{n.enqueueAndForget((async()=>{Ql(this)&&(os("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=ds(t);e.vu.add(4),await $l(e),e.bu.set("Unknown"),e.vu.delete(4),await Hl(e)}(this))}))})),this.bu=new Vl(n,i)}}async function Hl(t){if(Ql(t))for(const e of t.Ru)await e(!0)}async function $l(t){for(const e of t.Ru)await e(!1)}function Wl(t,e){const n=ds(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Yl(n)?Xl(n):su(n).Ko()&&Kl(n,e))}function Zl(t,e){const n=ds(t),i=su(n);n.Au.delete(e),i.Ko()&&Gl(n,e),0===n.Au.size&&(i.Ko()?i.jo():Ql(n)&&n.bu.set("Unknown"))}function Kl(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(As.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}su(t).su(e)}function Gl(t,e){t.Vu.qt(e),su(t).iu(e)}function Xl(t){t.Vu=new Tc({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),su(t).start(),t.bu.gu()}function Yl(t){return Ql(t)&&!su(t).Uo()&&t.Au.size>0}function Ql(t){return 0===ds(t).vu.size}function Jl(t){t.Vu=void 0}async function tu(t){t.Au.forEach(((e,n)=>{Kl(t,e)}))}async function eu(t,e){Jl(t),Yl(t)?(t.bu.Iu(e),Xl(t)):t.bu.set("Unknown")}async function nu(t,e,n){if(t.bu.set("Online"),e instanceof wc&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.Au.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.Au.delete(i),t.Vu.removeTarget(i))}(t,e)}catch(n){os("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await iu(t,n)}else if(e instanceof _c?t.Vu.Ht(e):e instanceof bc?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(As.min()))try{const e=await Tl(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Vu.ce(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.Au.get(i);r&&t.Au.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.Au.get(e);if(!i)return;t.Au.set(e,i.withResumeToken(no.EMPTY_BYTE_STRING,i.snapshotVersion)),Gl(t,e);const r=new Yc(i.target,e,n,i.sequenceNumber);Kl(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){os("RemoteStore","Failed to raise snapshot:",e),await iu(t,e)}}async function iu(t,e,n){if(!Vs(e))throw e;t.vu.add(1),await $l(t),t.bu.set("Offline"),n||(n=()=>Tl(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{os("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Hl(t)}))}async function ru(t,e){const n=ds(t);n.asyncQueue.verifyOperationInProgress(),os("RemoteStore","RemoteStore received new credentials");const i=Ql(n);n.vu.add(3),await $l(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Hl(n)}function su(t){return t.Su||(t.Su=function(t,e,n){const i=ds(t);return i.fu(),new Bl(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{uo:tu.bind(null,t),ao:eu.bind(null,t),nu:nu.bind(null,t)}),t.Ru.push((async e=>{e?(t.Su.Qo(),Yl(t)?Xl(t):t.bu.set("Unknown")):(await t.Su.stop(),Jl(t))}))),t.Su}class ou{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new ou(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ps(fs.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(t,e){if(as("AsyncQueue",`${e}: ${t}`),Vs(t))return new ps(fs.UNAVAILABLE,`${e}: ${t}`);throw t}class cu{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Ds.comparator(e.key,n.key):(t,e)=>Ds.comparator(t.key,e.key),this.keyedMap=Ta(),this.sortedSet=new Gs(this.comparator)}static emptySet(t){return new cu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof cu))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new cu;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class lu{constructor(){this.Cu=new Gs(Ds.comparator)}track(t){const e=t.doc.key,n=this.Cu.get(e);n?0!==t.type&&3===n.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==n.type?this.Cu=this.Cu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Cu=this.Cu.remove(e):1===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):us():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class uu{constructor(t,e,n,i,r,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new uu(t,e,cu.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class hu{constructor(){this.Nu=void 0,this.listeners=[]}}class du{constructor(){this.queries=new _a((t=>pa(t)),fa),this.onlineState="Unknown",this.ku=new Set}}function fu(t,e){const n=ds(t);let i=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.listeners)e.$u(t)&&(i=!0);r.Nu=t}}i&&mu(n)}function pu(t,e,n){const i=ds(t),r=i.queries.get(e);if(r)for(const t of r.listeners)t.onError(n);i.queries.delete(e)}function mu(t){t.ku.forEach((t=>{t.next()}))}class gu{constructor(t,e,n){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new uu(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Ku||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){if(t.docChanges.length>0)return!0;const e=this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Uu(t){t=uu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class vu{constructor(t){this.key=t}}class yu{constructor(t){this.key=t}}class _u{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Aa(),this.mutatedKeys=Aa(),this.tc=va(t),this.ec=new cu(this.tc)}get nc(){return this.Yu}sc(t,e){const n=e?e.ic:new lu,i=e?e.ec:this.ec;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),u=ga(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||c&&this.tc(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ec:s,ic:n,zi:o,mutatedKeys:r}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const r=t.ic.xu();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return us()}};return n(t)-n(e)}(t.type,e.type)||this.tc(t.doc,e.doc))),this.oc(n);const s=e?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==r.length||a?{snapshot:new uu(this.query,t.ec,i,r,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new lu,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach((t=>this.Yu=this.Yu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Yu=this.Yu.delete(t))),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=Aa(),this.ec.forEach((t=>{this.ac(t.key)&&(this.Zu=this.Zu.add(t.key))}));const e=[];return t.forEach((t=>{this.Zu.has(t)||e.push(new yu(t))})),this.Zu.forEach((n=>{t.has(n)||e.push(new vu(n))})),e}hc(t){this.Yu=t.ir,this.Zu=Aa();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return uu.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class bu{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class wu{constructor(t){this.key=t,this.fc=!1}}class xu{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new _a((t=>pa(t)),fa),this._c=new Map,this.mc=new Set,this.gc=new Gs(Ds.comparator),this.yc=new Map,this.Ic=new ul,this.Tc={},this.Ec=new Map,this.Ac=rl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Tu(t,e){const n=function(t){const e=ds(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Su.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ru.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cu.bind(null,e),e.dc.nu=fu.bind(null,e.eventManager),e.dc.Pc=pu.bind(null,e.eventManager),e}(t);let i,r;const s=n.wc.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const t=await function(t,e){const n=ds(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Bs.getTargetData(t,e).next((r=>r?(i=r,Us.resolve(i)):n.Bs.allocateTargetId(t).next((r=>(i=new Yc(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Bs.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.Ji.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(t.targetId,t),n.Yi.set(e,t.targetId)),t}))}(n.localStore,ua(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await async function(t,e,n,i,r){t.Rc=(e,n,i)=>async function(t,e,n,i){let r=e.view.sc(n);r.zi&&(r=await Sl(t.localStore,e.query,!1).then((({documents:t})=>e.view.sc(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,s);return Lu(t,e.targetId,o.cc),o.snapshot}(t,e,n,i);const s=await Sl(t.localStore,e,!0),o=new _u(e,s.ir),a=o.sc(s.documents),c=yc.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),l=o.applyChanges(a,t.isPrimaryClient,c);Lu(t,n,l.cc);const u=new bu(e,n,o);return t.wc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),l.snapshot}(n,e,i,"current"===s,t.resumeToken),n.isPrimaryClient&&Wl(n.remoteStore,t)}return r}async function Eu(t,e){const n=ds(t),i=n.wc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter((t=>!fa(t,e)))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await El(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Zl(n.remoteStore,i.targetId),Iu(n,i.targetId)})).catch(Bs)):(Iu(n,i.targetId),await El(n.localStore,i.targetId,!0))}async function Su(t,e){const n=ds(t);try{const t=await function(t,e){const n=ds(t),i=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const o=[];e.targetChanges.forEach(((s,a)=>{const c=r.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(no.EMPTY_BYTE_STRING,As.min()).withLastLimboFreeSnapshotVersion(As.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Bs.updateTargetData(t,l))}));let a=wa(),c=Aa();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(function(t,e,n){let i=Aa(),r=Aa();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=wa();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(As.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):os("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:i,sr:r}}))}(t,s,e.documentUpdates).next((t=>{a=t.nr,c=t.sr}))),!i.isEqual(As.min())){const e=n.Bs.getLastRemoteSnapshotVersion(t).next((e=>n.Bs.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Us.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Ji=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.yc.get(e);i&&(hs(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.fc=!0:t.modifiedDocuments.size>0?hs(i.fc):t.removedDocuments.size>0&&(hs(i.fc),i.fc=!1))})),await Nu(n,t,e)}catch(t){await Bs(t)}}function ku(t,e,n){const i=ds(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.wc.forEach(((n,i)=>{const r=i.view.Mu(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=ds(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.Mu(e)&&(i=!0)})),i&&mu(n)}(i.eventManager,e),t.length&&i.dc.nu(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Cu(t,e,n){const i=ds(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.yc.get(e),s=r&&r.key;if(s){let t=new Gs(Ds.comparator);t=t.insert(s,Lo.newNoDocument(s,As.min()));const n=Aa().add(s),r=new vc(As.min(),new Map,new Gs(ks),t,n);await Su(i,r),i.gc=i.gc.remove(s),i.yc.delete(e),Pu(i)}else await El(i.localStore,e,!1).then((()=>Iu(i,e,n))).catch(Bs)}function Iu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach((e=>{t.Ic.containsKey(e)||Au(t,e)}))}function Au(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(Zl(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Pu(t))}function Lu(t,e,n){for(const i of n)i instanceof vu?(t.Ic.addReference(i.key,e),Ou(t,i)):i instanceof yu?(os("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||Au(t,i.key)):us()}function Ou(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(os("SyncEngine","New document in limbo: "+n),t.mc.add(i),Pu(t))}function Pu(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new Ds(Os.fromString(e)),i=t.Ac.next();t.yc.set(i,new wu(n)),t.gc=t.gc.insert(n,i),Wl(t.remoteStore,new Yc(ua(ra(n.path)),i,"TargetPurposeLimboResolution",qs.ct))}}async function Nu(t,e,n){const i=ds(t),r=[],s=[],o=[];i.wc.isEmpty()||(i.wc.forEach(((t,a)=>{o.push(i.Rc(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=_l.Li(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.dc.nu(r),await async function(t,e){const n=ds(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Us.forEach(e,(e=>Us.forEach(e.Fi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Us.forEach(e.Bi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Vs(t))throw t;os("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Ji.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Ji=n.Ji.insert(e,r)}}}(i.localStore,s))}async function Du(t,e){const n=ds(t);if(!n.currentUser.isEqual(e)){os("SyncEngine","User change. New user:",e.toKey());const t=await xl(n.localStore,e);n.currentUser=e,function(t,e){t.Ec.forEach((t=>{t.forEach((t=>{t.reject(new ps(fs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ec.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Nu(n,t.er)}}function Ru(t,e){const n=ds(t),i=n.yc.get(e);if(i&&i.fc)return Aa().add(i.key);{let t=Aa();const i=n._c.get(e);if(!i)return t;for(const e of i){const i=n.wc.get(e);t=t.unionWith(i.view.nc)}return t}}class Mu{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=jl(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new wl(t,e,n,i)}(this.persistence,new bl,t.initialUser,this.serializer)}createPersistence(t){return new gl(yl.zs,this.serializer)}createSharedClientState(t){return new Cl}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ju{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>ku(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Du.bind(null,this.syncEngine),await async function(t,e){const n=ds(t);e?(n.vu.delete(2),await Hl(n)):e||(n.vu.add(2),await $l(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new du}createDatastore(t){const e=jl(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Rl(i));var i;return function(t,e,n,i){return new Ul(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>ku(this.syncEngine,t,0),s=Al.D()?new Al:new Il,new ql(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new xu(t,e,n,i,r,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=ds(t);os("RemoteStore","RemoteStore shutting down."),e.vu.add(5),await $l(e),e.Pu.shutdown(),e.bu.set("Unknown")}(this.remoteStore)}}class Fu{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):as("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class zu{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=ns.UNAUTHENTICATED,this.clientId=Ss.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{os("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(os("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ps(fs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=au(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Bu(t,e){t.asyncQueue.verifyOperationInProgress(),os("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await xl(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Uu(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){os("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===fs.FAILED_PRECONDITION||t.code===fs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;cs("Error using user provided cache. Falling back to memory cache: "+n),await Bu(t,new Mu)}}else os("FirestoreClient","Using default OfflineComponentProvider"),await Bu(t,new Mu);return t._offlineComponents}(t);os("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>ru(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>ru(e.remoteStore,n))),t._onlineComponents=e}async function Vu(t){const e=await async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(os("FirestoreClient","Using user provided OnlineComponentProvider"),await Uu(t,t._uninitializedComponentsProvider._online)):(os("FirestoreClient","Using default OnlineComponentProvider"),await Uu(t,new ju))),t._onlineComponents}(t),n=e.eventManager;return n.onListen=Tu.bind(null,e.syncEngine),n.onUnlisten=Eu.bind(null,e.syncEngine),n}function qu(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Hu=new Map;function $u(t){if(Ds.isDocumentKey(t))throw new ps(fs.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wu(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":us()}function Zu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ps(fs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wu(t);throw new ps(fs.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Ku{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new ps(fs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ps(fs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new ps(fs.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qu(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new ps(fs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ps(fs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ps(fs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class Gu{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ku({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ps(fs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ps(fs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ku(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new vs;switch(t.type){case"firstParty":return new ws(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ps(fs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Hu.get(t);e&&(os("ComponentProvider","Removing Datastore"),Hu.delete(t),e.terminate())}(this),Promise.resolve()}}class Xu{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xu(this.firestore,t,this._key)}}class Yu{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Yu(this.firestore,t,this._query)}}class Qu extends Yu{constructor(t,e,n){super(t,e,ra(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xu(this.firestore,null,new Ds(t))}withConverter(t){return new Qu(this.firestore,t,this._path)}}class Ju{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Fl(this,"async_queue_retry"),this.Xc=()=>{const t=Ml();t&&os("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const t=Ml();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=Ml();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise((()=>{}));const e=new ms;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Qc.push(t),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(t){if(!Vs(t))throw t;os("AsyncQueue","Operation failed with retryable error: "+t)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(t){const e=this.Gc.then((()=>(this.Hc=!0,t().catch((t=>{this.Wc=t,this.Hc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw as("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Hc=!1,t))))));return this.Gc=e,e}enqueueAfterDelay(t,e,n){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const i=ou.createAndSchedule(this,t,e,n,(t=>this.na(t)));return this.zc.push(i),i}Zc(){this.Wc&&us()}verifyOperationInProgress(){}async sa(){let t;do{t=this.Gc,await t}while(t!==this.Gc)}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then((()=>{this.zc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()}))}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function th(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}(t)}class eh extends Gu{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Ju,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ih(this),this._firestoreClient.terminate()}}function nh(t,e){const n="string"==typeof t?t:e||"(default)",i=pt("object"==typeof t?t:_t(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=(t=>{const e=d("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})();t&&function(t,e,n,i={}){var r;const s=(t=Zu(t,Gu))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&cs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=ns.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ps(fs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ns(s)}t._authCredentials=new ys(new gs(e,n))}}(i,...t)}return i}function ih(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new uo(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,qu(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new zu(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}class rh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new rh(no.fromBase64String(t))}catch(t){throw new ps(fs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new rh(no.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class sh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ps(fs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class oh{constructor(t){this._methodName=t}}class ah{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ps(fs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ps(fs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ks(this._lat,t._lat)||ks(this._long,t._long)}}const ch=/^__.*__$/;function lh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw us()}}class uh{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new uh(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.aa({path:n,la:!1});return i.fa(t),i}da(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.aa({path:n,la:!1});return i.ua(),i}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return mh(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(lh(this.ca)&&ch.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class hh{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||jl(t)}ya(t,e,n,i=!1){return new uh({ca:t,methodName:e,ga:n,path:Ns.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dh(t,e){if(fh(t=C(t)))return function(t,e,n){if(!fh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Wu(n);throw"an object"===i?e._a(t+" a custom object"):e._a(t+" "+i)}}("Unsupported field value:",e,t),function(t,e){const n={};return Ks(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(t,((t,i)=>{const r=dh(i,e.ha(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}(t,e);if(t instanceof oh)return function(t,e){if(!lh(e.ca))throw e._a(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e._a(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=dh(r,e.wa(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=C(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Na(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Is.fromDate(t);return{timestampValue:Oc(e.serializer,n)}}if(t instanceof Is){const n=new Is(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Oc(e.serializer,n)}}if(t instanceof ah)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rh)return{bytesValue:Pc(e.serializer,t._byteString)};if(t instanceof Xu){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Dc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e._a(`Unsupported field value: ${Wu(t)}`)}(t,e)}function fh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Is||t instanceof ah||t instanceof rh||t instanceof Xu||t instanceof oh)}const ph=new RegExp("[~\\*/\\[\\]]");function mh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new ps(fs.INVALID_ARGUMENT,a+t+c)}class gh{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Xu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new vh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(yh("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class vh extends gh{data(){return super.data()}}function yh(t,e){return"string"==typeof e?function(t,e,n){if(e.search(ph)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sh(...e.split("."))._internalPath}catch(i){throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof sh?e._internalPath:e._delegate._internalPath}class _h{}class bh extends _h{}class wh extends bh{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new wh(t,e,n)}_apply(t){const e=this._parse(t);return Ch(t._query,e),new Yu(t.firestore,t.converter,ha(t._query,e))}_parse(t){const e=function(t){const e=t._freezeSettings(),n=jl(t._databaseId);return new hh(t._databaseId,!!e.ignoreUndefinedProperties,n)}(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ps(fs.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){kh(o,s);const e=[];for(const n of o)e.push(Sh(i,t,n));a={arrayValue:{values:e}}}else a=Sh(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||kh(o,s),a=function(t,e,n,i=!1){return dh(n,t.ya(i?4:3,e))}(n,"where",o,"in"===s||"not-in"===s);return jo.create(r,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class xh extends _h{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new xh(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Fo.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const t of i)Ch(n,t),n=ha(n,t)}(t._query,e),new Yu(t.firestore,t.converter,ha(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Th extends bh{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Th(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new ps(fs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ps(fs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Do(e,n);return function(t,e){if(null===oa(t)){const n=aa(t);null!==n&&Ih(0,n,e.field)}}(t,i),i}(t._query,this._field,this._direction);return new Yu(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new ia(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class Eh extends bh{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new Eh(t,e,n)}_apply(t){return new Yu(t.firestore,t.converter,da(t._query,this._limit,this._limitType))}}function Sh(t,e,n){if("string"==typeof(n=C(n))){if(""===n)throw new ps(fs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ca(e)&&-1!==n.indexOf("/"))throw new ps(fs.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Os.fromString(n));if(!Ds.isDocumentKey(i))throw new ps(fs.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return wo(t,new Ds(i))}if(n instanceof Xu)return wo(t,n._key);throw new ps(fs.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wu(n)}.`)}function kh(t,e){if(!Array.isArray(t)||0===t.length)throw new ps(fs.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ch(t,e){if(e.isInequality()){const n=aa(t),i=e.field;if(null!==n&&!n.isEqual(i))throw new ps(fs.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const r=oa(t);null!==r&&Ih(0,i,r)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new ps(fs.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ps(fs.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Ih(t,e,n){if(!n.isEqual(e))throw new ps(fs.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Ah{convertValue(t,e="none"){switch(po(t)){case 0:return null;case 1:return t.booleanValue;case 2:return so(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(oo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw us()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Zs(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new ah(so(t.latitude),so(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=co(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(lo(t));default:return null}}convertTimestamp(t){const e=ro(t);return new Is(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Os.fromString(t);hs(Xc(n));const i=new ho(n.get(1),n.get(3)),r=new Ds(n.popFirst(5));return i.isEqual(e)||as(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}class Lh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Oh extends gh{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(yh("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Ph extends Oh{data(t={}){return super.data(t)}}class Nh{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Lh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Ph(this._firestore,this._userDataWriter,n.key,n,new Lh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ps(fs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new Ph(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Lh(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new Ph(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Lh(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Dh(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Dh(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return us()}}class Rh extends Ah{constructor(t){super(),this.firestore=t}convertBytes(t){return new rh(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xu(this.firestore,null,e)}}function Mh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}!function(t,e=!0){!function(t){is=t}(vt),ft(new I("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new eh(new _s(t.getProvider("auth-internal")),new Ts(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ps(fs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ho(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),bt(es,"3.12.0",t),bt(es,"3.12.0","esm2017")}(),Object.create,Object.create;const jh=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fh=new y("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zh=new B("@firebase/auth");function Bh(t,...e){zh.logLevel<=D.ERROR&&zh.error(`Auth (${vt}): ${t}`,...e)}function Uh(t,...e){throw qh(t,...e)}function Vh(t,...e){return qh(t,...e)}function qh(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Fh.create(t,...e)}function Hh(t,e,...n){if(!t)throw qh(e,...n)}function $h(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bh(e),new Error(e)}function Wh(t,e){t||$h(e)}function Zh(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Kh(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Gh(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Kh()||"https:"===Kh()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Xh{constructor(t,e){this.shortDelay=t,this.longDelay=e,Wh(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Gh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yh(t,e){Wh(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Qh{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void $h("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void $h("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void $h("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},td=new Xh(3e4,6e4);function ed(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nd(t,e,n,i,r={}){return id(t,r,(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=x(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Qh.fetch()(sd(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function id(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Jh),e);try{const e=new od(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw ad(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ad(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ad(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw ad(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},jh()),{[e]:n});return new y("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);Uh(t,a)}}catch(e){if(e instanceof v)throw e;Uh(t,"network-request-failed",{message:String(e)})}}async function rd(t,e,n,i,r={}){const s=await nd(t,e,n,i,r);return"mfaPendingCredential"in s&&Uh(t,"multi-factor-auth-required",{_serverResponse:s}),s}function sd(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Yh(t.config,r):`${t.config.apiScheme}://${r}`}class od{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Vh(this.auth,"network-request-failed"))),td.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ad(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Vh(t,e,i);return r.customData._tokenResponse=n,r}function cd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function ld(t){return 1e3*Number(t)}function ud(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const t=u(n);return t?JSON.parse(t):(Bh("Failed to decode base64 JWT payload"),null)}catch(t){return Bh("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function hd(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof v&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class dd{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class fd{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=cd(this.lastLoginAt),this.creationTime=cd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pd(t){var e;const n=t.auth,i=await t.getIdToken(),r=await hd(t,async function(t,e){return nd(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));Hh(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=Mh(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const u=t.isAnonymous,h=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fd(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class md{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Hh(t.idToken,"internal-error"),Hh(void 0!==t.idToken,"internal-error"),Hh(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=ud(t);return Hh(e,"internal-error"),Hh(void 0!==e.exp,"internal-error"),Hh(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Hh(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await id(t,{},(async()=>{const n=x({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=sd(t,i,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Qh.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new md;return n&&(Hh("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Hh("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(Hh("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new md,this.toJSON())}_performRefresh(){return $h("not implemented")}}function gd(t,e){Hh("string"==typeof t||void 0===t,"internal-error",{appName:e})}class vd{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=Mh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await hd(this,this.stsTokenManager.getToken(this.auth,t));return Hh(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=C(t),i=await n.getIdToken(e),r=ud(i);Hh(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:cd(ld(r.auth_time)),issuedAtTime:cd(ld(r.iat)),expirationTime:cd(ld(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=C(t);await pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Hh(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new vd(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Hh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await pd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await hd(this,async function(t,e){return nd(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,v=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=e;Hh(y&&x,t,"internal-error");const T=md.fromJSON(this.name,x);Hh("string"==typeof y,t,"internal-error"),gd(u,t.name),gd(h,t.name),Hh("boolean"==typeof _,t,"internal-error"),Hh("boolean"==typeof b,t,"internal-error"),gd(d,t.name),gd(f,t.name),gd(p,t.name),gd(m,t.name),gd(g,t.name),gd(v,t.name);const E=new vd({uid:y,auth:t,email:h,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(E.providerData=w.map((t=>Object.assign({},t)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(t,e,n=!1){const i=new md;i.updateFromServerResponse(e);const r=new vd({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await pd(r),r}}const yd=new Map;function _d(t){Wh(t instanceof Function,"Expected a class definition");let e=yd.get(t);return e?(Wh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yd.set(t,e),e)}class bd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}bd.type="NONE";const wd=bd;function xd(t,e,n){return`firebase:${t}:${e}:${n}`}class Td{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=xd(this.userKey,i.apiKey,r),this.fullPersistenceKey=xd("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?vd._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Td(_d(wd),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||_d(wd);const s=xd(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=vd._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new Td(r,t,n)):new Td(r,t,n)}}function Ed(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Id(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ld(e))return"Blackberry";if(Od(e))return"Webos";if(kd(e))return"Safari";if((e.includes("chrome/")||Cd(e))&&!e.includes("edge/"))return"Chrome";if(Ad(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Sd(t=g()){return/firefox\//i.test(t)}function kd(t=g()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cd(t=g()){return/crios\//i.test(t)}function Id(t=g()){return/iemobile/i.test(t)}function Ad(t=g()){return/android/i.test(t)}function Ld(t=g()){return/blackberry/i.test(t)}function Od(t=g()){return/webos/i.test(t)}function Pd(t=g()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Nd(t=g()){return Pd(t)||Ad(t)||Od(t)||Ld(t)||/windows phone/i.test(t)||Id(t)}function Dd(t,e=[]){let n;switch(t){case"Browser":n=Ed(g());break;case"Worker":n=`${Ed(g())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vt}/${i}`}async function Rd(t,e){return nd(t,"GET","/v2/recaptchaConfig",ed(t,e))}function Md(t){return void 0!==t&&void 0!==t.enterprise}class jd{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState))}}function Fd(t){return new Promise(((e,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=Vh("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)}))}function zd(t){return`__${t}${Math.floor(1e6*Math.random())}`}class Bd{constructor(t){this.type="recaptcha-enterprise",this.auth=Hd(t)}async verify(t="verify",e=!1){function n(e,n,i){const r=window.grecaptcha;Md(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{Rd(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new jd(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))})(this.auth).then((r=>{if(!e&&Md(window.grecaptcha))n(r,t,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));Fd("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function Ud(t,e,n,i=!1){const r=new Bd(t);let s;try{s=await r.verify(n)}catch(t){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class Vd{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class qd{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $d(this),this.idTokenSubscription=new $d(this),this.beforeStateQueue=new Vd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=_d(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Td.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Hh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await pd(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?C(t):null;return e&&Hh(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Hh(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(_d(t))}))}async initializeRecaptchaConfig(){const t=await Rd(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),e=new jd(t);null==this.tenantId?this._agentRecaptchaConfig=e:this._tenantRecaptchaConfigs[this.tenantId]=e,e.emailPasswordEnabled&&new Bd(this).verify()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new y("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&_d(t)||this._popupRedirectResolver;Hh(e,this,"argument-error"),this.redirectPersistenceManager=await Td.create(this,[_d(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Hh(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Hh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Dd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){zh.logLevel<=D.WARN&&zh.warn(`Auth (${vt}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function Hd(t){return C(t)}class $d{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new S(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return Hh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wd(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Zd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Kd{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return $h("not implemented")}_getIdTokenResponse(t){return $h("not implemented")}_linkToIdToken(t,e){return $h("not implemented")}_getReauthenticationResolver(t){return $h("not implemented")}}async function Gd(t,e){return rd(t,"POST","/v1/accounts:signInWithPassword",ed(t,e))}class Xd extends Kd{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Xd(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Xd(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){var e;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(e=t._getRecaptchaConfig())||void 0===e?void 0:e.emailPasswordEnabled){const e=await Ud(t,n,"signInWithPassword");return Gd(t,e)}return Gd(t,n).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await Ud(t,n,"signInWithPassword");return Gd(t,e)}return Promise.reject(e)}));case"emailLink":return async function(t,e){return rd(t,"POST","/v1/accounts:signInWithEmailLink",ed(t,e))}(t,{email:this._email,oobCode:this._password});default:Uh(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return nd(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return rd(t,"POST","/v1/accounts:signInWithEmailLink",ed(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Uh(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Yd(t,e){return rd(t,"POST","/v1/accounts:signInWithIdp",ed(t,e))}class Qd extends Kd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Qd(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Uh("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=Mh(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Qd(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Yd(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Yd(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Yd(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=x(e)}return t}}const Jd={USER_NOT_FOUND:"user-not-found"};class tf extends Kd{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new tf({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new tf({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return rd(t,"POST","/v1/accounts:signInWithPhoneNumber",ed(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await rd(t,"POST","/v1/accounts:signInWithPhoneNumber",ed(t,e));if(n.temporaryProof)throw ad(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return rd(t,"POST","/v1/accounts:signInWithPhoneNumber",ed(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Jd)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new tf({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ef{constructor(t){var e,n,i,r,s,o;const a=T(E(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Hh(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=T(E(t)).link,n=e?T(E(e)).deep_link_id:null,i=T(E(t)).deep_link_id;return(i?T(E(i)).link:null)||i||n||e||t}(t);try{return new ef(e)}catch(t){return null}}}class nf{constructor(){this.providerId=nf.PROVIDER_ID}static credential(t,e){return Xd._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=ef.parseLink(e);return Hh(n,"argument-error"),Xd._fromEmailAndCode(t,n.code,n.tenantId)}}nf.PROVIDER_ID="password",nf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",nf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rf{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class sf extends rf{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class of extends sf{constructor(){super("facebook.com")}static credential(t){return Qd._fromParams({providerId:of.PROVIDER_ID,signInMethod:of.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return of.credentialFromTaggedObject(t)}static credentialFromError(t){return of.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return of.credential(t.oauthAccessToken)}catch(t){return null}}}of.FACEBOOK_SIGN_IN_METHOD="facebook.com",of.PROVIDER_ID="facebook.com";class af extends sf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Qd._fromParams({providerId:af.PROVIDER_ID,signInMethod:af.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return af.credentialFromTaggedObject(t)}static credentialFromError(t){return af.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return af.credential(e,n)}catch(t){return null}}}af.GOOGLE_SIGN_IN_METHOD="google.com",af.PROVIDER_ID="google.com";class cf extends sf{constructor(){super("github.com")}static credential(t){return Qd._fromParams({providerId:cf.PROVIDER_ID,signInMethod:cf.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return cf.credentialFromTaggedObject(t)}static credentialFromError(t){return cf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cf.credential(t.oauthAccessToken)}catch(t){return null}}}cf.GITHUB_SIGN_IN_METHOD="github.com",cf.PROVIDER_ID="github.com";class lf extends sf{constructor(){super("twitter.com")}static credential(t,e){return Qd._fromParams({providerId:lf.PROVIDER_ID,signInMethod:lf.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return lf.credentialFromTaggedObject(t)}static credentialFromError(t){return lf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return lf.credential(e,n)}catch(t){return null}}}lf.TWITTER_SIGN_IN_METHOD="twitter.com",lf.PROVIDER_ID="twitter.com";class uf{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await vd._fromIdTokenResponse(t,n,i),s=hf(n);return new uf({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=hf(n);return new uf({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function hf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class df extends v{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,df.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new df(t,e,n,i)}}function ff(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw df._fromErrorAndOperation(t,n,e,i);throw n}))}async function pf(t,e,n=!1){const i="signIn",r=await ff(t,i,e),s=await uf._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function mf(t,e,n){return async function(t,e){return pf(Hd(t),e)}(C(t),nf.credential(e,n))}new WeakMap;const gf="__sak";class vf{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class yf extends vf{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=g();return kd(t)||Pd(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Nd(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);!function(){const t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||r===t.newValue||t.newValue===t.oldValue?i():setTimeout(i,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}yf.type="LOCAL";const _f=yf;class bf extends vf{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}bf.type="SESSION";const wf=bf;class xf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new xf(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Tf(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}xf.receivers=[];class Ef{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=Tf("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Sf(){return window}function kf(){return void 0!==Sf().WorkerGlobalScope&&"function"==typeof Sf().importScripts}const Cf="firebaseLocalStorageDb",If="firebaseLocalStorage",Af="fbase_key";class Lf{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function Of(t,e){return t.transaction([If],e?"readwrite":"readonly").objectStore(If)}function Pf(){const t=indexedDB.open(Cf,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(If,{keyPath:Af})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(If)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Cf);return new Lf(t).toPromise()}(),e(await Pf()))}))}))}async function Nf(t,e,n){const i=Of(t,!0).put({[Af]:e,value:n});return new Lf(i).toPromise()}function Df(t,e){const n=Of(t,!0).delete(e);return new Lf(n).toPromise()}class Rf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Pf()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xf._getInstance(kf()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Ef(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}var e}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Pf();return await Nf(t,gf,"1"),await Df(t,gf),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Nf(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=Of(t,!1).get(e),i=await new Lf(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Df(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=Of(t,!1).getAll();return new Lf(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Rf.type="LOCAL";const Mf=Rf;zd("rcb"),new Xh(3e4,6e4);class jf{constructor(t){this.providerId=jf.PROVIDER_ID,this.auth=Hd(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(Hh("string"==typeof r,t,"argument-error"),Hh("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){Hh("enroll"===e.type,t,"internal-error");const n=await function(t,e){return nd(t,"POST","/v2/accounts/mfaEnrollment:start",ed(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Hh("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Hh(n,t,"missing-multi-factor-info");const o=await function(t,e){return nd(t,"POST","/v2/accounts/mfaSignIn:start",ed(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return nd(t,"POST","/v1/accounts:sendVerificationCode",ed(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,C(e))}static credential(t,e){return tf._fromVerification(t,e)}static credentialFromResult(t){const e=t;return jf.credentialFromTaggedObject(e)}static credentialFromError(t){return jf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?tf._fromTokenResponse(e,n):null}}jf.PROVIDER_ID="phone",jf.PHONE_SIGN_IN_METHOD="phone";class Ff extends Kd{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yd(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Yd(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Yd(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function zf(t){return pf(t.auth,new Ff(t),t.bypassAuthState)}function Bf(t){const{auth:e,user:n}=t;return Hh(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await hd(t,ff(i,r,e,t),n);Hh(s.idToken,i,"internal-error");const o=ud(s.idToken);Hh(o,i,"internal-error");const{sub:a}=o;return Hh(t.uid===a,i,"user-mismatch"),uf._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Uh(i,"user-mismatch"),t}}(n,new Ff(t),t.bypassAuthState)}async function Uf(t){const{auth:e,user:n}=t;return Hh(n,e,"internal-error"),async function(t,e,n=!1){const i=await hd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return uf._forOperation(t,"link",i)}(n,new Ff(t),t.bypassAuthState)}class Vf{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return zf;case"linkViaPopup":case"linkViaRedirect":return Uf;case"reauthViaPopup":case"reauthViaRedirect":return Bf;default:Uh(this.auth,"internal-error")}}resolve(t){Wh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Wh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qf=new Xh(2e3,1e4);class Hf extends Vf{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Hf.currentPopupAction&&Hf.currentPopupAction.cancel(),Hf.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Hh(t,this.auth,"internal-error"),t}async onExecution(){Wh(1===this.filter.length,"Popup operations only handle one event");const t=Tf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Vh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Vh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hf.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Vh(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,qf.get())};t()}}Hf.currentPopupAction=null;const $f="pendingRedirect",Wf=new Map;class Zf extends Vf{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Wf.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return xd($f,t.config.apiKey,t.name)}(e),i=function(t){return _d(t._redirectPersistence)}(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}Wf.set(this.auth._key(),t)}return this.bypassAuthState||Wf.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Kf(t,e){Wf.set(t._key(),e)}async function Gf(t,e,n=!1){const i=Hd(t),r=function(t,e){return e?_d(e):(Hh(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),s=new Zf(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Xf{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qf(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Qf(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Vh(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yf(t))}saveEventToCache(t){this.cachedEventUids.add(Yf(t)),this.lastProcessedEventTime=Date.now()}}function Yf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Qf({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const Jf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tp=/^https?/;function ep(t){const e=Zh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!tp.test(n))return!1;if(Jf.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const np=new Xh(3e4,6e4);function ip(){const t=Sf().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let rp=null;function sp(t){return rp=rp||function(t){return new Promise(((e,n)=>{var i,r,s;function o(){ip(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ip(),n(Vh(t,"network-request-failed"))},timeout:np.get()})}if(null===(r=null===(i=Sf().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Sf().gapi)||void 0===s?void 0:s.load)){const e=zd("iframefcb");return Sf()[e]=()=>{gapi.load?o():n(Vh(t,"network-request-failed"))},Fd(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw rp=null,t}))}(t),rp}const op=new Xh(5e3,15e3),ap={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lp(t){const e=t.config;Hh(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yh(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:vt},r=cp.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${x(i).slice(1)}`}const up={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hp{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}const dp=encodeURIComponent("fac");async function fp(t,e,n,i,r,s){Hh(t.config.authDomain,t,"auth-domain-config-required"),Hh(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:vt,eventId:r};if(e instanceof rf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof sf){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];const c=await t._getAppCheckToken(),l=c?`#${dp}=${encodeURIComponent(c)}`:"";return`${function({config:t}){return t.emulator?Yh(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${x(a).slice(1)}${l}`}const pp="webStorageSupport",mp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wf,this._completeRedirectFn=Gf,this._overrideRedirectResult=Kf}async _openPopup(t,e,n,i){var r;return Wh(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},up),{width:i.toString(),height:r.toString(),top:s,left:o}),l=g().toLowerCase();n&&(a=Cd(l)?"_blank":n),Sd(l)&&(e=e||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=g()){var e;return Pd(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new hp(null);const h=window.open(e||"",a,u);Hh(h,t,"popup-blocked");try{h.focus()}catch(t){}return new hp(h)}(t,await fp(t,e,n,Zh(),i),Tf())}async _openRedirect(t,e,n,i){return await this._originValidation(t),r=await fp(t,e,n,Zh(),i),Sf().location.href=r,new Promise((()=>{}));var r}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Wh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await sp(t),n=Sf().gapi;return Hh(n,t,"internal-error"),e.open({where:document.body,url:lp(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ap,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=Vh(t,"network-request-failed"),s=Sf().setTimeout((()=>{i(r)}),op.get());function o(){Sf().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new Xf(t);return e.register("authEvent",(e=>(Hh(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(pp,{type:pp},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[pp];void 0!==r&&e(!!r),Uh(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return nd(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(ep(t))return}catch(t){}Uh(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Nd()||kd()||Pd()}};var gp="@firebase/auth",vp="0.23.2";class yp{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Hh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _p=p("authIdTokenMaxAge")||300;let bp=null;function wp(t=_t()){const e=pt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=pt(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(b(n.getOptions(),null!=e?e:{}))return t;Uh(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:mp,persistence:[Mf,_f,wf]}),i=p("authTokenSyncURL");if(i){const t=(r=i,async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>_p)return;const i=null==e?void 0:e.token;bp!==i&&(bp=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(t,e,n){C(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(e,n,i,r){C(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}var r;const s=d("auth");return s&&function(t,e,n){const i=Hd(t);Hh(i._canInitEmulator,i,"emulator-config-failed"),Hh(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Wd(e),{host:o,port:a}=function(t){const e=Wd(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Zd(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Zd(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${s}`),n}var xp;function Tp(t){return Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(t)}function Ep(){Ep=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var s=e&&e.prototype instanceof d?e:d,o=Object.create(s.prototype),a=new S(r||[]);return i(o,"_invoke",{value:w(t,n,a)}),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function d(){}function f(){}function p(){}var m={};c(m,s,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(k([])));v&&v!==e&&n.call(v,s)&&(m=v);var y=p.prototype=d.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(i,s,o,a){var c=u(t[i],t,s);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==Tp(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function w(t,e,n){var i="suspendedStart";return function(r,s){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw s;return{value:void 0,done:!0}}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=x(o,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=u(t,e,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=u(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var s=r.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,i(y,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},_(b.prototype),c(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,i,r,s){void 0===s&&(s=Promise);var o=new b(l(e,n,i,r),s);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(y),c(y,a,"Generator"),c(y,s,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return o.type="throw",o.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(a&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function Sp(t,e,n,i,r,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(i,r)}xp="Browser",ft(new I("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Hh(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:xp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dd(xp)},c=new qd(n,i,r,a);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(_d);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(c,e),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),ft(new I("auth-internal",(t=>{return e=Hd(t.getProvider("auth").getImmediate()),new yp(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),bt(gp,vp,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(xp)),bt(gp,vp,"esm2017");var kp={apiKey:"AIzaSyAl3Z8cGE62ZNFc__yLCktbvqyhXTVsGi8",authDomain:"moqatrama-prod.firebaseapp.com",projectId:"moqatrama-prod",storageBucket:"moqatrama-prod.appspot.com",messagingSenderId:0xf66e0b4f43,appId:"1:1058408189763:web:fdac184953248dde9d69f6",measurementId:"G-CWNNPY01JF"},Cp=function(){if(document.querySelector("#map")){var t=L.map("map").setView([-3.71839,-38.54342],12);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:3,maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(t),console.log("testando outro ponto");var e=function(t){return'\n      <div className="d-flex">                            \n          <div class="leaflet-title">                            \n              <h2 class="d-flex text-lowercase"><img src="https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png" \n              class="mr-2" width="22" alt="marker"> '.concat(t,"\n              </h2>\n              <p>\n                  Monitor a ser instalado\n              </p>\n          </div>\n      </div>\n      ")},n=L.icon({iconUrl:"./assets/img/Semponto.png",iconRetinaUrl:"./assets/img/Semponto.png",iconSize:[40,40]});L.Marker.prototype.options.icon=n,L.marker([-3.82838,-38.55674]).addTo(t).bindPopup(e("SCSP - Av C X Av L - PREFEITO JOS WALTER")),L.marker([-3.71834,-38.46562]).addTo(t).bindPopup(e("SME - GODOFREDO DE CASTRO FILHO 2")),L.marker([-3.81627,-38.53165]).addTo(t).bindPopup(e("SEGER - AV PRES JUSCELINO KUBITSCHEK X AV DOS PAROARAS")),L.marker([-3.78753,-38.54793]).addTo(t).bindPopup(e("AMC - AV. EXPEDICIONRIOS X AV. DED BRASIL")),L.marker([-3.78151,-38.50257]).addTo(t).bindPopup(e("ARENINHA LAGOA DA ZEZA")),L.marker([-3.82953,-38.46658]).addTo(t).bindPopup(e("SME - ISABEL FERREIRA")),L.marker([-3.83172,-38.49403]).addTo(t).bindPopup(e("AMC - RUA PADRE PEDRO DE ALENCAR X RUA TEN. JURANDIR DE ALENCA")),L.marker([-3.83412,-38.56899]).addTo(t).bindPopup(e("SME - EMTI LEONEL DE MOURA BRIZOLA")),L.marker([-3.7518,-38.52577]).addTo(t).bindPopup(e("PRAA NOSSA SENHORA DE FTIMA")),L.marker([-3.73339,-38.49693]).addTo(t).bindPopup(e("PRAA PORTUGAL")),L.marker([-3.73158,-38.5449]).addTo(t).bindPopup(e("SEGER - AV BEZERRA DE MENEZES X AV JOSE JATAHY")),L.marker([-3.86736,-38.49394]).addTo(t).bindPopup(e("SME - GUIOMAR DA SILVA ALMEIDA")),L.marker([-3.84632,-38.52293]).addTo(t).bindPopup(e("SME - CSAR CALS DE OLIVEIRA NETO")),L.marker([-3.76848,-38.5516]).addTo(t).bindPopup(e("SCSP - RUA ANTONIO FIUZA X RUA BARO DE SOBRAL")),L.marker([-3.7238,-38.47711]).addTo(t).bindPopup(e("SME - EM PROFESSORA CONSUELO AMORA")),L.marker([-3.71196,-38.55544]).addTo(t).bindPopup(e("SME - [ESCOLA MUNICIPAL / HILBERTO SILVA]")),L.marker([-3.75852,-38.58386]).addTo(t).bindPopup(e("PRAA DOM LUSTOSA (Henrique Jorge)")),L.marker([-3.72403,-38.5834]).addTo(t).bindPopup(e("AV MAJOR ASSIS X RUA ALBERTO FERREIRA")),L.marker([-3.82881,-38.52133]).addTo(t).bindPopup(e("SCSP - AV JOR THOMAZ COELHO / AV PRS COSTA E SILVA"));var i=function(t){return'\n      <div classname="d-flex table__leaflet">                            \n                                        <div class="leaflet-title">                            \n                                            <h2 class="d-flex text-lowercase">\n                                                <img src="https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png" \n                                                class="mr-2" width="22" height="auto" alt="marker">'.concat(t,'</h2>\n                                            <table class="table_leaflet--table  w-100">\n                                                <thead class="text-xl">\n                                                    <tr><th>Poluentes</th>\n                                                    <th>Valores*</th>\n                                                    <th>Medida</th>\n                                                    <th>Nvel</th>\n                                                </tr></thead> \n                                                <tbody>                                                          \n                                                  <tr style="background: #8ae271">\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">PM<sub>2.5</sub></h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">13</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">g/m</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">\n                                    <img src="./assets/img/Boa.png" class="leaflet-nvalue" alt="imagem qualidade boa"></h4></td>\n                                                  </tr>   \n                                                  <tr>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">PM<sub>10</sub></h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">15</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">g/m</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap">\n                                    <img src="./assets/img/Boa.png" class="leaflet-nvalue" alt="imagem qualidade boa">\n                                    </td>\n                                                  </tr>    \n                                                  <tr>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">CO</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">13</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"> <h4 class="text-xl">ppm</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap">\n                                    <img src="./assets/img/Moderada.png" class="leaflet-nvalue" alt="imagem qualidade pessima">\n                                    </td>\n                                                  </tr>    \n                                                  <tr>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">O<sub>3</sub></h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">119,11</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">g/m</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap">\n                                    <img src="./assets/img/Moderada.png" class="leaflet-nvalue" alt="imagem qualidade moderada">\n                                    </td>\n                                                  </tr>    \n                                                  <tr>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">NO<sub>2</sub></h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">129,37</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">g/m</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap">\n                                    <img src="./assets/img/Boa.png" class="leaflet-nvalue" alt="imagem qualidade moderada">\n                                    </td>\n                                                  </tr>    \n                                                </tbody>\n                                            </table>\n                                            </div>\n                                            <em class="sofia-font text-xs">\n                                              *No momento os dados foram coletados s. 4:40:39</em>\n                                        </div>\n      \n      ')},r=L.icon({iconUrl:"./assets/img/Boa.png",iconRetinaUrl:"./assets/img/Boa.png",className:"leaflet-boa",iconSize:[40,40]});L.Marker.prototype.options.icon=r,L.marker([-3.72612,-38.4951]).addTo(t).bindPopup(i("PROJ. WIFOR BM")),L.marker([-3.72546,-38.53269]).addTo(t).bindPopup(i("SESEC - R. GUILHERME ROCHA X AV. TRISTO GONALVES (P da lagoinha)")),L.marker([-3.72183,-38.47893]).addTo(t).bindPopup(i("AMC - AV. BEIRA MAR X AV. ABOLIO"));var s,o,a,c,l,u,h,d,f,p=yt(kp),m=function(t,e,...n){if(t=C(t),function(t,e,n){if(!n)throw new ps(fs.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}("collection","path",e),t instanceof Gu){const i=Os.fromString(e,...n);return $u(i),new Qu(t,null,i)}{if(!(t instanceof Xu||t instanceof Qu))throw new ps(fs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Os.fromString(e,...n));return $u(i),new Qu(t.firestore,null,i)}}(nh(p),"system-1"),g=function(t,e,...n){let i=[];e instanceof _h&&i.push(e),i=i.concat(n),function(t){const e=t.filter((t=>t instanceof xh)).length,n=t.filter((t=>t instanceof wh)).length;if(e>1||e>0&&n>0)throw new ps(fs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const e of i)t=e._apply(t);return t}(m,function(t,e="asc"){const n=e,i=yh("orderBy","data");return Th._create(i,n)}(),(function(t,e){if(e<=0)throw new ps(fs.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}("limit",86),Eh._create("limit",86,"F"))),v=[],y="",_="",b="",w=250,x=.5,T=[25,50,75,125,300],E=[100,130,160,200,800],S=[50,100,150,250,600],k=[10,12,14,16,50],I=[200,240,320,1130,3750],A=(function(t,...e){var n,i,r;t=C(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||th(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(th(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(i=t.error)||void 0===i?void 0:i.bind(t),e[o+2]=null===(r=t.complete)||void 0===r?void 0:r.bind(t)}let c,l,u;if(t instanceof Xu)l=Zu(t.firestore,eh),u=ra(t._key.path),c={next:n=>{e[o]&&e[o](function(t,e,n){const i=n.docs.get(e._key),r=new Rh(t);return new Oh(t,r,e._key,i,new Lh(n.hasPendingWrites,n.fromCache),e.converter)}(l,t,n))},error:e[o+1],complete:e[o+2]};else{const n=Zu(t,Yu);l=Zu(n.firestore,eh),u=n._query;const i=new Rh(l);c={next:t=>{e[o]&&e[o](new Nh(l,i,n,t))},error:e[o+1],complete:e[o+2]},function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ps(fs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}!function(t,e,n,i){const r=new Fu(i),s=new gu(e,r,n);t.asyncQueue.enqueueAndForget((async()=>async function(t,e){const n=ds(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new hu),r)try{s.Nu=await n.onListen(i)}catch(t){const n=au(t,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&mu(n)}(await Vu(t),s)))}(function(t){return t._firestoreClient||ih(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(l),u,a,c)}(g,(function(e){e.forEach((function(t){v.push(t.data())})),v[v.length-1];for(var n=function(){var e=v[i],n=e.moqaID;console.log(e),"tiqam392"==n&&(y=-3.7899023034813,_=-38.5868264581879,b="Siqueira "),"tiqam392nova"==n&&(y=-3.7192162962032,_=-38.514145586396,b="Fundao de Cincia, Tecnologia e Inovao de Fortaleza  Citinova");var r=e.pm25,p=e.hum,m=e.adc2,g=e.pm10,C=e.extTemp,A=(e.intTemp,e.adc1),O=e.adc0,P=e.hora,N=(e.data,e.myTimestamp.seconds,273.15),D=1e3*A*46.01/(.082*(C+N))/1e5;console.log(D);var R=1e3*O*48/(.082*(C+N))/1e4;console.log(R);var M=m/1e4;console.log(M);"".concat(parseFloat(p).toFixed(0),"%");isNaN(p),R<E[0]&&(o='\n                                    <img src="./assets/img/Boa.png" class="leaflet-nvalue" alt="imagem qualidade boa" />\n                                    '),R>E[0]&&R<E[1]&&(o='\n                                    <img src="./assets/img/Moderada.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),R>E[1]&&R<E[2]&&(o='\n                                    <img src="./assets/img/ruim.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),R>E[2]&&R<E[3]&&(o='\n                                    <img src="./assets/img/Muito-ruim.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),R>E[3]&&R<E[4]&&(o='\n                                    <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),R>E[4]&&(o='\n                                    <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),D<I[0]&&(a='\n                                    <img src="./assets/img/Boa.png" class="leaflet-nvalue" alt="imagem qualidade boa" />\n                                    '),D>I[0]&&D<I[1]&&(a='\n                                    <img src="./assets/img/Moderada.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),D>I[1]&&D<I[2]&&(a='\n                                    <img src="./assets/img/ruim.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),D>I[2]&&D<I[3]&&(a='\n                                    <img src="./assets/img/Muito-ruim.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),D>I[3]&&D<I[4]&&(a='\n                                     <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),D>I[4]&&(a='\n                                    <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),g<S[0]&&(c='\n                                    <img src="./assets/img/Boa.png" class="leaflet-nvalue" alt="imagem qualidade boa" />\n                                    '),g>S[0]&&g<S[1]&&(c='\n                                    <img src="./assets/img/Moderada.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),g>S[1]&&g<S[2]&&(c='\n                                    <img src="./assets/img/ruim.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),g>S[2]&&g<S[3]&&(c='\n                                    <img src="./assets/img/Muito-ruim.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),g>S[3]&&g<S[4]&&(c='               \n                                        <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),g>S[4]&&(c='   \n                                        <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade pessima" />\n                                    '),m<k[0]&&(l='\n                                    <img src="./assets/img/Boa.png" class="leaflet-nvalue" alt="imagem qualidade boa" />\n                                    '),m>k[0]&&m<k[1]&&(l='\n                                    <img src="./assets/img/Moderada.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />\n                                    '),m>k[1]&&m<k[2]&&(l='\n                                    <img src="./assets/img/ruim.png" class="leaflet-nvalue" alt="imagem qualidade ruim" />\n                                    '),m>k[2]&&m<k[3]&&(l='\n                                    <img src="./assets/img/Muito-ruim.png" class="leaflet-nvalue" alt="imagem qualidade muito ruim" />\n                                    '),m>k[3]&&m<k[4]&&(l='\n                                        <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade pessima" />\n                                    '),m>k[4]&&(l='\n                                    <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade pessima" />\n                                    '),r<1&&(s='\n                                    <img src="./assets/img/Semponto.png" class="leaflet-nvalue" alt="sem ponto" />',u={color:"Gray",fillColor:"#e4e4e4",fillOpacity:x,radius:w},h={iconUrl:"./assets/img/Semponto.png",iconRetinaUrl:"./assets/img/Semponto.png",iconSize:[40,40]}),r>1&&r<T[0]&&(s='\n                                    <img src="./assets/img/Boa.png" class="leaflet-nvalue" alt="imagem qualidade boa" />',u={color:"Green",fillColor:"#8ae271",fillOpacity:x,radius:w},h={iconUrl:"./assets/img/Boa.png",iconRetinaUrl:"./assets/img/Boa.png",className:"leaflet-boa",iconSize:[40,40]}),r>T[0]&&r<T[1]&&(s='\n                                    <img src="./assets/img/Moderada.png" class="leaflet-nvalue" alt="imagem qualidade moderada" /> ',u={color:"yellow",fillColor:"#ffff63",fillOpacity:x,radius:w},h={iconUrl:"./assets/img/Moderada.png",iconRetinaUrl:"./assets/img/Moderada.png",className:"leaflet-moderada",iconSize:[40,40]}),r>T[1]&&r<T[2]&&(s='\n                                    <img src="./assets/img/ruim.png" class="leaflet-nvalue" alt="imagem qualidade ruim" />',u={color:"orange",fillColor:"#ee9f00",fillOpacity:x,radius:w},h={iconUrl:"./assets/img/ruim.png",iconRetinaUrl:"./assets/img/ruim.png",className:"leaflet-ruim",iconSize:[40,40]}),r>T[2]&&r<T[3]&&(s='\n                                    <img src="./assets/img/Muito-ruim.png" class="leaflet-nvalue" alt="imagem qualidade Muito ruim" />',u={color:"red",fillColor:"#ff5959",fillOpacity:x,radius:w},h={iconUrl:"./assets/img/Muito-ruim.png",iconRetinaUrl:"./assets/img/Muito-ruim.png",className:"leaflet-mruim",iconSize:[40,40]}),r>T[3]&&r<T[4]&&(s='\n                                    <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />',u={color:"purple",fillColor:"#ff64ff",fillOpacity:x,radius:w},h={iconUrl:"./assets/img/pessima.png",iconRetinaUrl:"./assets/img/pessima.png",className:"leaflet-pessima",iconSize:[40,40]}),r>T[4]&&(s='\n                                    <img src="./assets/img/pessima.png" class="leaflet-nvalue" alt="imagem qualidade moderada" />',u={color:"purple",fillColor:"#ff64ff",fillOpacity:x,radius:w},h={iconUrl:"./assets/img/pessima.png",iconRetinaUrl:"./assets/img/pessima.png",className:"leaflet-pessima",iconSize:[40,40]}),d=r>1?'\n                                    <div className="d-flex table__leaflet">                            \n                                        <div class="leaflet-title">                            \n                                            <h2 class="d-flex">\n                                                <img src="https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png" \n                                                class="mr-2" width="22" height="auto" alt="marker">'.concat(b,'</h2>\n                                            <table class="table_leaflet--table  w-100">\n                                                <thead class="text-xl">\n                                                    <th>Poluentes</th>\n                                                    <th>Valores*</th>\n                                                    <th>Medida</th>\n                                                    <th>Nvel</th>\n                                                </thead> \n                                                <tbody>                                                          \n                                                  <tr style="background: ').concat(u.fillColor,'">\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">PM<sub>2.5</sub></h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">').concat(r,'</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">g/m</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">').concat(s,'</h4></td>\n                                                  </tr>   \n                                                  <tr>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">PM<sub>10</sub></h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">').concat(g,'</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">g/m</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap">').concat(c,'</td>\n                                                  </tr>    \n                                                  <tr>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">CO</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">').concat(parseFloat(M).toFixed(2),'</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"> <h4 class="text-xl">ppm</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap">').concat(l,'</td>\n                                                  </tr>    \n                                                  <tr>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">O<sub>3</sub></h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">').concat(parseFloat(R).toFixed(2),'</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">g/m</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap">').concat(o,'</td>\n                                                  </tr>    \n                                                  <tr>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">NO<sub>2</sub></h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">').concat(parseFloat(D).toFixed(2),'</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap"><h4 class="text-xl">g/m</h4></td>\n                                                      <td class="px-2 py-2 whitespace-nowrap">').concat(a,'</td>\n                                                  </tr>    \n                                                </tbody>\n                                            </table>\n                                            </div>\n                                            <em class="sofia-font text-xs">\n                                              *No momento os dados foram coletados s ').concat(P,".</em>\n                                        </div>\n                                        "):'\n                                    <div className="d-flex">                            \n                                        <div class="leaflet-title">                            \n                                            <h2 class="d-flex"><img src="https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png" \n                                            class="mr-2" width="22" alt="marker">\n                                            </h2>\n                                            <p>\n                                                Monitor a ser instalado\n                                            </p>\n                                        </div>\n                                    </div>\n                                    ',f=L.icon(h),L.Marker.prototype.options.icon=f,L.marker([y,_],f).addTo(t).bindPopup(d)},i=0;i<v.length;i++)n()})),wp(p)),O=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){Sp(s,i,r,o,a,"next",t)}function a(t){Sp(s,i,r,o,a,"throw",t)}o(void 0)}))}}(Ep().mark((function t(){return Ep().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mf(A,"israeldesigner@icloud.com","6klzKIaA*hfKTa31").then((function(t){})).catch((function(t){var e=t.code,n=t.message;console.log(e),console.log(n)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();O()}document.querySelectorAll(".toggleActive"),document.querySelectorAll(".toggleDesactive"),document.querySelectorAll(".logos-poluentes"),document.querySelector(".btnShow"),document.querySelectorAll(".aside__card"),document.querySelector(".icon-main"),document.querySelector(".icon-parc"),document.querySelector(".left-side__top"),document.querySelector(".left-side__bottom")},Ip=function(t){t.matches},Ap="top",Lp="bottom",Op="right",Pp="left",Np="auto",Dp=[Ap,Lp,Op,Pp],Rp="start",Mp="end",jp="clippingParents",Fp="viewport",zp="popper",Bp="reference",Up=Dp.reduce((function(t,e){return t.concat([e+"-"+Rp,e+"-"+Mp])}),[]),Vp=[].concat(Dp,[Np]).reduce((function(t,e){return t.concat([e,e+"-"+Rp,e+"-"+Mp])}),[]),qp="beforeRead",Hp="read",$p="afterRead",Wp="beforeMain",Zp="main",Kp="afterMain",Gp="beforeWrite",Xp="write",Yp="afterWrite",Qp=[qp,Hp,$p,Wp,Zp,Kp,Gp,Xp,Yp];function Jp(t){return t?(t.nodeName||"").toLowerCase():null}function tm(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function em(t){return t instanceof tm(t).Element||t instanceof Element}function nm(t){return t instanceof tm(t).HTMLElement||t instanceof HTMLElement}function im(t){return"undefined"!=typeof ShadowRoot&&(t instanceof tm(t).ShadowRoot||t instanceof ShadowRoot)}const rm={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];nm(r)&&Jp(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});nm(i)&&Jp(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function sm(t){return t.split("-")[0]}var om=Math.max,am=Math.min,cm=Math.round;function lm(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function um(){return!/^((?!chrome|android).)*safari/i.test(lm())}function hm(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&nm(t)&&(r=t.offsetWidth>0&&cm(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&cm(i.height)/t.offsetHeight||1);var o=(em(t)?tm(t):window).visualViewport,a=!um()&&n,c=(i.left+(a&&o?o.offsetLeft:0))/r,l=(i.top+(a&&o?o.offsetTop:0))/s,u=i.width/r,h=i.height/s;return{width:u,height:h,top:l,right:c+u,bottom:l+h,left:c,x:c,y:l}}function dm(t){var e=hm(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function fm(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&im(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function pm(t){return tm(t).getComputedStyle(t)}function mm(t){return["table","td","th"].indexOf(Jp(t))>=0}function gm(t){return((em(t)?t.ownerDocument:t.document)||window.document).documentElement}function vm(t){return"html"===Jp(t)?t:t.assignedSlot||t.parentNode||(im(t)?t.host:null)||gm(t)}function ym(t){return nm(t)&&"fixed"!==pm(t).position?t.offsetParent:null}function _m(t){for(var e=tm(t),n=ym(t);n&&mm(n)&&"static"===pm(n).position;)n=ym(n);return n&&("html"===Jp(n)||"body"===Jp(n)&&"static"===pm(n).position)?e:n||function(t){var e=/firefox/i.test(lm());if(/Trident/i.test(lm())&&nm(t)&&"fixed"===pm(t).position)return null;var n=vm(t);for(im(n)&&(n=n.host);nm(n)&&["html","body"].indexOf(Jp(n))<0;){var i=pm(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function bm(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function wm(t,e,n){return om(t,am(e,n))}function xm(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Tm(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const Em={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=sm(n.placement),c=bm(a),l=[Pp,Op].indexOf(a)>=0?"height":"width";if(s&&o){var u=function(t,e){return xm("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Tm(t,Dp))}(r.padding,n),h=dm(s),d="y"===c?Ap:Pp,f="y"===c?Lp:Op,p=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],m=o[c]-n.rects.reference[c],g=_m(s),v=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,_=u[d],b=v-h[l]-u[f],w=v/2-h[l]/2+y,x=wm(_,w,b),T=c;n.modifiersData[i]=((e={})[T]=x,e.centerOffset=x-w,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&fm(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sm(t){return t.split("-")[1]}var km={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Cm(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,c=t.gpuAcceleration,l=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=o.x,f=void 0===d?0:d,p=o.y,m=void 0===p?0:p,g="function"==typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),_=Pp,b=Ap,w=window;if(l){var x=_m(n),T="clientHeight",E="clientWidth";x===tm(n)&&"static"!==pm(x=gm(n)).position&&"absolute"===a&&(T="scrollHeight",E="scrollWidth"),(r===Ap||(r===Pp||r===Op)&&s===Mp)&&(b=Lp,m-=(h&&x===w&&w.visualViewport?w.visualViewport.height:x[T])-i.height,m*=c?1:-1),r!==Pp&&(r!==Ap&&r!==Lp||s!==Mp)||(_=Op,f-=(h&&x===w&&w.visualViewport?w.visualViewport.width:x[E])-i.width,f*=c?1:-1)}var S,k=Object.assign({position:a},l&&km),C=!0===u?function(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:cm(n*r)/r||0,y:cm(i*r)/r||0}}({x:f,y:m},tm(n)):{x:f,y:m};return f=C.x,m=C.y,c?Object.assign({},k,((S={})[b]=y?"0":"",S[_]=v?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",S)):Object.assign({},k,((e={})[b]=y?m+"px":"",e[_]=v?f+"px":"",e.transform="",e))}const Im={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:sm(e.placement),variation:Sm(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Cm(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Cm(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var Am={passive:!0};const Lm={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,c=tm(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach((function(t){t.addEventListener("scroll",n.update,Am)})),a&&c.addEventListener("resize",n.update,Am),function(){s&&l.forEach((function(t){t.removeEventListener("scroll",n.update,Am)})),a&&c.removeEventListener("resize",n.update,Am)}},data:{}};var Om={left:"right",right:"left",bottom:"top",top:"bottom"};function Pm(t){return t.replace(/left|right|bottom|top/g,(function(t){return Om[t]}))}var Nm={start:"end",end:"start"};function Dm(t){return t.replace(/start|end/g,(function(t){return Nm[t]}))}function Rm(t){var e=tm(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Mm(t){return hm(gm(t)).left+Rm(t).scrollLeft}function jm(t){var e=pm(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Fm(t){return["html","body","#document"].indexOf(Jp(t))>=0?t.ownerDocument.body:nm(t)&&jm(t)?t:Fm(vm(t))}function zm(t,e){var n;void 0===e&&(e=[]);var i=Fm(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=tm(i),o=r?[s].concat(s.visualViewport||[],jm(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(zm(vm(o)))}function Bm(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Um(t,e,n){return e===Fp?Bm(function(t,e){var n=tm(t),i=gm(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(r){s=r.width,o=r.height;var l=um();(l||!l&&"fixed"===e)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:o,x:a+Mm(t),y:c}}(t,n)):em(e)?function(t,e){var n=hm(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Bm(function(t){var e,n=gm(t),i=Rm(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=om(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=om(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Mm(t),c=-i.scrollTop;return"rtl"===pm(r||n).direction&&(a+=om(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(gm(t)))}function Vm(t){var e,n=t.reference,i=t.element,r=t.placement,s=r?sm(r):null,o=r?Sm(r):null,a=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2;switch(s){case Ap:e={x:a,y:n.y-i.height};break;case Lp:e={x:a,y:n.y+n.height};break;case Op:e={x:n.x+n.width,y:c};break;case Pp:e={x:n.x-i.width,y:c};break;default:e={x:n.x,y:n.y}}var l=s?bm(s):null;if(null!=l){var u="y"===l?"height":"width";switch(o){case Rp:e[l]=e[l]-(n[u]/2-i[u]/2);break;case Mp:e[l]=e[l]+(n[u]/2-i[u]/2)}}return e}function qm(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,s=n.strategy,o=void 0===s?t.strategy:s,a=n.boundary,c=void 0===a?jp:a,l=n.rootBoundary,u=void 0===l?Fp:l,h=n.elementContext,d=void 0===h?zp:h,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,v=xm("number"!=typeof g?g:Tm(g,Dp)),y=d===zp?Bp:zp,_=t.rects.popper,b=t.elements[p?y:d],w=function(t,e,n,i){var r="clippingParents"===e?function(t){var e=zm(vm(t)),n=["absolute","fixed"].indexOf(pm(t).position)>=0&&nm(t)?_m(t):t;return em(n)?e.filter((function(t){return em(t)&&fm(t,n)&&"body"!==Jp(t)})):[]}(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce((function(e,n){var r=Um(t,n,i);return e.top=om(r.top,e.top),e.right=am(r.right,e.right),e.bottom=am(r.bottom,e.bottom),e.left=om(r.left,e.left),e}),Um(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(em(b)?b:b.contextElement||gm(t.elements.popper),c,u,o),x=hm(t.elements.reference),T=Vm({reference:x,element:_,strategy:"absolute",placement:r}),E=Bm(Object.assign({},_,T)),S=d===zp?E:x,k={top:w.top-S.top+v.top,bottom:S.bottom-w.bottom+v.bottom,left:w.left-S.left+v.left,right:S.right-w.right+v.right},C=t.modifiersData.offset;if(d===zp&&C){var I=C[r];Object.keys(k).forEach((function(t){var e=[Op,Lp].indexOf(t)>=0?1:-1,n=[Ap,Lp].indexOf(t)>=0?"y":"x";k[t]+=I[n]*e}))}return k}const Hm={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=e.options.placement,v=sm(g),y=c||(v!==g&&p?function(t){if(sm(t)===Np)return[];var e=Pm(t);return[Dm(t),e,Dm(e)]}(g):[Pm(g)]),_=[g].concat(y).reduce((function(t,n){return t.concat(sm(n)===Np?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?Vp:c,u=Sm(i),h=u?a?Up:Up.filter((function(t){return Sm(t)===u})):Dp,d=h.filter((function(t){return l.indexOf(t)>=0}));0===d.length&&(d=h);var f=d.reduce((function(e,n){return e[n]=qm(t,{placement:n,boundary:r,rootBoundary:s,padding:o})[sm(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:l,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),b=e.rects.reference,w=e.rects.popper,x=new Map,T=!0,E=_[0],S=0;S<_.length;S++){var k=_[S],C=sm(k),I=Sm(k)===Rp,A=[Ap,Lp].indexOf(C)>=0,L=A?"width":"height",O=qm(e,{placement:k,boundary:u,rootBoundary:h,altBoundary:d,padding:l}),P=A?I?Op:Pp:I?Lp:Ap;b[L]>w[L]&&(P=Pm(P));var N=Pm(P),D=[];if(s&&D.push(O[C]<=0),a&&D.push(O[P]<=0,O[N]<=0),D.every((function(t){return t}))){E=k,T=!1;break}x.set(k,D)}if(T)for(var R=function(t){var e=_.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return E=e,"break"},M=p?3:1;M>0&&"break"!==R(M);M--);e.placement!==E&&(e.modifiersData[i]._skip=!0,e.placement=E,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function $m(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Wm(t){return[Ap,Op,Lp,Pp].some((function(e){return t[e]>=0}))}const Zm={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=qm(e,{elementContext:"reference"}),a=qm(e,{altBoundary:!0}),c=$m(o,i),l=$m(a,r,s),u=Wm(c),h=Wm(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},Km={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=void 0===r?[0,0]:r,o=Vp.reduce((function(t,n){return t[n]=function(t,e,n){var i=sm(t),r=[Pp,Ap].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Pp,Op].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,e.rects,s),t}),{}),a=o[e.placement],c=a.x,l=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[i]=o}},Gm={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Vm({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Xm={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=qm(e,{boundary:c,rootBoundary:l,padding:h,altBoundary:u}),v=sm(e.placement),y=Sm(e.placement),_=!y,b=bm(v),w="x"===b?"y":"x",x=e.modifiersData.popperOffsets,T=e.rects.reference,E=e.rects.popper,S="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,k="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),C=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(x){if(s){var A,L="y"===b?Ap:Pp,O="y"===b?Lp:Op,P="y"===b?"height":"width",N=x[b],D=N+g[L],R=N-g[O],M=f?-E[P]/2:0,j=y===Rp?T[P]:E[P],F=y===Rp?-E[P]:-T[P],z=e.elements.arrow,B=f&&z?dm(z):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=U[L],q=U[O],H=wm(0,T[P],B[P]),$=_?T[P]/2-M-H-V-k.mainAxis:j-H-V-k.mainAxis,W=_?-T[P]/2+M+H+q+k.mainAxis:F+H+q+k.mainAxis,Z=e.elements.arrow&&_m(e.elements.arrow),K=Z?"y"===b?Z.clientTop||0:Z.clientLeft||0:0,G=null!=(A=null==C?void 0:C[b])?A:0,X=N+W-G,Y=wm(f?am(D,N+$-G-K):D,N,f?om(R,X):R);x[b]=Y,I[b]=Y-N}if(a){var Q,J="x"===b?Ap:Pp,tt="x"===b?Lp:Op,et=x[w],nt="y"===w?"height":"width",it=et+g[J],rt=et-g[tt],st=-1!==[Ap,Pp].indexOf(v),ot=null!=(Q=null==C?void 0:C[w])?Q:0,at=st?it:et-T[nt]-E[nt]-ot+k.altAxis,ct=st?et+T[nt]+E[nt]-ot-k.altAxis:rt,lt=f&&st?function(t,e,n){var i=wm(t,e,n);return i>n?n:i}(at,et,ct):wm(f?at:it,et,f?ct:rt);x[w]=lt,I[w]=lt-et}e.modifiersData[i]=I}},requiresIfExists:["offset"]};function Ym(t,e,n){void 0===n&&(n=!1);var i,r,s=nm(e),o=nm(e)&&function(t){var e=t.getBoundingClientRect(),n=cm(e.width)/t.offsetWidth||1,i=cm(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),a=gm(e),c=hm(t,o,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!n)&&(("body"!==Jp(e)||jm(a))&&(l=(i=e)!==tm(i)&&nm(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Rm(i)),nm(e)?((u=hm(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=Mm(a))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function Qm(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}function Jm(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var tg={placement:"bottom",modifiers:[],strategy:"absolute"};function eg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function ng(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?tg:r;return function(t,e,n){void 0===n&&(n=s);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},tg,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},o=[],a=!1,c={state:r,setOptions:function(n){var a="function"==typeof n?n(r.options):n;l(),r.options=Object.assign({},s,r.options,a),r.scrollParents={reference:em(t)?zm(t):t.contextElement?zm(t.contextElement):[],popper:zm(e)};var u,h,d=function(t){var e=Qm(t);return Qp.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((u=[].concat(i,r.options.modifiers),h=u.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(h).map((function(t){return h[t]}))));return r.orderedModifiers=d.filter((function(t){return t.enabled})),r.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,s=t.effect;if("function"==typeof s){var a=s({state:r,name:e,instance:c,options:i});o.push(a||function(){})}})),c.update()},forceUpdate:function(){if(!a){var t=r.elements,e=t.reference,n=t.popper;if(eg(e,n)){r.rects={reference:Ym(e,_m(n),"fixed"===r.options.strategy),popper:dm(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(t){return r.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var s=r.orderedModifiers[i],o=s.fn,l=s.options,u=void 0===l?{}:l,h=s.name;"function"==typeof o&&(r=o({state:r,options:u,name:h,instance:c})||r)}else r.reset=!1,i=-1}}},update:Jm((function(){return new Promise((function(t){c.forceUpdate(),t(r)}))})),destroy:function(){l(),a=!0}};if(!eg(t,e))return c;function l(){o.forEach((function(t){return t()})),o=[]}return c.setOptions(n).then((function(t){!a&&n.onFirstUpdate&&n.onFirstUpdate(t)})),c}}var ig=ng(),rg=ng({defaultModifiers:[Lm,Gm,Im,rm,Km,Hm,Xm,Em,Zm]}),sg=ng({defaultModifiers:[Lm,Gm,Im,rm]});const og="transitionend",ag=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},cg=t=>{const e=ag(t);return e&&document.querySelector(e)?e:null},lg=t=>{const e=ag(t);return e?document.querySelector(e):null},ug=t=>{t.dispatchEvent(new Event(og))},hg=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),dg=t=>hg(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,fg=t=>{if(!hg(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},pg=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),mg=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?mg(t.parentNode):null},gg=()=>{},vg=t=>{t.offsetHeight},yg=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_g=[],bg=()=>"rtl"===document.documentElement.dir,wg=t=>{var e;e=()=>{const e=yg();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(_g.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of _g)t()})),_g.push(e)):e()},xg=t=>{"function"==typeof t&&t()},Tg=(t,e,n=!0)=>{if(!n)return void xg(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let r=!1;const s=({target:n})=>{n===e&&(r=!0,e.removeEventListener(og,s),xg(t))};e.addEventListener(og,s),setTimeout((()=>{r||ug(e)}),i)},Eg=(t,e,n,i)=>{const r=t.length;let s=t.indexOf(e);return-1===s?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},Sg=/[^.]*(?=\..*)\.|.*/,kg=/\..*/,Cg=/::\d+$/,Ig={};let Ag=1;const Lg={mouseenter:"mouseover",mouseleave:"mouseout"},Og=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Pg(t,e){return e&&`${e}::${Ag++}`||t.uidEvent||Ag++}function Ng(t){const e=Pg(t);return t.uidEvent=e,Ig[e]=Ig[e]||{},Ig[e]}function Dg(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function Rg(t,e,n){const i="string"==typeof e,r=i?n:e||n;let s=zg(t);return Og.has(s)||(s=t),[i,r,s]}function Mg(t,e,n,i,r){if("string"!=typeof e||!t)return;let[s,o,a]=Rg(e,n,i);if(e in Lg){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};o=t(o)}const c=Ng(t),l=c[a]||(c[a]={}),u=Dg(l,o,s?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const h=Pg(o,e.replace(Sg,"")),d=s?function(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return Ug(r,{delegateTarget:o}),i.oneOff&&Bg.off(t,r.type,e,n),n.apply(o,[r])}}(t,n,o):function(t,e){return function n(i){return Ug(i,{delegateTarget:t}),n.oneOff&&Bg.off(t,i.type,e),e.apply(t,[i])}}(t,o);d.delegationSelector=s?n:null,d.callable=o,d.oneOff=r,d.uidEvent=h,l[h]=d,t.addEventListener(a,d,s)}function jg(t,e,n,i,r){const s=Dg(e[n],i,r);s&&(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function Fg(t,e,n,i){const r=e[n]||{};for(const s of Object.keys(r))if(s.includes(i)){const i=r[s];jg(t,e,n,i.callable,i.delegationSelector)}}function zg(t){return t=t.replace(kg,""),Lg[t]||t}const Bg={on(t,e,n,i){Mg(t,e,n,i,!1)},one(t,e,n,i){Mg(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,s,o]=Rg(e,n,i),a=o!==e,c=Ng(t),l=c[o]||{},u=e.startsWith(".");if(void 0===s){if(u)for(const n of Object.keys(c))Fg(t,c,n,e.slice(1));for(const n of Object.keys(l)){const i=n.replace(Cg,"");if(!a||e.includes(i)){const e=l[n];jg(t,c,o,e.callable,e.delegationSelector)}}}else{if(!Object.keys(l).length)return;jg(t,c,o,s,r?n:null)}},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=yg();let r=null,s=!0,o=!0,a=!1;e!==zg(e)&&i&&(r=i.Event(e,n),i(t).trigger(r),s=!r.isPropagationStopped(),o=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());let c=new Event(e,{bubbles:s,cancelable:!0});return c=Ug(c,n),a&&c.preventDefault(),o&&t.dispatchEvent(c),c.defaultPrevented&&r&&r.preventDefault(),c}};function Ug(t,e){for(const[n,i]of Object.entries(e||{}))try{t[n]=i}catch(e){Object.defineProperty(t,n,{configurable:!0,get:()=>i})}return t}const Vg=new Map,qg={set(t,e,n){Vg.has(t)||Vg.set(t,new Map);const i=Vg.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,e)=>Vg.has(t)&&Vg.get(t).get(e)||null,remove(t,e){if(!Vg.has(t))return;const n=Vg.get(t);n.delete(e),0===n.size&&Vg.delete(t)}};function Hg(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function $g(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const Wg={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${$g(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${$g(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=Hg(t.dataset[i])}return e},getDataAttribute:(t,e)=>Hg(t.getAttribute(`data-bs-${$g(e)}`))};class Zg{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=hg(e)?Wg.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...hg(e)?Wg.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const i of Object.keys(e)){const r=e[i],s=t[i],o=hg(s)?"element":null==(n=s)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}var n}}class Kg extends Zg{constructor(t,e){super(),(t=dg(t))&&(this._element=t,this._config=this._getConfig(e),qg.set(this._element,this.constructor.DATA_KEY,this))}dispose(){qg.remove(this._element,this.constructor.DATA_KEY),Bg.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){Tg(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return qg.get(dg(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Gg=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;Bg.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),pg(this))return;const r=lg(this)||this.closest(`.${i}`);t.getOrCreateInstance(r)[e]()}))},Xg=".bs.alert",Yg=`close${Xg}`,Qg=`closed${Xg}`;class Jg extends Kg{static get NAME(){return"alert"}close(){if(Bg.trigger(this._element,Yg).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),Bg.trigger(this._element,Qg),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=Jg.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Gg(Jg,"close"),wg(Jg);const tv='[data-bs-toggle="button"]';class ev extends Kg{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=ev.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}Bg.on(document,"click.bs.button.data-api",tv,(t=>{t.preventDefault();const e=t.target.closest(tv);ev.getOrCreateInstance(e).toggle()})),wg(ev);const nv={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!pg(t)&&fg(t)))}},iv=".bs.swipe",rv=`touchstart${iv}`,sv=`touchmove${iv}`,ov=`touchend${iv}`,av=`pointerdown${iv}`,cv=`pointerup${iv}`,lv={endCallback:null,leftCallback:null,rightCallback:null},uv={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class hv extends Zg{constructor(t,e){super(),this._element=t,t&&hv.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return lv}static get DefaultType(){return uv}static get NAME(){return"swipe"}dispose(){Bg.off(this._element,iv)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),xg(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&xg(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Bg.on(this._element,av,(t=>this._start(t))),Bg.on(this._element,cv,(t=>this._end(t))),this._element.classList.add("pointer-event")):(Bg.on(this._element,rv,(t=>this._start(t))),Bg.on(this._element,sv,(t=>this._move(t))),Bg.on(this._element,ov,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const dv=".bs.carousel",fv=".data-api",pv="next",mv="prev",gv="left",vv="right",yv=`slide${dv}`,_v=`slid${dv}`,bv=`keydown${dv}`,wv=`mouseenter${dv}`,xv=`mouseleave${dv}`,Tv=`dragstart${dv}`,Ev=`load${dv}${fv}`,Sv=`click${dv}${fv}`,kv="carousel",Cv="active",Iv=".active",Av=".carousel-item",Lv=Iv+Av,Ov={ArrowLeft:vv,ArrowRight:gv},Pv={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Nv={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Dv extends Kg{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=nv.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===kv&&this.cycle()}static get Default(){return Pv}static get DefaultType(){return Nv}static get NAME(){return"carousel"}next(){this._slide(pv)}nextWhenVisible(){!document.hidden&&fg(this._element)&&this.next()}prev(){this._slide(mv)}pause(){this._isSliding&&ug(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Bg.one(this._element,_v,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void Bg.one(this._element,_v,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?pv:mv;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&Bg.on(this._element,bv,(t=>this._keydown(t))),"hover"===this._config.pause&&(Bg.on(this._element,wv,(()=>this.pause())),Bg.on(this._element,xv,(()=>this._maybeEnableCycle()))),this._config.touch&&hv.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of nv.find(".carousel-item img",this._element))Bg.on(t,Tv,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(gv)),rightCallback:()=>this._slide(this._directionToOrder(vv)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new hv(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Ov[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=nv.findOne(Iv,this._indicatorsElement);e.classList.remove(Cv),e.removeAttribute("aria-current");const n=nv.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Cv),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===pv,r=e||Eg(this._getItems(),n,i,this._config.wrap);if(r===n)return;const s=this._getItemIndex(r),o=e=>Bg.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:s});if(o(yv).defaultPrevented)return;if(!n||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=r;const c=i?"carousel-item-start":"carousel-item-end",l=i?"carousel-item-next":"carousel-item-prev";r.classList.add(l),vg(r),n.classList.add(c),r.classList.add(c),this._queueCallback((()=>{r.classList.remove(c,l),r.classList.add(Cv),n.classList.remove(Cv,l,c),this._isSliding=!1,o(_v)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return nv.findOne(Lv,this._element)}_getItems(){return nv.find(Av,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return bg()?t===gv?mv:pv:t===gv?pv:mv}_orderToDirection(t){return bg()?t===mv?gv:vv:t===mv?vv:gv}static jQueryInterface(t){return this.each((function(){const e=Dv.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}Bg.on(document,Sv,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=lg(this);if(!e||!e.classList.contains(kv))return;t.preventDefault();const n=Dv.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===Wg.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),Bg.on(window,Ev,(()=>{const t=nv.find('[data-bs-ride="carousel"]');for(const e of t)Dv.getOrCreateInstance(e)})),wg(Dv);const Rv=".bs.collapse",Mv=`show${Rv}`,jv=`shown${Rv}`,Fv=`hide${Rv}`,zv=`hidden${Rv}`,Bv=`click${Rv}.data-api`,Uv="show",Vv="collapse",qv="collapsing",Hv=`:scope .${Vv} .${Vv}`,$v='[data-bs-toggle="collapse"]',Wv={parent:null,toggle:!0},Zv={parent:"(null|element)",toggle:"boolean"};class Kv extends Kg{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=nv.find($v);for(const t of n){const e=cg(t),n=nv.find(e).filter((t=>t===this._element));null!==e&&n.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Wv}static get DefaultType(){return Zv}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>Kv.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(Bg.trigger(this._element,Mv).defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(Vv),this._element.classList.add(qv),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(qv),this._element.classList.add(Vv,Uv),this._element.style[e]="",Bg.trigger(this._element,jv)}),this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(Bg.trigger(this._element,Fv).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,vg(this._element),this._element.classList.add(qv),this._element.classList.remove(Vv,Uv);for(const t of this._triggerArray){const e=lg(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(qv),this._element.classList.add(Vv),Bg.trigger(this._element,zv)}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(Uv)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=dg(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren($v);for(const e of t){const t=lg(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=nv.find(Hv,this._config.parent);return nv.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=Kv.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}Bg.on(document,Bv,$v,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=cg(this),n=nv.find(e);for(const t of n)Kv.getOrCreateInstance(t,{toggle:!1}).toggle()})),wg(Kv);const Gv="dropdown",Xv=".bs.dropdown",Yv=".data-api",Qv="ArrowUp",Jv="ArrowDown",ty=`hide${Xv}`,ey=`hidden${Xv}`,ny=`show${Xv}`,iy=`shown${Xv}`,ry=`click${Xv}${Yv}`,sy=`keydown${Xv}${Yv}`,oy=`keyup${Xv}${Yv}`,ay="show",cy='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ly=`${cy}.${ay}`,uy=".dropdown-menu",hy=bg()?"top-end":"top-start",dy=bg()?"top-start":"top-end",fy=bg()?"bottom-end":"bottom-start",py=bg()?"bottom-start":"bottom-end",my=bg()?"left-start":"right-start",gy=bg()?"right-start":"left-start",vy={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yy={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class _y extends Kg{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=nv.next(this._element,uy)[0]||nv.prev(this._element,uy)[0]||nv.findOne(uy,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return vy}static get DefaultType(){return yy}static get NAME(){return Gv}toggle(){return this._isShown()?this.hide():this.show()}show(){if(pg(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!Bg.trigger(this._element,ny,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))Bg.on(t,"mouseover",gg);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ay),this._element.classList.add(ay),Bg.trigger(this._element,iy,t)}}hide(){if(pg(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!Bg.trigger(this._element,ty,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Bg.off(t,"mouseover",gg);this._popper&&this._popper.destroy(),this._menu.classList.remove(ay),this._element.classList.remove(ay),this._element.setAttribute("aria-expanded","false"),Wg.removeDataAttribute(this._menu,"popper"),Bg.trigger(this._element,ey,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!hg(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Gv.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:hg(this._config.reference)?t=dg(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=rg(t,this._menu,e)}_isShown(){return this._menu.classList.contains(ay)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return my;if(t.classList.contains("dropstart"))return gy;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?dy:hy:e?py:fy}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Wg.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=nv.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>fg(t)));n.length&&Eg(n,e,t===Jv,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=_y.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=nv.find(ly);for(const n of e){const e=_y.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const s={relatedTarget:e._element};"click"===t.type&&(s.clickEvent=t),e._completeHide(s)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,i=[Qv,Jv].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(cy)?this:nv.prev(this,cy)[0]||nv.next(this,cy)[0]||nv.findOne(cy,t.delegateTarget.parentNode),s=_y.getOrCreateInstance(r);if(i)return t.stopPropagation(),s.show(),void s._selectMenuItem(t);s._isShown()&&(t.stopPropagation(),s.hide(),r.focus())}}Bg.on(document,sy,cy,_y.dataApiKeydownHandler),Bg.on(document,sy,uy,_y.dataApiKeydownHandler),Bg.on(document,ry,_y.clearMenus),Bg.on(document,oy,_y.clearMenus),Bg.on(document,ry,cy,(function(t){t.preventDefault(),_y.getOrCreateInstance(this).toggle()})),wg(_y);const by=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",wy=".sticky-top",xy="padding-right",Ty="margin-right";class Ey{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,xy,(e=>e+t)),this._setElementAttributes(by,xy,(e=>e+t)),this._setElementAttributes(wy,Ty,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,xy),this._resetElementAttributes(by,xy),this._resetElementAttributes(wy,Ty)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&Wg.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=Wg.getDataAttribute(t,e);null!==n?(Wg.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(hg(t))e(t);else for(const n of nv.find(t,this._element))e(n)}}const Sy="backdrop",ky="show",Cy=`mousedown.bs.${Sy}`,Iy={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ay={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ly extends Zg{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Iy}static get DefaultType(){return Ay}static get NAME(){return Sy}show(t){if(!this._config.isVisible)return void xg(t);this._append();const e=this._getElement();this._config.isAnimated&&vg(e),e.classList.add(ky),this._emulateAnimation((()=>{xg(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(ky),this._emulateAnimation((()=>{this.dispose(),xg(t)}))):xg(t)}dispose(){this._isAppended&&(Bg.off(this._element,Cy),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=dg(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),Bg.on(t,Cy,(()=>{xg(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){Tg(t,this._getElement(),this._config.isAnimated)}}const Oy=".bs.focustrap",Py=`focusin${Oy}`,Ny=`keydown.tab${Oy}`,Dy="backward",Ry={autofocus:!0,trapElement:null},My={autofocus:"boolean",trapElement:"element"};class jy extends Zg{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ry}static get DefaultType(){return My}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Bg.off(document,Oy),Bg.on(document,Py,(t=>this._handleFocusin(t))),Bg.on(document,Ny,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Bg.off(document,Oy))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=nv.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Dy?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?Dy:"forward")}}const Fy=".bs.modal",zy=`hide${Fy}`,By=`hidePrevented${Fy}`,Uy=`hidden${Fy}`,Vy=`show${Fy}`,qy=`shown${Fy}`,Hy=`resize${Fy}`,$y=`click.dismiss${Fy}`,Wy=`mousedown.dismiss${Fy}`,Zy=`keydown.dismiss${Fy}`,Ky=`click${Fy}.data-api`,Gy="modal-open",Xy="show",Yy="modal-static",Qy={backdrop:!0,focus:!0,keyboard:!0},Jy={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class t_ extends Kg{constructor(t,e){super(t,e),this._dialog=nv.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ey,this._addEventListeners()}static get Default(){return Qy}static get DefaultType(){return Jy}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||Bg.trigger(this._element,Vy,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Gy),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(Bg.trigger(this._element,zy).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Xy),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){for(const t of[window,this._dialog])Bg.off(t,Fy);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ly({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new jy({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=nv.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),vg(this._element),this._element.classList.add(Xy),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Bg.trigger(this._element,qy,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){Bg.on(this._element,Zy,(t=>{if("Escape"===t.key)return this._config.keyboard?(t.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),Bg.on(window,Hy,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),Bg.on(this._element,Wy,(t=>{Bg.one(this._element,$y,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Gy),this._resetAdjustments(),this._scrollBar.reset(),Bg.trigger(this._element,Uy)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Bg.trigger(this._element,By).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(Yy)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Yy),this._queueCallback((()=>{this._element.classList.remove(Yy),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=bg()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=bg()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=t_.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}Bg.on(document,Ky,'[data-bs-toggle="modal"]',(function(t){const e=lg(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),Bg.one(e,Vy,(t=>{t.defaultPrevented||Bg.one(e,Uy,(()=>{fg(this)&&this.focus()}))}));const n=nv.findOne(".modal.show");n&&t_.getInstance(n).hide(),t_.getOrCreateInstance(e).toggle(this)})),Gg(t_),wg(t_);const e_=".bs.offcanvas",n_=".data-api",i_=`load${e_}${n_}`,r_="show",s_="showing",o_="hiding",a_=".offcanvas.show",c_=`show${e_}`,l_=`shown${e_}`,u_=`hide${e_}`,h_=`hidePrevented${e_}`,d_=`hidden${e_}`,f_=`resize${e_}`,p_=`click${e_}${n_}`,m_=`keydown.dismiss${e_}`,g_={backdrop:!0,keyboard:!0,scroll:!1},v_={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class y_ extends Kg{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return g_}static get DefaultType(){return v_}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||Bg.trigger(this._element,c_,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ey).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(s_),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(r_),this._element.classList.remove(s_),Bg.trigger(this._element,l_,{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(Bg.trigger(this._element,u_).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(o_),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(r_,o_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Ey).reset(),Bg.trigger(this._element,d_)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new Ly({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():Bg.trigger(this._element,h_)}:null})}_initializeFocusTrap(){return new jy({trapElement:this._element})}_addEventListeners(){Bg.on(this._element,m_,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():Bg.trigger(this._element,h_))}))}static jQueryInterface(t){return this.each((function(){const e=y_.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Bg.on(document,p_,'[data-bs-toggle="offcanvas"]',(function(t){const e=lg(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),pg(this))return;Bg.one(e,d_,(()=>{fg(this)&&this.focus()}));const n=nv.findOne(a_);n&&n!==e&&y_.getInstance(n).hide(),y_.getOrCreateInstance(e).toggle(this)})),Bg.on(window,i_,(()=>{for(const t of nv.find(a_))y_.getOrCreateInstance(t).show()})),Bg.on(window,f_,(()=>{for(const t of nv.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&y_.getOrCreateInstance(t).hide()})),Gg(y_),wg(y_);const __=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),b_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,w_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,x_=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!__.has(n)||Boolean(b_.test(t.nodeValue)||w_.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))},T_={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},E_={allowList:T_,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},S_={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},k_={entry:"(string|element|function|null)",selector:"(string|element)"};class C_ extends Zg{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return E_}static get DefaultType(){return S_}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,n]of Object.entries(this._config.content))this._setContent(t,n,e);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},k_)}_setContent(t,e,n){const i=nv.findOne(n,t);i&&((e=this._resolvePossibleFunction(e))?hg(e)?this._putElementInTemplate(dg(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const t of r){const n=t.nodeName.toLowerCase();if(!Object.keys(e).includes(n)){t.remove();continue}const i=[].concat(...t.attributes),r=[].concat(e["*"]||[],e[n]||[]);for(const e of i)x_(e,r)||t.removeAttribute(e.nodeName)}return i.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return"function"==typeof t?t(this):t}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const I_=new Set(["sanitize","allowList","sanitizeFn"]),A_="fade",L_="show",O_=".modal",P_="hide.bs.modal",N_="hover",D_="focus",R_={AUTO:"auto",TOP:"top",RIGHT:bg()?"left":"right",BOTTOM:"bottom",LEFT:bg()?"right":"left"},M_={allowList:T_,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},j_={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class F_ extends Kg{constructor(t,e){if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return M_}static get DefaultType(){return j_}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Bg.off(this._element.closest(O_),P_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=Bg.trigger(this._element,this.constructor.eventName("show")),e=(mg(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),Bg.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(L_),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Bg.on(t,"mouseover",gg);this._queueCallback((()=>{Bg.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Bg.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(L_),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Bg.off(t,"mouseover",gg);this._activeTrigger.click=!1,this._activeTrigger[D_]=!1,this._activeTrigger[N_]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Bg.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(A_,L_),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(A_),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new C_({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(A_)}_isShown(){return this.tip&&this.tip.classList.contains(L_)}_createPopper(t){const e="function"==typeof this._config.placement?this._config.placement.call(this,t,this._element):this._config.placement,n=R_[e.toUpperCase()];return rg(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"==typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)Bg.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===N_?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=e===N_?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Bg.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?D_:N_]=!0,e._enter()})),Bg.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?D_:N_]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},Bg.on(this._element.closest(O_),P_,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Wg.getDataAttributes(this._element);for(const t of Object.keys(e))I_.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:dg(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=F_.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}wg(F_);const z_={...F_.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},B_={...F_.DefaultType,content:"(null|string|element|function)"};class U_ extends F_{static get Default(){return z_}static get DefaultType(){return B_}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=U_.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}wg(U_);const V_=".bs.scrollspy",q_=`activate${V_}`,H_=`click${V_}`,$_=`load${V_}.data-api`,W_="active",Z_="[href]",K_=".nav-link",G_=`${K_}, .nav-item > ${K_}, .list-group-item`,X_={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Y_={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Q_ extends Kg{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return X_}static get DefaultType(){return Y_}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=dg(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Bg.off(this._config.target,H_),Bg.on(this._config.target,H_,Z_,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(s));continue}const t=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(s),!i)return}else r||t||n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=nv.find(Z_,this._config.target);for(const e of t){if(!e.hash||pg(e))continue;const t=nv.findOne(e.hash,this._element);fg(t)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(W_),this._activateParents(t),Bg.trigger(this._element,q_,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))nv.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(W_);else for(const e of nv.parents(t,".nav, .list-group"))for(const t of nv.prev(e,G_))t.classList.add(W_)}_clearActiveClass(t){t.classList.remove(W_);const e=nv.find(`${Z_}.${W_}`,t);for(const t of e)t.classList.remove(W_)}static jQueryInterface(t){return this.each((function(){const e=Q_.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Bg.on(window,$_,(()=>{for(const t of nv.find('[data-bs-spy="scroll"]'))Q_.getOrCreateInstance(t)})),wg(Q_);const J_=".bs.tab",tb=`hide${J_}`,eb=`hidden${J_}`,nb=`show${J_}`,ib=`shown${J_}`,rb=`click${J_}`,sb=`keydown${J_}`,ob=`load${J_}`,ab="ArrowLeft",cb="ArrowRight",lb="ArrowUp",ub="ArrowDown",hb="active",db="fade",fb="show",pb=":not(.dropdown-toggle)",mb='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',gb=`.nav-link${pb}, .list-group-item${pb}, [role="tab"]${pb}, ${mb}`,vb=`.${hb}[data-bs-toggle="tab"], .${hb}[data-bs-toggle="pill"], .${hb}[data-bs-toggle="list"]`;class yb extends Kg{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Bg.on(this._element,sb,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?Bg.trigger(e,tb,{relatedTarget:t}):null;Bg.trigger(t,nb,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(hb),this._activate(lg(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),Bg.trigger(t,ib,{relatedTarget:e})):t.classList.add(fb)}),t,t.classList.contains(db)))}_deactivate(t,e){t&&(t.classList.remove(hb),t.blur(),this._deactivate(lg(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),Bg.trigger(t,eb,{relatedTarget:e})):t.classList.remove(fb)}),t,t.classList.contains(db)))}_keydown(t){if(![ab,cb,lb,ub].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[cb,ub].includes(t.key),n=Eg(this._getChildren().filter((t=>!pg(t))),t.target,e,!0);n&&(n.focus({preventScroll:!0}),yb.getOrCreateInstance(n).show())}_getChildren(){return nv.find(gb,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=lg(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const i=(t,i)=>{const r=nv.findOne(t,n);r&&r.classList.toggle(i,e)};i(".dropdown-toggle",hb),i(".dropdown-menu",fb),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(hb)}_getInnerElement(t){return t.matches(gb)?t:nv.findOne(gb,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=yb.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Bg.on(document,rb,mb,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),pg(this)||yb.getOrCreateInstance(this).show()})),Bg.on(window,ob,(()=>{for(const t of nv.find(vb))yb.getOrCreateInstance(t)})),wg(yb);const _b=".bs.toast",bb=`mouseover${_b}`,wb=`mouseout${_b}`,xb=`focusin${_b}`,Tb=`focusout${_b}`,Eb=`hide${_b}`,Sb=`hidden${_b}`,kb=`show${_b}`,Cb=`shown${_b}`,Ib="hide",Ab="show",Lb="showing",Ob={animation:"boolean",autohide:"boolean",delay:"number"},Pb={animation:!0,autohide:!0,delay:5e3};class Nb extends Kg{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Pb}static get DefaultType(){return Ob}static get NAME(){return"toast"}show(){Bg.trigger(this._element,kb).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Ib),vg(this._element),this._element.classList.add(Ab,Lb),this._queueCallback((()=>{this._element.classList.remove(Lb),Bg.trigger(this._element,Cb),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(Bg.trigger(this._element,Eb).defaultPrevented||(this._element.classList.add(Lb),this._queueCallback((()=>{this._element.classList.add(Ib),this._element.classList.remove(Lb,Ab),Bg.trigger(this._element,Sb)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ab),super.dispose()}isShown(){return this._element.classList.contains(Ab)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){Bg.on(this._element,bb,(t=>this._onInteraction(t,!0))),Bg.on(this._element,wb,(t=>this._onInteraction(t,!1))),Bg.on(this._element,xb,(t=>this._onInteraction(t,!0))),Bg.on(this._element,Tb,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Nb.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Gg(Nb),wg(Nb);function Db(t,e,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=t+"="+e+";"+r+";path=/"}function Rb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}!function(t){"interactive"===document.readyState||"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",t,!1)}((function(){var t,e,n,i,r,o,a,c,l,u,h,d,f;Cp(),function(t){t.tooltip&&[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(t){return new F_(t)})),t.popover&&[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map((function(t){return new U_(t,{})})),t.toasts&&[].slice.call(document.querySelectorAll('[data-bs-toggle="toast"]')).map((function(t){var e=null;if("A"===t.nodeName){if(!(e=t.href||null).includes("#"))return;e="#".concat(e.split("#").pop())}else"BUTTON"===t.nodeName&&(e=t.dataset.bsTarget||null);var n=document.querySelector(e);if(n){var i=new Nb(n,{});t.addEventListener("click",(function(t){t.preventDefault(),i.show()}))}})),document.addEventListener("click",(function(t){if(t.target.classList.contains("accordion-toggle")){var e=document.querySelector(t.target.hash);if(console.log(e),e)if(t.preventDefault(),e.classList.contains("active"))e.classList.remove("active");else{for(var n=document.querySelectorAll(".accordion-content.active"),i=0;i<n.length;i++)n[i].classList.remove("active");e.classList.toggle("active")}}}));var e=document.querySelectorAll(".nav-pills");e.forEach((function(t,e){var n=document.createElement("div"),i=t.querySelector("li:first-child .nav-link").cloneNode();i.innerHTML="-",n.classList.add("moving-tab","position-absolute","nav-link"),n.appendChild(i),t.appendChild(n),t.getElementsByTagName("li").length,n.style.padding="0px",n.style.width=t.querySelector("li:nth-child(1)").offsetWidth+"px",n.style.transform="translate3d(0px, 0px, 0px)",n.style.transition=".5s ease",t.onmouseover=function(e){var i,r=((i=(i=e)||window.event).target||i.srcElement).closest("li");if(r){var s=Array.from(r.closest("ul").children),o=s.indexOf(r)+1;t.querySelector("li:nth-child("+o+") .nav-link").onclick=function(){n=t.querySelector(".moving-tab");var e=0;if(t.classList.contains("flex-column")){for(var i=1;i<=s.indexOf(r);i++)e+=t.querySelector("li:nth-child("+i+")").offsetHeight;n.style.transform="translate3d(0px,"+e+"px, 0px)",n.style.height=t.querySelector("li:nth-child("+i+")").offsetHeight}else{for(i=1;i<=s.indexOf(r);i++)e+=t.querySelector("li:nth-child("+i+")").offsetWidth;n.style.transform="translate3d("+e+"px, 0px, 0px)",n.style.width=t.querySelector("li:nth-child("+o+")").offsetWidth+"px"}}}}})),window.addEventListener("resize",(function(t){e.forEach((function(t,e){t.querySelector(".moving-tab").remove();var n=document.createElement("div"),i=t.querySelector(".nav-link.active").cloneNode();i.innerHTML="-",n.classList.add("moving-tab","position-absolute","nav-link"),n.appendChild(i),t.appendChild(n),n.style.padding="0px",n.style.transition=".5s ease";var r=t.querySelector(".nav-link.active").parentElement;if(r){var s=Array.from(r.closest("ul").children),o=s.indexOf(r)+1,a=0;if(t.classList.contains("flex-column")){for(var c=1;c<=s.indexOf(r);c++)a+=t.querySelector("li:nth-child("+c+")").offsetHeight;n.style.transform="translate3d(0px,"+a+"px, 0px)",n.style.width=t.querySelector("li:nth-child("+o+")").offsetWidth+"px",n.style.height=t.querySelector("li:nth-child("+c+")").offsetHeight}else{for(c=1;c<=s.indexOf(r);c++)a+=t.querySelector("li:nth-child("+c+")").offsetWidth;n.style.transform="translate3d("+a+"px, 0px, 0px)",n.style.width=t.querySelector("li:nth-child("+o+")").offsetWidth+"px"}}})),window.innerWidth<991?e.forEach((function(t,e){t.classList.contains("flex-column")||t.classList.add("flex-column","on-resize")})):e.forEach((function(t,e){t.classList.contains("on-resize")&&t.classList.remove("flex-column","on-resize")}))})),window.onload=function(){for(var t=document.querySelectorAll("input"),e=0;e<t.length;e++)t[e].addEventListener("focus",(function(t){this.parentElement.classList.add("is-focused")}),!1),t[e].onkeyup=function(t){""!=this.value?this.parentElement.classList.add("is-filled"):this.parentElement.classList.remove("is-filled")},t[e].addEventListener("focusout",(function(t){""!=this.value&&this.parentElement.classList.add("is-filled"),this.parentElement.classList.remove("is-focused")}),!1);var n=document.querySelectorAll(".btn");for(e=0;e<n.length;e++)n[e].addEventListener("click",(function(t){var e=t.target,n=e.querySelector(".ripple");(n=document.createElement("span")).classList.add("ripple"),n.style.width=n.style.height=Math.max(e.offsetWidth,e.offsetHeight)+"px",e.appendChild(n),n.style.left=t.offsetX-n.offsetWidth/2+"px",n.style.top=t.offsetY-n.offsetHeight/2+"px",n.classList.add("ripple"),setTimeout((function(){n.parentElement.removeChild(n)}),600)}),!1)}}({tooltip:!0,popover:!0,toasts:!0}),function(t){console.log(t)}(s()),function(){scrollTo=function(t){window.scroll({behavior:"smooth",left:0,top:t.offsetTop})};var t=document.querySelector("header"),e=document.querySelector("main"),n=document.querySelector("footer"),i=document.querySelector("#btn-map"),r=document.querySelector("#section-map");document.getElementById("anchorHeader").addEventListener("click",(function(e){e.preventDefault(),scrollTo(t)})),document.getElementById("anchorFooter").addEventListener("click",(function(t){t.preventDefault(),scrollTo(n)})),document.getElementById("anchorMain").addEventListener("click",(function(t){t.preventDefault(),scrollTo(e)})),i&&i.addEventListener("click",(function(t){console.log(t),t.preventDefault(),scrollTo(r)}))}(),t=function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Rb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rb(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(document.getElementsByTagName("*"));try{for(e.s();!(t=e.n()).done;)t.value.classList.add("fnc-acessibility")}catch(t){e.e(t)}finally{e.f()}},e=function(t){var e=window.getComputedStyle(t,null).getPropertyValue("font-size");return parseFloat(e)},n=function(t,n,i){for(var r=0;r<t.length;r++){var s=t[r],o=0;i?(s.style.fontSize="",Db("font-size",s.style.fontSize="")):(o=n?e(s)+.5:e(s)-.5,s.style.fontSize=o.toString()+"px",Db("font-size",s.style.fontSize=o.toString()+"px"))}},i=document.getElementsByClassName("fnc-acessibility"),r=document.querySelectorAll(".increase-font"),o=document.querySelectorAll(".decrease-font"),a=document.querySelectorAll(".normal-font"),window.addEventListener("load",(function(){for(var e=0;e<r.length;e++)r[e].addEventListener("click",(function(e){e.preventDefault(),t(),n(i,!0)}));for(var s=0;s<a.length;s++)a[s].addEventListener("click",(function(e){e.preventDefault(),t(),n(i,null,!0)}));for(var c=0;c<o.length;c++)o[c].addEventListener("click",(function(e){e.preventDefault(),t(),n(i,!1)}))})),c=window.location.pathname.split("/"),l=document.querySelector(".nav-contact"),u=document.querySelector(".nav-analytic"),h=document.querySelector(".nav-policy"),d=document.querySelector(".nav-about"),f=document.querySelector(".nav-home"),""==c[1]&&f.classList.add("text-success"),"sobre"==c[1]&&d.classList.add("text-success"),"politica-monitoramento"==c[1]&&h.classList.add("text-success"),"analise-data"==c[1]&&u.classList.add("text-success"),"fale-conosco"==c[1]&&l.classList.add("text-success"),function(){var t={storage:"contrastState",cssClass:"contrast",currentState:null,check:function(){this.updateView()},getState:function(){return"true"===localStorage.getItem(this.storage)},setState:function(t){localStorage.setItem(this.storage,""+t),this.currentState=t,this.updateView()},toogle:function(){this.setState(!this.currentState)},updateView:function(){var t=document.body;null===this.currentState&&(this.currentState=this.getState()),this.currentState?t.classList.add(this.cssClass):t.classList.remove(this.cssClass)}};window.toggleContrast=function(){t.toogle()},t.check();for(var e=document.querySelectorAll(".altoContraste"),n=0;n<e.length;n++)e[n].addEventListener("click",toggleContrast)}();var p=window.matchMedia("(max-width: 768px)");Ip(p),p.addListener(Ip)}))},148:function(t,e,n){var i,r,s;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}s=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function a(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return r(e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},f=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.init(n,i)}return i(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||d,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,i){return i&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,h(h({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}}]),t}(),p=new f,m=function(){function t(){e(this,t),this.observers={}}return i(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.observers[t]&&[].concat(this.observers[t]).forEach((function(t){t.apply(void 0,n)})),this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(e){e.apply(e,[t].concat(n))}))}}]),t}();function g(){var t,e,n=new Promise((function(n,i){t=n,e=i}));return n.resolve=t,n.reject=e,n}function v(t){return null==t?"":""+t}function y(t,e,n){function i(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function r(){return!t||"string"==typeof t}for(var s="string"!=typeof e?[].concat(e):e.split(".");s.length>1;){if(r())return{};var o=i(s.shift());!t[o]&&n&&(t[o]=new n),t=Object.prototype.hasOwnProperty.call(t,o)?t[o]:{}}return r()?{}:{obj:t,k:i(s.shift())}}function _(t,e,n){var i=y(t,e,Object);i.obj[i.k]=n}function b(t,e){var n=y(t,e),i=n.obj,r=n.k;if(i)return i[r]}function w(t,e,n){var i=b(t,n);return void 0!==i?i:b(e,n)}function x(t,e,n){for(var i in e)"__proto__"!==i&&"constructor"!==i&&(i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof e[i]||e[i]instanceof String?n&&(t[i]=e[i]):x(t[i],e[i],n):t[i]=e[i]);return t}function T(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function S(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return E[t]})):t}var k="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,C=[" ",",","?","!",";"];function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(t){if(t[e])return t[e];for(var i=e.split(n),r=t,s=0;s<i.length;++s){if(!r)return;if("string"==typeof r[i[s]]&&s+1<i.length)return;if(void 0===r[i[s]]){for(var o=2,a=i.slice(s,s+o).join(n),c=r[a];void 0===c&&i.length>s+o;)o++,c=r[a=i.slice(s,s+o).join(n)];if(void 0===c)return;if(null===c)return null;if(e.endsWith(a)){if("string"==typeof c)return c;if(a&&"string"==typeof c[a])return c[a]}var l=i.slice(s+o).join(n);return l?L(c,l,n):void 0}r=r[i[s]]}return r}}var O=function(t){o(u,t);var n,s,l=(n=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(s){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return a(this,t)});function u(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return e(this,u),n=l.call(this),k&&m.call(r(n)),n.data=t||{},n.options=i,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return i(u,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,s=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[t,e];n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(r?n.split(r):n)),t.indexOf(".")>-1&&(o=t.split("."));var a=b(this.data,o);return a||!s||"string"!=typeof n?a:L(this.data&&this.data[t]&&this.data[t][e],n,r)}},{key:"addResource",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},s=this.options.keySeparator;void 0===s&&(s=".");var o=[t,e];n&&(o=o.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(i=e,e=(o=t.split("."))[1]),this.addNamespaces(e),_(this.data,o,i),r.silent||this.emit("added",t,e,n,i)}},{key:"addResources",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(t,e,r,n[r],{silent:!0});i.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[t,e];t.indexOf(".")>-1&&(i=n,n=e,e=(o=t.split("."))[1]),this.addNamespaces(e);var a=b(this.data,o)||{};i?x(a,n,r):a=A(A({},a),n),_(this.data,o,a),s.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?A(A({},{}),this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"hasLanguageSomeTranslations",value:function(t){var e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find((function(t){return e[t]&&Object.keys(e[t]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),u}(m),P={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,i,r){var s=this;return t.forEach((function(t){s.processors[t]&&(e=s.processors[t].process(e,n,i,r))})),e}};function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R={},M=function(n){o(h,n);var s,l,u=(s=h,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(s);if(l){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function h(t){var n,i,s,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,h),n=u.call(this),k&&m.call(r(n)),i=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s=t,o=r(n),i.forEach((function(t){s[t]&&(o[t]=s[t])})),n.options=a,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=p.create("translator"),n}return i(h,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==t)return!1;var n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,r=e.ns||this.options.defaultNS||[],s=n&&t.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||function(t,e,n){e=e||"",n=n||"";var i=C.filter((function(t){return e.indexOf(t)<0&&n.indexOf(t)<0}));if(0===i.length)return!0;var r=new RegExp("(".concat(i.map((function(t){return"?"===t?"\\?":t})).join("|"),")")),s=!r.test(t);if(!s){var o=t.indexOf(n);o>0&&!r.test(t.substring(0,o))&&(s=!0)}return s}(t,n,i));if(s&&!o){var a=t.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:t,namespaces:r};var c=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(c[0])>-1)&&(r=c.shift()),t=c.join(i)}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}}},{key:"translate",value:function(e,n,i){var r=this;if("object"!==t(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var s=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],n),c=a.key,l=a.namespaces,u=l[l.length-1],d=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(f){var p=n.nsSeparator||this.options.nsSeparator;return s?(m.res="".concat(u).concat(p).concat(c),m):"".concat(u).concat(p).concat(c)}return s?(m.res=c,m):c}var m=this.resolve(e,n),g=m&&m.res,v=m&&m.usedKey||c,y=m&&m.exactUsedKey||c,_=Object.prototype.toString.apply(g),b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject;if(w&&g&&"string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g&&["[object Number]","[object Function]","[object RegExp]"].indexOf(_)<0&&("string"!=typeof b||"[object Array]"!==_)){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,g,D(D({},n),{},{ns:l})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return s?(m.res=x,m):x}if(o){var T="[object Array]"===_,E=T?[]:{},S=T?y:v;for(var k in g)if(Object.prototype.hasOwnProperty.call(g,k)){var C="".concat(S).concat(o).concat(k);E[k]=this.translate(C,D(D({},n),{joinArrays:!1,ns:l})),E[k]===C&&(E[k]=g[k])}g=E}}else if(w&&"string"==typeof b&&"[object Array]"===_)(g=g.join(b))&&(g=this.extendTranslation(g,e,n,i));else{var I=!1,A=!1,L=void 0!==n.count&&"string"!=typeof n.count,O=h.hasDefaultValue(n),P=L?this.pluralResolver.getSuffix(d,n.count,n):"",N=n["defaultValue".concat(P)]||n.defaultValue;!this.isValidLookup(g)&&O&&(I=!0,g=N),this.isValidLookup(g)||(A=!0,g=c);var R=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&A?void 0:g,M=O&&N!==g&&this.options.updateMissing;if(A||I||M){if(this.logger.log(M?"updateKey":"missingKey",d,u,c,M?N:g),o){var j=this.resolve(c,D(D({},n),{},{keySeparator:!1}));j&&j.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var F=[],z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&z&&z[0])for(var B=0;B<z.length;B++)F.push(z[B]);else"all"===this.options.saveMissingTo?F=this.languageUtils.toResolveHierarchy(n.lng||this.language):F.push(n.lng||this.language);var U=function(t,e,i){var s=O&&i!==g?i:R;r.options.missingKeyHandler?r.options.missingKeyHandler(t,u,e,s,M,n):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(t,u,e,s,M,n),r.emit("missingKey",t,u,e,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?F.forEach((function(t){r.pluralResolver.getSuffixes(t,n).forEach((function(e){U([t],c+e,n["defaultValue".concat(e)]||N)}))})):U(F,c,N))}g=this.extendTranslation(g,e,n,m,i),A&&g===c&&this.options.appendNamespaceToMissingKey&&(g="".concat(u,":").concat(c)),(A||I)&&this.options.parseMissingKeyHandler&&(g="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(u,":").concat(c):c,I?g:void 0):this.options.parseMissingKeyHandler(g))}return s?(m.res=g,m):g}},{key:"extendTranslation",value:function(t,e,n,i,r){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,D(D({},this.options.interpolation.defaultVariables),n),i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(D(D({},n),{interpolation:D(D({},this.options.interpolation),n.interpolation)}));var o,a="string"==typeof t&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var c=t.match(this.interpolator.nestingRegexp);o=c&&c.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=D(D({},this.options.interpolation.defaultVariables),l)),t=this.interpolator.interpolate(t,l,n.lng||this.language,n),a){var u=t.match(this.interpolator.nestingRegexp);o<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r&&r[0]===i[0]&&!n.context?(s.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(e[0])),null):s.translate.apply(s,i.concat([e]))}),n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,d="string"==typeof h?[h]:h;return null!=t&&d&&d.length&&!1!==n.applyPostProcessor&&(t=P.handle(d,t,e,this.options&&this.options.postProcessPassResolved?D({i18nResolved:i},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,i,r,s,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!o.isValidLookup(e)){var c=o.extractFromKey(t,a),l=c.key;n=l;var u=c.namespaces;o.options.fallbackNS&&(u=u.concat(o.options.fallbackNS));var h=void 0!==a.count&&"string"!=typeof a.count,d=h&&!a.ordinal&&0===a.count&&o.pluralResolver.shouldUseIntlApi(),f=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,p=a.lngs?a.lngs:o.languageUtils.toResolveHierarchy(a.lng||o.language,a.fallbackLng);u.forEach((function(t){o.isValidLookup(e)||(s=t,!R["".concat(p[0],"-").concat(t)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(s)&&(R["".concat(p[0],"-").concat(t)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((function(n){if(!o.isValidLookup(e)){r=n;var s,c=[l];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(c,l,n,t,a);else{var u;h&&(u=o.pluralResolver.getSuffix(n,a.count,a));var p="".concat(o.options.pluralSeparator,"zero");if(h&&(c.push(l+u),d&&c.push(l+p)),f){var m="".concat(l).concat(o.options.contextSeparator).concat(a.context);c.push(m),h&&(c.push(m+u),d&&c.push(m+p))}}for(;s=c.pop();)o.isValidLookup(e)||(i=s,e=o.getResource(n,t,s,a))}})))}))}})),{res:e,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:s}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,i):this.resourceStore.getResource(t,e,n,i)}}],[{key:"hasDefaultValue",value:function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&"defaultValue"===e.substring(0,12)&&void 0!==t[e])return!0;return!1}}]),h}(m);function j(t){return t.charAt(0).toUpperCase()+t.slice(1)}var F=function(){function t(n){e(this,t),this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=p.create("languageUtils")}return i(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=j(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=j(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=j(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach((function(t){if(!e){var i=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(i)||(e=i)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var i=n.getLanguagePartFromCode(t);if(n.isSupportedCode(i))return e=i;e=n.options.supportedLngs.find((function(t){if(0===t.indexOf(i))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,i=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],s=function(t){t&&(n.isSupportedCode(t)?r.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(t))):"string"==typeof t&&s(this.formatLanguageCode(t)),i.forEach((function(t){r.indexOf(t)<0&&s(n.formatLanguageCode(t))})),r}}]),t}(),z=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],B={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}},U=["v1","v2","v3"],V={zero:0,one:1,two:2,few:3,many:4,other:5},q=function(){function t(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.languageUtils=n,this.options=r,this.logger=p.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(i={},z.forEach((function(t){t.lngs.forEach((function(e){i[e]={numbers:t.nr,plurals:B[t.fc]}}))})),i)}return i(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:e.ordinal?"ordinal":"cardinal"})}catch(t){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(t,n).map((function(t){return"".concat(e).concat(t)}))}},{key:"getSuffixes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(t,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((function(t,e){return V[t]-V[e]})).map((function(t){return"".concat(e.options.prepend).concat(t)})):i.numbers.map((function(i){return e.getSuffix(t,i,n)})):[]}},{key:"getSuffix",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getRule(t,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(e)):this.getSuffixRetroCompatible(i,e):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,e){var n=this,i=t.noAbs?t.plurals(e):t.plurals(Math.abs(e)),r=t.numbers[i];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var s=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!U.includes(this.options.compatibilityJSON)}}]),t}();function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var W=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.logger=p.create("interpolator"),this.options=n,this.format=n.interpolation&&n.interpolation.format||function(t){return t},this.init(n)}return i(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:S,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?T(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?T(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?T(e.nestingPrefix):e.nestingPrefixEscaped||T("$t("),this.nestingSuffix=e.nestingSuffix?T(e.nestingSuffix):e.nestingSuffixEscaped||T(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,i){var r,s,o,a=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(t){return t.replace(/\$/g,"$$$$")}var u=function(t){if(t.indexOf(a.formatSeparator)<0){var r=w(e,c,t);return a.alwaysFormat?a.format(r,void 0,n,$($($({},i),e),{},{interpolationkey:t})):r}var s=t.split(a.formatSeparator),o=s.shift().trim(),l=s.join(a.formatSeparator).trim();return a.format(w(e,c,o),l,n,$($($({},i),e),{},{interpolationkey:o}))};this.resetRegExp();var h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return l(t)}},{regex:this.regexp,safeValue:function(t){return a.escapeValue?l(a.escape(t)):l(t)}}].forEach((function(e){for(o=0;r=e.regex.exec(t);){var n=r[1].trim();if(void 0===(s=u(n)))if("function"==typeof h){var c=h(t,r,i);s="string"==typeof c?c:""}else if(i&&i.hasOwnProperty(n))s="";else{if(d){s=r[0];continue}a.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(t)),s=""}else"string"==typeof s||a.useRawValueToEscape||(s=v(s));var l=e.safeValue(s);if(t=t.replace(r[0],l),d?(e.regex.lastIndex+=s.length,e.regex.lastIndex-=r[0].length):e.regex.lastIndex=0,++o>=a.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var n,i,r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=$({},s);function a(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var i=t.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(i[1]);t=i[0],r=(r=this.interpolate(r,o)).replace(/'/g,'"');try{o=JSON.parse(r),e&&(o=$($({},e),o))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(r)}return delete o.defaultValue,t}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(t);){var c=[],l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(t){return t.trim()}));n[1]=u.shift(),c=u,l=!0}if((i=e(a.call(this,n[1].trim(),o),o))&&n[0]===t&&"string"!=typeof i)return i;"string"!=typeof i&&(i=v(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),i=""),l&&(i=c.reduce((function(t,e){return r.format(t,e,s.lng,$($({},s),{},{interpolationkey:n[1].trim()}))}),i.trim())),t=t.replace(n[0],i),this.regexp.lastIndex=0}return t}}]),t}();function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.logger=p.create("formatter"),this.options=n,this.formats={number:function(t,e,n){return new Intl.NumberFormat(e,n).format(t)},currency:function(t,e,n){return new Intl.NumberFormat(e,G(G({},n),{},{style:"currency"})).format(t)},datetime:function(t,e,n){return new Intl.DateTimeFormat(e,G({},n)).format(t)},relativetime:function(t,e,n){return new Intl.RelativeTimeFormat(e,G({},n)).format(t,n.range||"day")},list:function(t,e,n){return new Intl.ListFormat(e,G({},n)).format(t)}},this.init(n)}return i(t,[{key:"init",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||","}},{key:"add",value:function(t,e){this.formats[t.toLowerCase().trim()]=e}},{key:"format",value:function(t,e,n,i){var r=this;return e.split(this.formatSeparator).reduce((function(t,e){var s=function(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var i=t.split("(");e=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);"currency"===e&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===e&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((function(t){if(t){var e=function(t){if(Array.isArray(t))return t}(s=t.split(":"))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(s)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=e[0],r=e.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[i.trim()]||(n[i.trim()]=r),"false"===r&&(n[i.trim()]=!1),"true"===r&&(n[i.trim()]=!0),isNaN(r)||(n[i.trim()]=parseInt(r,10))}var s}))}return{formatName:e,formatOptions:n}}(e),o=s.formatName,a=s.formatOptions;if(r.formats[o]){var c=t;try{var l=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},u=l.locale||l.lng||i.locale||i.lng||n;c=r.formats[o](t,u,G(G(G({},a),i),l))}catch(t){r.logger.warn(t)}return c}return r.logger.warn("there was no format function for ".concat(o)),t}),t)}}]),t}();function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var J=function(t){o(u,t);var n,s,l=(n=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(s){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return a(this,t)});function u(t,n,i){var s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e(this,u),s=l.call(this),k&&m.call(r(s)),s.backend=t,s.store=n,s.services=i,s.languageUtils=i.languageUtils,s.options=o,s.logger=p.create("backendConnector"),s.waitingReads=[],s.maxParallelReads=o.maxParallelReads||10,s.readingCalls=0,s.maxRetries=o.maxRetries>=0?o.maxRetries:5,s.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,s.state={},s.queue=[],s.backend&&s.backend.init&&s.backend.init(i,o.backend,o),s}return i(u,[{key:"queueLoad",value:function(t,e,n,i){var r=this,s={},o={},a={},c={};return t.forEach((function(t){var i=!0;e.forEach((function(e){var a="".concat(t,"|").concat(e);!n.reload&&r.store.hasResourceBundle(t,e)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?void 0===o[a]&&(o[a]=!0):(r.state[a]=1,i=!1,void 0===o[a]&&(o[a]=!0),void 0===s[a]&&(s[a]=!0),void 0===c[e]&&(c[e]=!0)))})),i||(a[t]=!0)})),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}},{key:"loaded",value:function(t,e,n){var i=t.split("|"),r=i[0],s=i[1];e&&this.emit("failedLoading",r,s,e),n&&this.store.addResourceBundle(r,s,n),this.state[t]=e?-1:2;var o={};this.queue.forEach((function(n){var i,a,c,l,u;i=n.loaded,a=s,(l=(c=y(i,[r],Object)).obj)[u=c.k]=l[u]||[],l[u].push(a),function(t,e){void 0!==t.pending[e]&&(delete t.pending[e],t.pendingCount--)}(n,t),e&&n.errors.push(e),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(t){o[t]||(o[t]={});var e=n.loaded[t];e.length&&e.forEach((function(e){void 0===o[t][e]&&(o[t][e]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;return t.length?this.readingCalls>=this.maxParallelReads?void this.waitingReads.push({lng:t,ns:e,fcName:n,tried:r,wait:s,callback:o}):(this.readingCalls++,this.backend[n](t,e,(function(a,c){if(i.readingCalls--,i.waitingReads.length>0){var l=i.waitingReads.shift();i.read(l.lng,l.ns,l.fcName,l.tried,l.wait,l.callback)}a&&c&&r<i.maxRetries?setTimeout((function(){i.read.call(i,t,e,n,r+1,2*s,o)}),s):o(a,c)}))):o(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var s=this.queueLoad(t,e,i,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("|"),r=i[0],s=i[1];this.read(r,s,"read",void 0,void 0,(function(i,o){i&&e.logger.warn("".concat(n,"loading namespace ").concat(s," for language ").concat(r," failed"),i),!i&&o&&e.logger.log("".concat(n,"loaded namespace ").concat(s," for language ").concat(r),o),e.loaded(t,i,o)}))}},{key:"saveMissing",value:function(t,e,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,i,null,Q(Q({},s),{},{isUpdate:r})),t&&t[0]&&this.store.addResource(t[0],e,n,i))}}]),u}(m);function tt(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function it(){}var rt=function(n){o(h,n);var s,l,u=(s=h,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(s);if(l){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function h(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(e(this,h),t=u.call(this),k&&m.call(r(t)),t.options=tt(i),t.services={},t.logger=p,t.modules={external:[]},n=r(t),Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((function(t){"function"==typeof n[t]&&(n[t]=n[t].bind(n))})),s&&!t.isInitialized&&!i.isClone){if(!t.options.initImmediate)return t.init(i,s),a(t,r(t));setTimeout((function(){t.init(i,s)}),0)}return t}return i(h,[{key:"init",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;"function"==typeof n&&(i=n,n={}),!n.defaultNS&&!1!==n.defaultNS&&n.ns&&("string"==typeof n.ns?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));var r={debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if("object"===t(e[1])&&(n=e[1]),"string"==typeof e[1]&&(n.defaultValue=e[1]),"string"==typeof e[2]&&(n.tDescription=e[2]),"object"===t(e[2])||"object"===t(e[3])){var i=e[3]||e[2];Object.keys(i).forEach((function(t){n[t]=i[t]}))}return n},interpolation:{escapeValue:!0,format:function(t,e,n,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}};function s(t){return t?"function"==typeof t?new t:t:null}if(this.options=nt(nt(nt({},r),this.options),tt(n)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=nt(nt({},r.interpolation),this.options.interpolation)),void 0!==n.keySeparator&&(this.options.userDefinedKeySeparator=n.keySeparator),void 0!==n.nsSeparator&&(this.options.userDefinedNsSeparator=n.nsSeparator),!this.options.isClone){var o;this.modules.logger?p.init(s(this.modules.logger),this.options):p.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=X);var a=new F(this.options);this.store=new O(this.options.resources,this.options);var c=this.services;c.logger=p,c.resourceStore=this.store,c.languageUtils=a,c.pluralResolver=new q(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(c.formatter=s(o),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new W(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new J(s(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(c.languageDetector=s(this.modules.languageDetector),c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=s(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new M(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,i||(i=it),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=g(),h=function(){var t=function(t,n){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(n),i(t,n)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),u}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,i="string"==typeof t?t:this.language;if("function"==typeof t&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return n();var r=[],s=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){r.indexOf(t)<0&&r.push(t)}))};i?s(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(t){return s(t)})),this.options.preload&&this.options.preload.forEach((function(t){return s(t)})),this.services.backendConnector.load(r,this.options.ns,(function(t){t||e.resolvedLanguage||!e.language||e.setResolvedLanguage(e.language),n(t)}))}else n(null)}},{key:"reloadResources",value:function(t,e,n){var i=g();return t||(t=this.languages),e||(e=this.options.ns),n||(n=it),this.services.backendConnector.reload(t,e,(function(t){i.resolve(),n(t)})),i}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&P.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"setResolvedLanguage",value:function(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(var e=0;e<this.languages.length;e++){var n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var i=g();this.emit("languageChanging",t);var r=function(t){n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.resolvedLanguage=void 0,n.setResolvedLanguage(t)},s=function(s){t||s||!n.services.languageDetector||(s=[]);var o="string"==typeof s?s:n.services.languageUtils.getBestMatchFromCodes(s);o&&(n.language||r(o),n.translator.language||n.translator.changeLanguage(o),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(o)),n.loadResources(o,(function(t){!function(t,s){s?(r(s),n.translator.changeLanguage(s),n.isLanguageChangingTo=void 0,n.emit("languageChanged",s),n.logger.log("languageChanged",s)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(t,o)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(s):s(t):s(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,n,i){var r=this,s=function e(n,s){var o;if("object"!==t(s)){for(var a=arguments.length,c=new Array(a>2?a-2:0),l=2;l<a;l++)c[l-2]=arguments[l];o=r.options.overloadTranslationOptionHandler([n,s].concat(c))}else o=nt({},s);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns,o.keyPrefix=o.keyPrefix||i||e.keyPrefix;var u=r.options.keySeparator||".",h=o.keyPrefix?"".concat(o.keyPrefix).concat(u).concat(n):n;return r.t(h,o)};return"string"==typeof e?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=i,s}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var o=function(t,n){var i=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,o);if(void 0!==a)return a}return!(!this.hasResourceBundle(i,t)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!o(i,t)||r&&!o(s,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,i=g();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){i.resolve(),e&&e(t)})),i):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=g();"string"==typeof t&&(t=[t]);var i=this.options.preload||[],r=t.filter((function(t){return i.indexOf(t)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr":"rtl"}},{key:"cloneInstance",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,i=nt(nt(nt({},this.options),e),{isClone:!0}),r=new h(i);return["store","services","language"].forEach((function(e){r[e]=t[e]})),r.services=nt({},this.services),r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r.translator=new M(r.services,r.options),r.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r.emit.apply(r,[t].concat(n))})),r.init(i,n),r.translator.options=r.options,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),h}(m);l(rt,"createInstance",(function(){return new rt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}));var st=rt.createInstance();return st.createInstance=rt.createInstance,st},"object"===o(e)?t.exports=s():void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r)},851:function(t,e,n){var i,r,s;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}s=function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var e=[],n=e.forEach,i=e.slice,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,s={name:"cookie",lookup:function(t){var e;if(t.lookupCookie&&"undefined"!=typeof document){var n=function(t){for(var e="".concat(t,"="),n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null}(t.lookupCookie);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupCookie&&"undefined"!=typeof document&&function(t,e,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+60*n*1e3)),i&&(s.domain=i),document.cookie=function(t,e,n){var i=n||{};i.path=i.path||"/";var s=encodeURIComponent(e),o="".concat(t,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!r.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!r.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}(t,encodeURIComponent(e),s)}(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain,e.cookieOptions)}},o={name:"querystring",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=n.substring(1).split("&"),r=0;r<i.length;r++){var s=i[r].indexOf("=");s>0&&i[r].substring(0,s)===t.lookupQuerystring&&(e=i[r].substring(s+1))}}return e}},a=null,c=function(){if(null!==a)return a;try{a="undefined"!==window&&null!==window.localStorage;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch(t){a=!1}return a},l={name:"localStorage",lookup:function(t){var e;if(t.lookupLocalStorage&&c()){var n=window.localStorage.getItem(t.lookupLocalStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupLocalStorage&&c()&&window.localStorage.setItem(e.lookupLocalStorage,t)}},u=null,h=function(){if(null!==u)return u;try{u="undefined"!==window&&null!==window.sessionStorage;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch(t){u=!1}return u},d={name:"sessionStorage",lookup:function(t){var e;if(t.lookupSessionStorage&&h()){var n=window.sessionStorage.getItem(t.lookupSessionStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupSessionStorage&&h()&&window.sessionStorage.setItem(e.lookupSessionStorage,t)}},f={name:"navigator",lookup:function(t){var e=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)e.push(navigator.languages[n]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return e.length>0?e:void 0}},p={name:"htmlTag",lookup:function(t){var e,n=t.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(e=n.getAttribute("lang")),e}},m={name:"path",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof t.lookupFromPathIndex){if("string"!=typeof n[t.lookupFromPathIndex])return;e=n[t.lookupFromPathIndex].replace("/","")}else e=n[0].replace("/","")}return e}},g={name:"subdomain",lookup:function(t){var e="number"==typeof t.lookupFromSubdomainIndex?t.lookupFromSubdomainIndex+1:1,n="undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[e]}},v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}var r,a;return r=e,a=[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=function(t){return n.call(i.call(arguments,1),(function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])})),t}(e,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(s),this.addDetector(o),this.addDetector(l),this.addDetector(d),this.addDetector(f),this.addDetector(p),this.addDetector(m),this.addDetector(g)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var e=this;t||(t=this.options.order);var n=[];return t.forEach((function(t){if(e.detectors[t]){var i=e.detectors[t].lookup(e.options);i&&"string"==typeof i&&(i=[i]),i&&(n=n.concat(i))}})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(t,e){var n=this;e||(e=this.options.caches),e&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||e.forEach((function(e){n.detectors[e]&&n.detectors[e].cacheUserLanguage(t,n.options)})))}}],a&&t(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),e}();return v.type="languageDetector",v},"object"===o(e)?t.exports=s():void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r)},984:function(t,e,n){var i,r,s;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}s=function(){"use strict";var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},e={tName:"t",i18nName:"i18n",handleName:"localize",selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0},n={init:function(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function s(e,i,s){if(0!==i.length){var o="text";if(0===i.indexOf("[")){var a=i.split("]");i=a[1],o=a[0].substr(1,a[0].length-1)}if(i.indexOf(";")===i.length-1&&(i=i.substr(0,i.length-2)),"html"===o)e.html(n.t(i,u(s,e.html())));else if("text"===o)e.text(n.t(i,u(s,e.text())));else if("prepend"===o)e.prepend(n.t(i,u(s,e.html())));else if("append"===o)e.append(n.t(i,u(s,e.html())));else if(0===o.indexOf("data-")){var c=o.substr(5),l=n.t(i,u(s,e.data(c)));e.data(c,l),e.attr(o,l)}else e.attr(o,n.t(i,u(s,e.attr(o))))}function u(e,n){return r.parseDefaultValueFromContent?t({},e,{defaultValue:n}):e}}function o(e,n){var o=e.attr(r.selectorAttr);if(o||void 0===o||!1===o||(o=e.text()||e.val()),o){var a=e,c=e.data(r.targetAttr);if(c&&(a=e.find(c)||e),n||!0!==r.useOptionsAttr||(n=e.data(r.optionsAttr)),n=n||{},o.indexOf(";")>=0){var l=o.split(";");i.each(l,(function(t,e){""!==e&&s(a,e.trim(),n)}))}else s(a,o,n);if(!0===r.useOptionsAttr){var u={};delete(u=t({clone:u},n)).lng,e.data(r.optionsAttr,u)}}}r=t({},e,r),i[r.tName]=n.t.bind(n),i[r.i18nName]=n,i.fn[r.handleName]=function(t){return this.each((function(){o(i(this),t),i(this).find("["+r.selectorAttr+"]").each((function(){o(i(this),t)}))}))}}};return n},"object"===o(e)?t.exports=s():void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r)},563:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,c=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},l=s.push,u=s.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,m=p.call(Object),g={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},_=i.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var i,r,s=(n=n||_).createElement("script");if(s.text=t,e)for(i in b)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var T="3.7.0",E=/HTML$/i,S=function(t,e){return new S.fn.init(t,e)};function k(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!v(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function C(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}S.fn=S.prototype={jquery:T,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(t){return this.pushStack(S.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:s.sort,splice:s.splice},S.extend=S.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||v(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(l&&i&&(S.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[e],s=r&&!Array.isArray(n)?[]:r||S.isPlainObject(n)?n:{},r=!1,o[e]=S.extend(l,s,i)):void 0!==i&&(o[e]=i));return o},S.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t)||(e=o(t))&&("function"!=typeof(n=f.call(e,"constructor")&&e.constructor)||p.call(n)!==m))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(k(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},text:function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r)return t.textContent;if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=S.text(e);return n},makeArray:function(t,e){var n=e||[];return null!=t&&(k(Object(t))?S.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!E.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,o=[];if(k(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&o.push(r);return c(o)},guid:1,support:g}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=s[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var I=s.pop,A=s.sort,L=s.splice,O="[\\x20\\t\\r\\n\\f]",P=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");S.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var N=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function D(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}S.escapeSelector=function(t){return(t+"").replace(N,D)};var R=_,M=l;!function(){var t,e,n,r,o,c,l,h,d,p,m=M,v=S.expando,y=0,_=0,b=tt(),w=tt(),x=tt(),T=tt(),E=function(t,e){return t===e&&(o=!0),0},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",D="\\["+O+"*("+N+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+O+"*\\]",j=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",F=new RegExp(O+"+","g"),z=new RegExp("^"+O+"*,"+O+"*"),B=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),U=new RegExp(O+"|>"),V=new RegExp(j),q=new RegExp("^"+N+"$"),H={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,G=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),X=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Y=function(){ct()},Q=dt((function(t){return!0===t.disabled&&C(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(s=a.call(R.childNodes),R.childNodes),s[R.childNodes.length].nodeType}catch(t){m={apply:function(t,e){M.apply(t,a.call(e))},call:function(t){M.apply(t,a.call(arguments,1))}}}function J(t,e,n,i){var r,s,o,a,l,u,f,p=e&&e.ownerDocument,y=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==y&&9!==y&&11!==y)return n;if(!i&&(ct(e),e=e||c,h)){if(11!==y&&(l=Z.exec(t)))if(r=l[1]){if(9===y){if(!(o=e.getElementById(r)))return n;if(o.id===r)return m.call(n,o),n}else if(p&&(o=p.getElementById(r))&&J.contains(e,o)&&o.id===r)return m.call(n,o),n}else{if(l[2])return m.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&e.getElementsByClassName)return m.apply(n,e.getElementsByClassName(r)),n}if(!(T[t+" "]||d&&d.test(t))){if(f=t,p=e,1===y&&(U.test(t)||B.test(t))){for((p=K.test(t)&&at(e.parentNode)||e)==e&&g.scope||((a=e.getAttribute("id"))?a=S.escapeSelector(a):e.setAttribute("id",a=v)),s=(u=ut(t)).length;s--;)u[s]=(a?"#"+a:":scope")+" "+ht(u[s]);f=u.join(",")}try{return m.apply(n,p.querySelectorAll(f)),n}catch(e){T(t,!0)}finally{a===v&&e.removeAttribute("id")}}}return yt(t.replace(P,"$1"),e,n,i)}function tt(){var t=[];return function n(i,r){return t.push(i+" ")>e.cacheLength&&delete n[t.shift()],n[i+" "]=r}}function et(t){return t[v]=!0,t}function nt(t){var e=c.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function it(t){return function(e){return C(e,"input")&&e.type===t}}function rt(t){return function(e){return(C(e,"input")||C(e,"button"))&&e.type===t}}function st(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Q(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ot(t){return et((function(e){return e=+e,et((function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function ct(t){var n,i=t?t.ownerDocument||t:R;return i!=c&&9===i.nodeType&&i.documentElement?(l=(c=i).documentElement,h=!S.isXMLDoc(c),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,R!=c&&(n=c.defaultView)&&n.top!==n&&n.addEventListener("unload",Y),g.getById=nt((function(t){return l.appendChild(t).id=S.expando,!c.getElementsByName||!c.getElementsByName(S.expando).length})),g.disconnectedMatch=nt((function(t){return p.call(t,"*")})),g.scope=nt((function(){return c.querySelectorAll(":scope")})),g.cssHas=nt((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),g.getById?(e.filter.ID=function(t){var e=t.replace(G,X);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(G,X);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&h)return e.getElementsByClassName(t)},d=[],nt((function(t){var e;l.appendChild(t).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||d.push("\\["+O+"*(?:value|"+k+")"),t.querySelectorAll("[id~="+v+"-]").length||d.push("~="),t.querySelectorAll("a#"+v+"+*").length||d.push(".#.+[+~]"),t.querySelectorAll(":checked").length||d.push(":checked"),(e=c.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),l.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(e=c.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||d.push("\\["+O+"*name"+O+"*="+O+"*(?:''|\"\")")})),g.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),E=function(t,e){if(t===e)return o=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===n?t===c||t.ownerDocument==R&&J.contains(R,t)?-1:e===c||e.ownerDocument==R&&J.contains(R,e)?1:r?u.call(r,t)-u.call(r,e):0:4&n?-1:1)},c):c}for(t in J.matches=function(t,e){return J(t,null,null,e)},J.matchesSelector=function(t,e){if(ct(t),h&&!T[e+" "]&&(!d||!d.test(e)))try{var n=p.call(t,e);if(n||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){T(e,!0)}return J(e,c,null,[t]).length>0},J.contains=function(t,e){return(t.ownerDocument||t)!=c&&ct(t),S.contains(t,e)},J.attr=function(t,n){(t.ownerDocument||t)!=c&&ct(t);var i=e.attrHandle[n.toLowerCase()],r=i&&f.call(e.attrHandle,n.toLowerCase())?i(t,n,!h):void 0;return void 0!==r?r:t.getAttribute(n)},J.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},S.uniqueSort=function(t){var e,n=[],i=0,s=0;if(o=!g.sortStable,r=!g.sortStable&&a.call(t,0),A.call(t,E),o){for(;e=t[s++];)e===t[s]&&(i=n.push(s));for(;i--;)L.call(t,n[i],1)}return r=null,t},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(a.apply(this)))},e=S.expr={cacheLength:50,createPseudo:et,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(G,X),t[3]=(t[3]||t[4]||t[5]||"").replace(G,X),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||J.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&J.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return H.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=ut(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(G,X).toLowerCase();return"*"===t?function(){return!0}:function(t){return C(t,e)}},CLASS:function(t){var e=b[t+" "];return e||(e=new RegExp("(^|"+O+")"+t+"("+O+"|$)"))&&b(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=J.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(F," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,c){var l,u,h,d,f,p=s!==o?"nextSibling":"previousSibling",m=e.parentNode,g=a&&e.nodeName.toLowerCase(),_=!c&&!a,b=!1;if(m){if(s){for(;p;){for(h=e;h=h[p];)if(a?C(h,g):1===h.nodeType)return!1;f=p="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&_){for(b=(d=(l=(u=m[v]||(m[v]={}))[t]||[])[0]===y&&l[1])&&l[2],h=d&&m.childNodes[d];h=++d&&h&&h[p]||(b=d=0)||f.pop();)if(1===h.nodeType&&++b&&h===e){u[t]=[y,d,b];break}}else if(_&&(b=d=(l=(u=e[v]||(e[v]={}))[t]||[])[0]===y&&l[1]),!1===b)for(;(h=++d&&h&&h[p]||(b=d=0)||f.pop())&&(!(a?C(h,g):1===h.nodeType)||!++b||(_&&((u=h[v]||(h[v]={}))[t]=[y,b]),h!==e)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,n){var i,r=e.pseudos[t]||e.setFilters[t.toLowerCase()]||J.error("unsupported pseudo: "+t);return r[v]?r(n):r.length>1?(i=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var i,s=r(t,n),o=s.length;o--;)t[i=u.call(t,s[o])]=!(e[i]=s[o])})):function(t){return r(t,0,i)}):r}},pseudos:{not:et((function(t){var e=[],n=[],i=vt(t.replace(P,"$1"));return i[v]?et((function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))})):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return J(t,e).length>0}})),contains:et((function(t){return t=t.replace(G,X),function(e){return(e.textContent||S.text(e)).indexOf(t)>-1}})),lang:et((function(t){return q.test(t||"")||J.error("unsupported lang: "+t),t=t.replace(G,X).toLowerCase(),function(e){var n;do{if(n=h?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===l},focus:function(t){return t===function(){try{return c.activeElement}catch(t){}}()&&c.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:st(!1),disabled:st(!0),checked:function(t){return C(t,"input")&&!!t.checked||C(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return W.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){return C(t,"input")&&"button"===t.type||C(t,"button")},text:function(t){var e;return C(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ot((function(){return[0]})),last:ot((function(t,e){return[e-1]})),eq:ot((function(t,e,n){return[n<0?n+e:n]})),even:ot((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:ot((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:ot((function(t,e,n){var i;for(i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:ot((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=it(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=rt(t);function lt(){}function ut(t,n){var i,r,s,o,a,c,l,u=w[t+" "];if(u)return n?0:u.slice(0);for(a=t,c=[],l=e.preFilter;a;){for(o in i&&!(r=z.exec(a))||(r&&(a=a.slice(r[0].length)||a),c.push(s=[])),i=!1,(r=B.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(P," ")}),a=a.slice(i.length)),e.filter)!(r=H[o].exec(a))||l[o]&&!(r=l[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?J.error(t):w(t,c).slice(0)}function ht(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function dt(t,e,n){var i=e.dir,r=e.next,s=r||i,o=n&&"parentNode"===s,a=_++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,c){var l,u,h=[y,a];if(c){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,c))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(u=e[v]||(e[v]={}),r&&C(e,r))e=e[i]||e;else{if((l=u[s])&&l[0]===y&&l[1]===a)return h[2]=l[2];if(u[s]=h,h[2]=t(e,n,c))return!0}return!1}}function ft(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function pt(t,e,n,i,r){for(var s,o=[],a=0,c=t.length,l=null!=e;a<c;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),l&&e.push(a)));return o}function mt(t,e,n,i,r,s){return i&&!i[v]&&(i=mt(i)),r&&!r[v]&&(r=mt(r,s)),et((function(s,o,a,c){var l,h,d,f,p=[],g=[],v=o.length,y=s||function(t,e,n){for(var i=0,r=e.length;i<r;i++)J(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),_=!t||!s&&e?y:pt(y,p,t,a,c);if(n?n(_,f=r||(s?t:v||i)?[]:o,a,c):f=_,i)for(l=pt(f,g),i(l,[],a,c),h=l.length;h--;)(d=l[h])&&(f[g[h]]=!(_[g[h]]=d));if(s){if(r||t){if(r){for(l=[],h=f.length;h--;)(d=f[h])&&l.push(_[h]=d);r(null,f=[],l,c)}for(h=f.length;h--;)(d=f[h])&&(l=r?u.call(s,d):p[h])>-1&&(s[l]=!(o[l]=d))}}else f=pt(f===o?f.splice(v,f.length):f),r?r(null,o,f,c):m.apply(o,f)}))}function gt(t){for(var i,r,s,o=t.length,a=e.relative[t[0].type],c=a||e.relative[" "],l=a?1:0,h=dt((function(t){return t===i}),c,!0),d=dt((function(t){return u.call(i,t)>-1}),c,!0),f=[function(t,e,r){var s=!a&&(r||e!=n)||((i=e).nodeType?h(t,e,r):d(t,e,r));return i=null,s}];l<o;l++)if(r=e.relative[t[l].type])f=[dt(ft(f),r)];else{if((r=e.filter[t[l].type].apply(null,t[l].matches))[v]){for(s=++l;s<o&&!e.relative[t[s].type];s++);return mt(l>1&&ft(f),l>1&&ht(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(P,"$1"),r,l<s&&gt(t.slice(l,s)),s<o&&gt(t=t.slice(s)),s<o&&ht(t))}f.push(r)}return ft(f)}function vt(t,i){var r,s=[],o=[],a=x[t+" "];if(!a){for(i||(i=ut(t)),r=i.length;r--;)(a=gt(i[r]))[v]?s.push(a):o.push(a);a=x(t,function(t,i){var r=i.length>0,s=t.length>0,o=function(o,a,l,u,d){var f,p,g,v=0,_="0",b=o&&[],w=[],x=n,T=o||s&&e.find.TAG("*",d),E=y+=null==x?1:Math.random()||.1,k=T.length;for(d&&(n=a==c||a||d);_!==k&&null!=(f=T[_]);_++){if(s&&f){for(p=0,a||f.ownerDocument==c||(ct(f),l=!h);g=t[p++];)if(g(f,a||c,l)){m.call(u,f);break}d&&(y=E)}r&&((f=!g&&f)&&v--,o&&b.push(f))}if(v+=_,r&&_!==v){for(p=0;g=i[p++];)g(b,w,a,l);if(o){if(v>0)for(;_--;)b[_]||w[_]||(w[_]=I.call(u));w=pt(w)}m.apply(u,w),d&&!o&&w.length>0&&v+i.length>1&&S.uniqueSort(u)}return d&&(y=E,n=x),b};return r?et(o):o}(o,s)),a.selector=t}return a}function yt(t,n,i,r){var s,o,a,c,l,u="function"==typeof t&&t,d=!r&&ut(t=u.selector||t);if(i=i||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===n.nodeType&&h&&e.relative[o[1].type]){if(!(n=(e.find.ID(a.matches[0].replace(G,X),n)||[])[0]))return i;u&&(n=n.parentNode),t=t.slice(o.shift().value.length)}for(s=H.needsContext.test(t)?0:o.length;s--&&(a=o[s],!e.relative[c=a.type]);)if((l=e.find[c])&&(r=l(a.matches[0].replace(G,X),K.test(o[0].type)&&at(n.parentNode)||n))){if(o.splice(s,1),!(t=r.length&&ht(o)))return m.apply(i,r),i;break}}return(u||vt(t,d))(r,n,!h,i,!n||K.test(t)&&at(n.parentNode)||n),i}lt.prototype=e.filters=e.pseudos,e.setFilters=new lt,g.sortStable=v.split("").sort(E).join("")===v,ct(),g.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(c.createElement("fieldset"))})),S.find=J,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,J.compile=vt,J.select=yt,J.setDocument=ct,J.escape=S.escapeSelector,J.getText=S.text,J.isXML=S.isXMLDoc,J.selectors=S.expr,J.support=S.support,J.uniqueSort=S.uniqueSort}();var j=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&S(t).is(n))break;i.push(t)}return i},F=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},z=S.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(t,e,n){return v(e)?S.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?S.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?S.grep(t,(function(t){return u.call(e,t)>-1!==n})):S.filter(e,t,n)}S.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?S.find.matchesSelector(i,t)?[i]:[]:S.find.matches(t,S.grep(e,(function(t){return 1===t.nodeType})))},S.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(S(t).filter((function(){for(e=0;e<i;e++)if(S.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)S.find(t,r[e],n);return i>1?S.uniqueSort(n):n},filter:function(t){return this.pushStack(U(this,t||[],!1))},not:function(t){return this.pushStack(U(this,t||[],!0))},is:function(t){return!!U(this,"string"==typeof t&&z.test(t)?S(t):t||[],!1).length}});var V,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||V,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:q.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof S?e[0]:e,S.merge(this,S.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:_,!0)),B.test(i[1])&&S.isPlainObject(e))for(i in e)v(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=_.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this)}).prototype=S.fn,V=S(_);var H=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};function W(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&S(t);if(!z.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?S.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?u.call(S(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return j(t,"parentNode")},parentsUntil:function(t,e,n){return j(t,"parentNode",n)},next:function(t){return W(t,"nextSibling")},prev:function(t){return W(t,"previousSibling")},nextAll:function(t){return j(t,"nextSibling")},prevAll:function(t){return j(t,"previousSibling")},nextUntil:function(t,e,n){return j(t,"nextSibling",n)},prevUntil:function(t,e,n){return j(t,"previousSibling",n)},siblings:function(t){return F((t.parentNode||{}).firstChild,t)},children:function(t){return F(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(C(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},(function(t,e){S.fn[t]=function(n,i){var r=S.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=S.filter(i,r)),this.length>1&&($[t]||S.uniqueSort(r),H.test(t)&&r.reverse()),this.pushStack(r)}}));var Z=/[^\x20\t\r\n\f]+/g;function K(t){return t}function G(t){throw t}function X(t,e,n,i){var r;try{t&&v(r=t.promise)?r.call(t).done(e).fail(n):t&&v(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return S.each(t.match(Z)||[],(function(t,n){e[n]=!0})),e}(t):S.extend({},t);var e,n,i,r,s=[],o=[],a=-1,c=function(){for(r=r||t.once,i=e=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},l={add:function(){return s&&(n&&!e&&(a=s.length-1,o.push(n)),function e(n){S.each(n,(function(n,i){v(i)?t.unique&&l.has(i)||s.push(i):i&&i.length&&"string"!==x(i)&&e(i)}))}(arguments),n&&!e&&c()),this},remove:function(){return S.each(arguments,(function(t,e){for(var n;(n=S.inArray(e,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(t){return t?S.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},S.extend({Deferred:function(t){var e=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return S.Deferred((function(n){S.each(e,(function(e,i){var r=v(t[i[4]])&&t[i[4]];s[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&v(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,r){var s=0;function o(t,e,n,r){return function(){var a=this,c=arguments,l=function(){var i,l;if(!(t<s)){if((i=n.apply(a,c))===e.promise())throw new TypeError("Thenable self-resolution");l=i&&("object"==typeof i||"function"==typeof i)&&i.then,v(l)?r?l.call(i,o(s,e,K,r),o(s,e,G,r)):(s++,l.call(i,o(s,e,K,r),o(s,e,G,r),o(s,e,K,e.notifyWith))):(n!==K&&(a=void 0,c=[i]),(r||e.resolveWith)(a,c))}},u=r?l:function(){try{l()}catch(i){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(i,u.error),t+1>=s&&(n!==G&&(a=void 0,c=[i]),e.rejectWith(a,c))}};t?u():(S.Deferred.getErrorHook?u.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(u.error=S.Deferred.getStackHook()),i.setTimeout(u))}}return S.Deferred((function(i){e[0][3].add(o(0,i,v(r)?r:K,i.notifyWith)),e[1][3].add(o(0,i,v(t)?t:K)),e[2][3].add(o(0,i,v(n)?n:G))})).promise()},promise:function(t){return null!=t?S.extend(t,r):r}},s={};return S.each(e,(function(t,i){var o=i[2],a=i[5];r[i[1]]=o.add,a&&o.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=o.fireWith})),r.promise(s),t&&t.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),r=a.call(arguments),s=S.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||s.resolveWith(i,r)}};if(e<=1&&(X(t,s.done(o(n)).resolve,s.reject,!e),"pending"===s.state()||v(r[n]&&r[n].then)))return s.then();for(;n--;)X(r[n],o(n),s.reject);return s.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&Y.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){i.setTimeout((function(){throw t}))};var Q=S.Deferred();function J(){_.removeEventListener("DOMContentLoaded",J),i.removeEventListener("load",J),S.ready()}S.fn.ready=function(t){return Q.then(t).catch((function(t){S.readyException(t)})),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==t&&--S.readyWait>0||Q.resolveWith(_,[S]))}}),S.ready.then=Q.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?i.setTimeout(S.ready):(_.addEventListener("DOMContentLoaded",J),i.addEventListener("load",J));var tt=function(t,e,n,i,r,s,o){var a=0,c=t.length,l=null==n;if("object"===x(n))for(a in r=!0,n)tt(t,e,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,v(i)||(o=!0),l&&(o?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(S(t),n)})),e))for(;a<c;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:l?e.call(t):c?e(t[0],n):s},et=/^-ms-/,nt=/-([a-z])/g;function it(t,e){return e.toUpperCase()}function rt(t){return t.replace(et,"ms-").replace(nt,it)}var st=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function ot(){this.expando=S.expando+ot.uid++}ot.uid=1,ot.prototype={cache:function(t){var e=t[this.expando];return e||(e={},st(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[rt(e)]=n;else for(i in e)r[rt(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][rt(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(rt):(e=rt(e))in i?[e]:e.match(Z)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||S.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var at=new ot,ct=new ot,lt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ut=/[A-Z]/g;function ht(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(ut,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:lt.test(t)?JSON.parse(t):t)}(n)}catch(t){}ct.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return ct.hasData(t)||at.hasData(t)},data:function(t,e,n){return ct.access(t,e,n)},removeData:function(t,e){ct.remove(t,e)},_data:function(t,e,n){return at.access(t,e,n)},_removeData:function(t,e){at.remove(t,e)}}),S.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=ct.get(s),1===s.nodeType&&!at.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=rt(i.slice(5)),ht(s,i,r[i]));at.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){ct.set(this,t)})):tt(this,(function(e){var n;if(s&&void 0===e)return void 0!==(n=ct.get(s,t))||void 0!==(n=ht(s,t))?n:void 0;this.each((function(){ct.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){ct.remove(this,t)}))}}),S.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=at.get(t,e),n&&(!i||Array.isArray(n)?i=at.access(t,e,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=S.queue(t,e),i=n.length,r=n.shift(),s=S._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,(function(){S.dequeue(t,e)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return at.get(t,n)||at.access(t,n,{empty:S.Callbacks("once memory").add((function(){at.remove(t,[e+"queue",n])}))})}}),S.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?S.queue(this[0],t):void 0===e?this:this.each((function(){var n=S.queue(this,t,e);S._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&S.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){S.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=S.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=at.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],mt=_.documentElement,gt=function(t){return S.contains(t.ownerDocument,t)},vt={composed:!0};mt.getRootNode&&(gt=function(t){return S.contains(t.ownerDocument,t)||t.getRootNode(vt)===t.ownerDocument});var yt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&gt(t)&&"none"===S.css(t,"display")};function _t(t,e,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return S.css(t,e,"")},c=a(),l=n&&n[3]||(S.cssNumber[e]?"":"px"),u=t.nodeType&&(S.cssNumber[e]||"px"!==l&&+c)&&ft.exec(S.css(t,e));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;o--;)S.style(t,e,u+l),(1-s)*(1-(s=a()/c||.5))<=0&&(o=0),u/=s;u*=2,S.style(t,e,u+l),n=n||[]}return n&&(u=+u||+c||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=r)),r}var bt={};function wt(t){var e,n=t.ownerDocument,i=t.nodeName,r=bt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=S.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),bt[i]=r,r)}function xt(t,e){for(var n,i,r=[],s=0,o=t.length;s<o;s++)(i=t[s]).style&&(n=i.style.display,e?("none"===n&&(r[s]=at.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&yt(i)&&(r[s]=wt(i))):"none"!==n&&(r[s]="none",at.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}S.fn.extend({show:function(){return xt(this,!0)},hide:function(){return xt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){yt(this)?S(this).show():S(this).hide()}))}});var Tt,Et,St=/^(?:checkbox|radio)$/i,kt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ct=/^$|^module$|\/(?:java|ecma)script/i;Tt=_.createDocumentFragment().appendChild(_.createElement("div")),(Et=_.createElement("input")).setAttribute("type","radio"),Et.setAttribute("checked","checked"),Et.setAttribute("name","t"),Tt.appendChild(Et),g.checkClone=Tt.cloneNode(!0).cloneNode(!0).lastChild.checked,Tt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Tt.cloneNode(!0).lastChild.defaultValue,Tt.innerHTML="<option></option>",g.option=!!Tt.lastChild;var It={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function At(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&C(t,e)?S.merge([t],n):n}function Lt(t,e){for(var n=0,i=t.length;n<i;n++)at.set(t[n],"globalEval",!e||at.get(e[n],"globalEval"))}It.tbody=It.tfoot=It.colgroup=It.caption=It.thead,It.th=It.td,g.option||(It.optgroup=It.option=[1,"<select multiple='multiple'>","</select>"]);var Ot=/<|&#?\w+;/;function Pt(t,e,n,i,r){for(var s,o,a,c,l,u,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((s=t[f])||0===s)if("object"===x(s))S.merge(d,s.nodeType?[s]:s);else if(Ot.test(s)){for(o=o||h.appendChild(e.createElement("div")),a=(kt.exec(s)||["",""])[1].toLowerCase(),c=It[a]||It._default,o.innerHTML=c[1]+S.htmlPrefilter(s)+c[2],u=c[0];u--;)o=o.lastChild;S.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(e.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(i&&S.inArray(s,i)>-1)r&&r.push(s);else if(l=gt(s),o=At(h.appendChild(s),"script"),l&&Lt(o),n)for(u=0;s=o[u++];)Ct.test(s.type||"")&&n.push(s);return h}var Nt=/^([^.]*)(?:\.(.+)|)/;function Dt(){return!0}function Rt(){return!1}function Mt(t,e,n,i,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)Mt(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Rt;else if(!r)return t;return 1===s&&(o=r,r=function(t){return S().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=S.guid++)),t.each((function(){S.event.add(this,e,r,i,n)}))}function jt(t,e,n){n?(at.set(t,e,!1),S.event.add(t,e,{namespace:!1,handler:function(t){var n,i=at.get(this,e);if(1&t.isTrigger&&this[e]){if(i)(S.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=a.call(arguments),at.set(this,e,i),this[e](),n=at.get(this,e),at.set(this,e,!1),i!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else i&&(at.set(this,e,S.event.trigger(i[0],i.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Dt)}})):void 0===at.get(t,e)&&S.event.add(t,e,Dt)}S.event={global:{},add:function(t,e,n,i,r){var s,o,a,c,l,u,h,d,f,p,m,g=at.get(t);if(st(t))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&S.find.matchesSelector(mt,r),n.guid||(n.guid=S.guid++),(c=g.events)||(c=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(Z)||[""]).length;l--;)f=m=(a=Nt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=S.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=S.event.special[f]||{},u=S.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:p.join(".")},s),(d=c[f])||((d=c[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,o)||t.addEventListener&&t.addEventListener(f,o)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),S.event.global[f]=!0)},remove:function(t,e,n,i,r){var s,o,a,c,l,u,h,d,f,p,m,g=at.hasData(t)&&at.get(t);if(g&&(c=g.events)){for(l=(e=(e||"").match(Z)||[""]).length;l--;)if(f=m=(a=Nt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=S.event.special[f]||{},d=c[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||S.removeEvent(t,f,g.handle),delete c[f])}else for(f in c)S.event.remove(t,f+e[l],n,i,!0);S.isEmptyObject(c)&&at.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=new Array(arguments.length),c=S.event.fix(t),l=(at.get(this,"events")||Object.create(null))[c.type]||[],u=S.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(o=S.event.handlers.call(this,c,l),e=0;(r=o[e++])&&!c.isPropagationStopped();)for(c.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==s.namespace&&!c.rnamespace.test(s.namespace)||(c.handleObj=s,c.data=s.data,void 0!==(i=((S.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(t,e){var n,i,r,s,o,a=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(s=[],o={},n=0;n<c;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?S(r,this).index(l)>-1:S.find(r,this,null,[l]).length),o[r]&&s.push(i);s.length&&a.push({elem:l,handlers:s})}return l=this,c<e.length&&a.push({elem:l,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return St.test(e.type)&&e.click&&C(e,"input")&&jt(e,"click",!0),!1},trigger:function(t){var e=this||t;return St.test(e.type)&&e.click&&C(e,"input")&&jt(e,"click"),!0},_default:function(t){var e=t.target;return St.test(e.type)&&e.click&&C(e,"input")&&at.get(e,"click")||C(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Dt:Rt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Rt,isPropagationStopped:Rt,isImmediatePropagationStopped:Rt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Dt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Dt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Dt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(_.documentMode){var n=at.get(this,"handle"),i=S.event.fix(t);i.type="focusin"===t.type?"focus":"blur",i.isSimulated=!0,n(t),i.target===i.currentTarget&&n(i)}else S.event.simulate(e,t.target,S.event.fix(t))}S.event.special[t]={setup:function(){var i;if(jt(this,t,!0),!_.documentMode)return!1;(i=at.get(this,e))||this.addEventListener(e,n),at.set(this,e,(i||0)+1)},trigger:function(){return jt(this,t),!0},teardown:function(){var t;if(!_.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,n),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},S.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=_.documentMode?this:i,s=at.get(r,e);s||(_.documentMode?this.addEventListener(e,n):i.addEventListener(t,n,!0)),at.set(r,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=_.documentMode?this:i,s=at.get(r,e)-1;s?at.set(r,e,s):(_.documentMode?this.removeEventListener(e,n):i.removeEventListener(t,n,!0),at.remove(r,e))}}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){S.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||S.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}})),S.fn.extend({on:function(t,e,n,i){return Mt(this,t,e,n,i)},one:function(t,e,n,i){return Mt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,S(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Rt),this.each((function(){S.event.remove(this,t,n,e)}))}});var Ft=/<script|<style|<link/i,zt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ut(t,e){return C(t,"table")&&C(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function Vt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function qt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ht(t,e){var n,i,r,s,o,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(r in at.remove(e,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)S.event.add(e,r,a[r][n]);ct.hasData(t)&&(s=ct.access(t),o=S.extend({},s),ct.set(e,o))}}function $t(t,e){var n=e.nodeName.toLowerCase();"input"===n&&St.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Wt(t,e,n,i){e=c(e);var r,s,o,a,l,u,h=0,d=t.length,f=d-1,p=e[0],m=v(p);if(m||d>1&&"string"==typeof p&&!g.checkClone&&zt.test(p))return t.each((function(r){var s=t.eq(r);m&&(e[0]=p.call(this,r,s.html())),Wt(s,e,n,i)}));if(d&&(s=(r=Pt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=(o=S.map(At(r,"script"),Vt)).length;h<d;h++)l=r,h!==f&&(l=S.clone(l,!0,!0),a&&S.merge(o,At(l,"script"))),n.call(t[h],l,h);if(a)for(u=o[o.length-1].ownerDocument,S.map(o,qt),h=0;h<a;h++)l=o[h],Ct.test(l.type||"")&&!at.access(l,"globalEval")&&S.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):w(l.textContent.replace(Bt,""),l,u))}return t}function Zt(t,e,n){for(var i,r=e?S.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||S.cleanData(At(i)),i.parentNode&&(n&&gt(i)&&Lt(At(i,"script")),i.parentNode.removeChild(i));return t}S.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),c=gt(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(o=At(a),i=0,r=(s=At(t)).length;i<r;i++)$t(s[i],o[i]);if(e)if(n)for(s=s||At(t),o=o||At(a),i=0,r=s.length;i<r;i++)Ht(s[i],o[i]);else Ht(t,a);return(o=At(a,"script")).length>0&&Lt(o,!c&&At(t,"script")),a},cleanData:function(t){for(var e,n,i,r=S.event.special,s=0;void 0!==(n=t[s]);s++)if(st(n)){if(e=n[at.expando]){if(e.events)for(i in e.events)r[i]?S.event.remove(n,i):S.removeEvent(n,i,e.handle);n[at.expando]=void 0}n[ct.expando]&&(n[ct.expando]=void 0)}}}),S.fn.extend({detach:function(t){return Zt(this,t,!0)},remove:function(t){return Zt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Wt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ut(this,t).appendChild(t)}))},prepend:function(){return Wt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ut(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(At(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return S.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ft.test(t)&&!It[(kt.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(At(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Wt(this,arguments,(function(e){var n=this.parentNode;S.inArray(this,t)<0&&(S.cleanData(At(this)),n&&n.replaceChild(e,this))}),t)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){S.fn[t]=function(t){for(var n,i=[],r=S(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),S(r[o])[e](n),l.apply(i,n.get());return this.pushStack(i)}}));var Kt=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),Gt=/^--/,Xt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Yt=function(t,e,n){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=s[r];return i},Qt=new RegExp(pt.join("|"),"i");function Jt(t,e,n){var i,r,s,o,a=Gt.test(e),c=t.style;return(n=n||Xt(t))&&(o=n.getPropertyValue(e)||n[e],a&&o&&(o=o.replace(P,"$1")||void 0),""!==o||gt(t)||(o=S.style(t,e)),!g.pixelBoxStyles()&&Kt.test(o)&&Qt.test(e)&&(i=c.width,r=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=o,o=n.width,c.width=i,c.minWidth=r,c.maxWidth=s)),void 0!==o?o+"":o}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",mt.appendChild(l).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,c=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),r=36===e(t.width),u.style.position="absolute",s=12===e(u.offsetWidth/3),mt.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var n,r,s,o,a,c,l=_.createElement("div"),u=_.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,e,n,r;return null==a&&(t=_.createElement("table"),e=_.createElement("tr"),n=_.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",mt.appendChild(t).appendChild(e).appendChild(n),r=i.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,mt.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ne=_.createElement("div").style,ie={};function re(t){return S.cssProps[t]||ie[t]||(t in ne?t:ie[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var se=/^(none|table(?!-c[ea]).+)/,oe={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function ce(t,e,n){var i=ft.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function le(t,e,n,i,r,s){var o="width"===e?1:0,a=0,c=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=S.css(t,n+pt[o],!0,r)),i?("content"===n&&(c-=S.css(t,"padding"+pt[o],!0,r)),"margin"!==n&&(c-=S.css(t,"border"+pt[o]+"Width",!0,r))):(c+=S.css(t,"padding"+pt[o],!0,r),"padding"!==n?c+=S.css(t,"border"+pt[o]+"Width",!0,r):a+=S.css(t,"border"+pt[o]+"Width",!0,r));return!i&&s>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-c-a-.5))||0),c+l}function ue(t,e,n){var i=Xt(t),r=(!g.boxSizingReliable()||n)&&"border-box"===S.css(t,"boxSizing",!1,i),s=r,o=Jt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(o)){if(!n)return o;o="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&C(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===S.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===S.css(t,"boxSizing",!1,i),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+le(t,e,n||(r?"border":"content"),s,i,o)+"px"}function he(t,e,n,i,r){return new he.prototype.init(t,e,n,i,r)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Jt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=rt(e),c=Gt.test(e),l=t.style;if(c||(e=re(a)),o=S.cssHooks[e]||S.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:l[e];"string"==(s=typeof n)&&(r=ft.exec(n))&&r[1]&&(n=_t(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||c||(n+=r&&r[3]||(S.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(c?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var r,s,o,a=rt(e);return Gt.test(e)||(e=re(a)),(o=S.cssHooks[e]||S.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=Jt(t,e,i)),"normal"===r&&e in ae&&(r=ae[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),S.each(["height","width"],(function(t,e){S.cssHooks[e]={get:function(t,n,i){if(n)return!se.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,e,i):Yt(t,oe,(function(){return ue(t,e,i)}))},set:function(t,n,i){var r,s=Xt(t),o=!g.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===S.css(t,"boxSizing",!1,s),c=i?le(t,e,i,a,s):0;return a&&o&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-le(t,e,"border",!1,s)-.5)),c&&(r=ft.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=S.css(t,e)),ce(0,n,c)}}})),S.cssHooks.marginLeft=te(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Jt(t,"marginLeft"))||t.getBoundingClientRect().left-Yt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(t,e){S.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+pt[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(S.cssHooks[t+e].set=ce)})),S.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=Xt(t),r=e.length;o<r;o++)s[e[o]]=S.css(t,e[o],!1,i);return s}return void 0!==n?S.style(t,e,n):S.css(t,e)}),t,e,arguments.length>1)}}),S.Tween=he,he.prototype={constructor:he,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(S.cssNumber[n]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return t&&t.get?t.get(this):he.propHooks._default.get(this)},run:function(t){var e,n=he.propHooks[this.prop];return this.options.duration?this.pos=e=S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):he.propHooks._default.set(this),this}},he.prototype.init.prototype=he.prototype,he.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||!S.cssHooks[t.prop]&&null==t.elem.style[re(t.prop)]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}},he.propHooks.scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},S.fx=he.prototype.init,S.fx.step={};var de,fe,pe=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ge(){fe&&(!1===_.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ge):i.setTimeout(ge,S.fx.interval),S.fx.tick())}function ve(){return i.setTimeout((function(){de=void 0})),de=Date.now()}function ye(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=pt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function _e(t,e,n){for(var i,r=(be.tweeners[e]||[]).concat(be.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function be(t,e,n){var i,r,s=0,o=be.prefilters.length,a=S.Deferred().always((function(){delete c.elem})),c=function(){if(r)return!1;for(var e=de||ve(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),s=0,o=l.tweens.length;s<o;s++)l.tweens[s].run(i);return a.notifyWith(t,[l,i,n]),i<1&&o?n:(o||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:e,originalOptions:n,startTime:de||ve(),duration:n.duration,tweens:[],createTween:function(e,n){var i=S.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),u=l.props;for(function(t,e){var n,i,r,s,o;for(n in t)if(r=e[i=rt(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=S.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(u,l.opts.specialEasing);s<o;s++)if(i=be.prefilters[s].call(l,t,u,l.opts))return v(i.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return S.map(u,_e,l),v(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(be,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return _t(n.elem,t,ft.exec(e),n),n}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(Z);for(var n,i=0,r=t.length;i<r;i++)n=t[i],be.tweeners[n]=be.tweeners[n]||[],be.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,s,o,a,c,l,u,h="width"in e||"height"in e,d=this,f={},p=t.style,m=t.nodeType&&yt(t),g=at.get(t,"fxshow");for(i in n.queue||(null==(o=S._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,S.queue(t,"fx").length||o.empty.fire()}))}))),e)if(r=e[i],pe.test(r)){if(delete e[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||S.style(t,i)}if((c=!S.isEmptyObject(e))||!S.isEmptyObject(f))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=g&&g.display)&&(l=at.get(t,"display")),"none"===(u=S.css(t,"display"))&&(l?u=l:(xt([t],!0),l=t.style.display||l,u=S.css(t,"display"),xt([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===S.css(t,"float")&&(c||(d.done((function(){p.display=l})),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,f)c||(g?"hidden"in g&&(m=g.hidden):g=at.access(t,"fxshow",{display:l}),s&&(g.hidden=!m),m&&xt([t],!0),d.done((function(){for(i in m||xt([t]),at.remove(t,"fxshow"),f)S.style(t,i,f[i])}))),c=_e(m?g[i]:0,i,d),i in g||(g[i]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?be.prefilters.unshift(t):be.prefilters.push(t)}}),S.speed=function(t,e,n){var i=t&&"object"==typeof t?S.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(t,e,n,i){return this.filter(yt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=S.isEmptyObject(t),s=S.speed(e,n,i),o=function(){var e=be(this,S.extend({},t),s);(r||at.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",s=S.timers,o=at.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&me.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||S.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=at.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=S.timers,o=i?i.length:0;for(n.finish=!0,S.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(t,e){var n=S.fn[e];S.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ye(e,!0),t,i,r)}})),S.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){S.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(de=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),de=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){fe||(fe=!0,ge())},S.fx.stop=function(){fe=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,e){return t=S.fx&&S.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}}))},function(){var t=_.createElement("input"),e=_.createElement("select").appendChild(_.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=_.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var we,xe=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return tt(this,S.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){S.removeAttr(this,t)}))}}),S.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?S.prop(t,e,n):(1===s&&S.isXMLDoc(t)||(r=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?we:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=S.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&C(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Z);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),we={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=xe[e]||S.find.attr;xe[e]=function(t,e,i){var r,s,o=e.toLowerCase();return i||(s=xe[o],xe[o]=r,r=null!=n(t,e,i)?o:null,xe[o]=s),r}}));var Te=/^(?:input|select|textarea|button)$/i,Ee=/^(?:a|area)$/i;function Se(t){return(t.match(Z)||[]).join(" ")}function ke(t){return t.getAttribute&&t.getAttribute("class")||""}function Ce(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Z)||[]}S.fn.extend({prop:function(t,e){return tt(this,S.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[S.propFix[t]||t]}))}}),S.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&S.isXMLDoc(t)||(e=S.propFix[e]||e,r=S.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):Te.test(t.nodeName)||Ee.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(t){var e,n,i,r,s,o;return v(t)?this.each((function(e){S(this).addClass(t.call(this,e,ke(this)))})):(e=Ce(t)).length?this.each((function(){if(i=ke(this),n=1===this.nodeType&&" "+Se(i)+" "){for(s=0;s<e.length;s++)r=e[s],n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=Se(n),i!==o&&this.setAttribute("class",o)}})):this},removeClass:function(t){var e,n,i,r,s,o;return v(t)?this.each((function(e){S(this).removeClass(t.call(this,e,ke(this)))})):arguments.length?(e=Ce(t)).length?this.each((function(){if(i=ke(this),n=1===this.nodeType&&" "+Se(i)+" "){for(s=0;s<e.length;s++)for(r=e[s];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o=Se(n),i!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,i,r,s,o=typeof t,a="string"===o||Array.isArray(t);return v(t)?this.each((function(n){S(this).toggleClass(t.call(this,n,ke(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=Ce(t),this.each((function(){if(a)for(s=S(this),r=0;r<n.length;r++)i=n[r],s.hasClass(i)?s.removeClass(i):s.addClass(i);else void 0!==t&&"boolean"!==o||((i=ke(this))&&at.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":at.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Se(ke(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ie=/\r/g;S.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=v(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,S(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=S.map(r,(function(t){return null==t?"":t+""}))),(e=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=S.valHooks[r.type]||S.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Ie,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:Se(S.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],c=o?s+1:r.length;for(i=s<0?c:o?s:0;i<c;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(e=S(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=S.makeArray(e),o=r.length;o--;)((i=r[o]).selected=S.inArray(S.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=S.inArray(S(t).val(),e)>-1}},g.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Ae=i.location,Le={guid:Date.now()},Oe=/\?/;S.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Pe=/^(?:focusinfocus|focusoutblur)$/,Ne=function(t){t.stopPropagation()};S.extend(S.event,{trigger:function(t,e,n,r){var s,o,a,c,l,u,h,d,p=[n||_],m=f.call(t,"type")?t.type:t,g=f.call(t,"namespace")?t.namespace.split("."):[];if(o=d=a=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!Pe.test(m+S.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),l=m.indexOf(":")<0&&"on"+m,(t=t[S.expando]?t:new S.Event(m,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:S.makeArray(e,[t]),h=S.event.special[m]||{},r||!h.trigger||!1!==h.trigger.apply(n,e))){if(!r&&!h.noBubble&&!y(n)){for(c=h.delegateType||m,Pe.test(c+m)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||_)&&p.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=p[s++])&&!t.isPropagationStopped();)d=o,t.type=s>1?c:h.bindType||m,(u=(at.get(o,"events")||Object.create(null))[t.type]&&at.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&st(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!st(n)||l&&v(n[m])&&!y(n)&&((a=n[l])&&(n[l]=null),S.event.triggered=m,t.isPropagationStopped()&&d.addEventListener(m,Ne),n[m](),t.isPropagationStopped()&&d.removeEventListener(m,Ne),S.event.triggered=void 0,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var i=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(i,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each((function(){S.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}});var De=/\[\]$/,Re=/\r?\n/g,Me=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;function Fe(t,e,n,i){var r;if(Array.isArray(e))S.each(e,(function(e,r){n||De.test(t)?i(t,r):Fe(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)}));else if(n||"object"!==x(e))i(t,e);else for(r in e)Fe(t+"["+r+"]",e[r],n,i)}S.param=function(t,e){var n,i=[],r=function(t,e){var n=v(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,(function(){r(this.name,this.value)}));else for(n in t)Fe(n,t[n],e,r);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&je.test(this.nodeName)&&!Me.test(t)&&(this.checked||!St.test(t))})).map((function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(t){return{name:e.name,value:t.replace(Re,"\r\n")}})):{name:e.name,value:n.replace(Re,"\r\n")}})).get()}});var ze=/%20/g,Be=/#.*$/,Ue=/([?&])_=[^&]*/,Ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,qe=/^(?:GET|HEAD)$/,He=/^\/\//,$e={},We={},Ze="*/".concat("*"),Ke=_.createElement("a");function Ge(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(Z)||[];if(v(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Xe(t,e,n,i){var r={},s=t===We;function o(a){var c;return r[a]=!0,S.each(t[a]||[],(function(t,a){var l=a(e,n,i);return"string"!=typeof l||s||r[l]?s?!(c=l):void 0:(e.dataTypes.unshift(l),o(l),!1)})),c}return o(e.dataTypes[0])||!r["*"]&&o("*")}function Ye(t,e){var n,i,r=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&S.extend(!0,t,i),t}Ke.href=Ae.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ae.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ae.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ze,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ye(Ye(t,S.ajaxSettings),e):Ye(S.ajaxSettings,t)},ajaxPrefilter:Ge($e),ajaxTransport:Ge(We),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,o,a,c,l,u,h,d,f=S.ajaxSetup({},e),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?S(p):S.event,g=S.Deferred(),v=S.Callbacks("once memory"),y=f.statusCode||{},b={},w={},x="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(l){if(!o)for(o={};e=Ve.exec(s);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(t,e){return null==l&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)T.always(t[T.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||x;return n&&n.abort(e),E(0,e),this}};if(g.promise(T),f.url=((t||f.url||Ae.href)+"").replace(He,Ae.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Z)||[""],null==f.crossDomain){c=_.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ke.protocol+"//"+Ke.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=S.param(f.data,f.traditional)),Xe($e,f,e,T),l)return T;for(h in(u=S.event&&f.global)&&0==S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qe.test(f.type),r=f.url.replace(Be,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(ze,"+")):(d=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Oe.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Ue,"$1"),d=(Oe.test(r)?"&":"?")+"_="+Le.guid+++d),f.url=r+d),f.ifModified&&(S.lastModified[r]&&T.setRequestHeader("If-Modified-Since",S.lastModified[r]),S.etag[r]&&T.setRequestHeader("If-None-Match",S.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ze+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||l))return T.abort();if(x="abort",v.add(f.complete),T.done(f.success),T.fail(f.error),n=Xe(We,f,e,T)){if(T.readyState=1,u&&m.trigger("ajaxSend",[T,f]),l)return T;f.async&&f.timeout>0&&(a=i.setTimeout((function(){T.abort("timeout")}),f.timeout));try{l=!1,n.send(b,E)}catch(t){if(l)throw t;E(-1,t)}}else E(-1,"No Transport");function E(t,e,o,c){var h,d,_,b,w,x=e;l||(l=!0,a&&i.clearTimeout(a),n=void 0,s=c||"",T.readyState=t>0?4:0,h=t>=200&&t<300||304===t,o&&(b=function(t,e,n){for(var i,r,s,o,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||t.converters[r+" "+c[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==c[0]&&c.unshift(s),n[s]}(f,T,o)),!h&&S.inArray("script",f.dataTypes)>-1&&S.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),b=function(t,e,n,i){var r,s,o,a,c,l={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=s,s=u.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(o=l[c+" "+s]||l["* "+s]))for(r in l)if((a=r.split(" "))[1]===s&&(o=l[c+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[r]:!0!==l[r]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+c+" to "+s}}}return{state:"success",data:e}}(f,b,T,h),h?(f.ifModified&&((w=T.getResponseHeader("Last-Modified"))&&(S.lastModified[r]=w),(w=T.getResponseHeader("etag"))&&(S.etag[r]=w)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=b.state,d=b.data,h=!(_=b.error))):(_=x,!t&&x||(x="error",t<0&&(t=0))),T.status=t,T.statusText=(e||x)+"",h?g.resolveWith(p,[d,x,T]):g.rejectWith(p,[T,x,_]),T.statusCode(y),y=void 0,u&&m.trigger(h?"ajaxSuccess":"ajaxError",[T,f,h?d:_]),v.fireWith(p,[T,x]),u&&(m.trigger("ajaxComplete",[T,f]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],(function(t,e){S[e]=function(t,n,i,r){return v(n)&&(r=r||i,i=n,n=void 0),S.ajax(S.extend({url:t,type:e,dataType:r,data:n,success:i},S.isPlainObject(t)&&t))}})),S.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),S._evalUrl=function(t,e,n){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){S.globalEval(t,e,n)}})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return v(t)?this.each((function(e){S(this).wrapInner(t.call(this,e))})):this.each((function(){var e=S(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=v(t);return this.each((function(n){S(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Qe={0:200,1223:204},Je=S.ajaxSettings.xhr();g.cors=!!Je&&"withCredentials"in Je,g.ajax=Je=!!Je,S.ajaxTransport((function(t){var e,n;if(g.cors||Je&&!t.crossDomain)return{send:function(r,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Qe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),S.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),S.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=S("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),_.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||S.expando+"_"+Le.guid++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",(function(t,e,n){var r,s,o,a=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(nn,"$1"+r):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always((function(){void 0===s?S(i).removeProp(r):i[r]=s,t[r]&&(t.jsonpCallback=e.jsonpCallback,en.push(r)),o&&v(s)&&s(o[0]),o=s=void 0})),"script"})),g.createHTMLDocument=((tn=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((i=(e=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,e.head.appendChild(i)):e=_),s=!n&&[],(r=B.exec(t))?[e.createElement(r[1])]:(r=Pt([t],e,s),s&&s.length&&S(s).remove(),S.merge([],r.childNodes)));var i,r,s},S.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=Se(t.slice(a)),t=t.slice(0,a)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&S.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){s=arguments,o.html(i?S("<div>").append(S.parseHTML(t)).find(i):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,s||[t.responseText,e,t])}))}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,(function(e){return t===e.elem})).length},S.offset={setOffset:function(t,e,n){var i,r,s,o,a,c,l=S.css(t,"position"),u=S(t),h={};"static"===l&&(t.style.position="relative"),a=u.offset(),s=S.css(t,"top"),c=S.css(t,"left"),("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1?(o=(i=u.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(c)||0),v(e)&&(e=e.call(t,n,S.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):u.css(h)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){S.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===S.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),r.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-S.css(i,"marginTop",!0),left:e.left-r.left-S.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||mt}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;S.fn[t]=function(i){return tt(this,(function(t,i,r){var s;if(y(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r}),t,i,arguments.length)}})),S.each(["top","left"],(function(t,e){S.cssHooks[e]=te(g.pixelPosition,(function(t,n){if(n)return n=Jt(t,e),Kt.test(n)?S(t).position()[e]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(t,e){S.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){S.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return tt(this,(function(e,n,r){var s;return y(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?S.css(e,n,a):S.style(e,n,r,a)}),e,o?r:void 0,o)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){S.fn[e]=function(t){return this.on(e,t)}})),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){S.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return i=a.call(arguments,2),r=function(){return t.apply(e||this,i.concat(a.call(arguments)))},r.guid=t.guid=t.guid||S.guid++,r},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=C,S.isFunction=v,S.isWindow=y,S.camelCase=rt,S.type=x,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},S.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return S}.apply(e,[]))||(t.exports=n);var sn=i.jQuery,on=i.$;return S.noConflict=function(t){return i.$===S&&(i.$=on),t&&i.jQuery===S&&(i.jQuery=sn),S},void 0===r&&(i.jQuery=i.$=S),S}))},372:function(t,e){!function(t){"use strict";function e(t){for(var e,n,i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])t[e]=n[e];return t}var n=Object.create||function(t){return i.prototype=t,new i};function i(){}function r(t,e){var n,i=Array.prototype.slice;return t.bind?t.bind.apply(t,i.call(arguments,1)):(n=i.call(arguments,2),function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)})}var s=0;function o(t){return"_leaflet_id"in t||(t._leaflet_id=++s),t._leaflet_id}function a(t,e,n){var i,r,s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)};return o}function c(t,e,n){var i=e[1],r=i-(e=e[0]);return t===i&&n?t:((t-e)%r+r)%r+e}function l(){return!1}function u(t,e){return!1===e?t:(e=Math.pow(10,void 0===e?6:e),Math.round(t*e)/e)}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function f(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function p(t,e,n){var i,r=[];for(i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){if(void 0===(n=e[n]))throw new Error("No value provided for variable "+t);return"function"==typeof n?n(e):n}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var T=window.requestAnimationFrame||b("RequestAnimationFrame")||x,E=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function S(t,e,n){if(!n||T!==x)return T.call(window,r(t,e));t.call(e)}function k(t){t&&E.call(window,t)}var C={__proto__:null,extend:e,create:n,bind:r,get lastId(){return s},stamp:o,throttle:a,wrapNum:c,falseFn:l,formatNum:u,trim:h,splitWords:d,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:T,cancelFn:E,requestAnimFrame:S,cancelAnimFrame:k};function I(){}I.extend=function(t){function i(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var r,s=i.__super__=this.prototype,o=n(s);for(r in(o.constructor=i).prototype=o,this)Object.prototype.hasOwnProperty.call(this,r)&&"prototype"!==r&&"__super__"!==r&&(i[r]=this[r]);if(t.statics&&e(i,t.statics),t.includes){var a=t.includes;if("undefined"!=typeof L&&L&&L.Mixin){a=v(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}e.apply(null,[o].concat(t.includes))}return e(o,t),delete o.statics,delete o.includes,o.options&&(o.options=s.options?n(s.options):{},e(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){s.callInitHooks&&s.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},i},I.include=function(t){var n=this.prototype.options;return e(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},I.mergeOptions=function(t){return e(this.prototype.options,t),this},I.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,s=(t=d(t)).length;r<s;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(arguments.length)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=d(t);for(var r=1===arguments.length,s=0,o=t.length;s<o;s++)r?this._off(t[s]):this._off(t[s],e,n)}else delete this._events;return this},_on:function(t,e,n,i){"function"!=typeof e?console.warn("wrong listener type: "+typeof e):!1===this._listens(t,e,n)&&(e={fn:e,ctx:n=n===this?void 0:n},i&&(e.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e))},_off:function(t,e,n){var i,r,s;if(this._events&&(i=this._events[t]))if(1===arguments.length){if(this._firingCount)for(r=0,s=i.length;r<s;r++)i[r].fn=l;delete this._events[t]}else"function"!=typeof e?console.warn("wrong listener type: "+typeof e):!1!==(e=this._listens(t,e,n))&&(n=i[e],this._firingCount&&(n.fn=l,this._events[t]=i=i.slice()),i.splice(e,1))},fire:function(t,n,i){if(this.listens(t,i)){var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var o=0,a=s.length;o<a;o++){var c=s[o],l=c.fn;c.once&&this.off(t,l,c.ctx),l.call(c.ctx||this,r)}this._firingCount--}}i&&this._propagateEvent(r)}return this},listens:function(t,e,n,i){"string"!=typeof t&&console.warn('"string" type argument expected');var r=e,s=("function"!=typeof e&&(i=!!e,n=r=void 0),this._events&&this._events[t]);if(s&&s.length&&!1!==this._listens(t,r,n))return!0;if(i)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e,n,i))return!0;return!1},_listens:function(t,e,n){if(this._events){var i=this._events[t]||[];if(!e)return!!i.length;n===this&&(n=void 0);for(var r=0,s=i.length;r<s;r++)if(i[r].fn===e&&i[r].ctx===n)return r}return!1},once:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e,!0);else for(var r=0,s=(t=d(t)).length;r<s;r++)this._on(t[r],e,n,!0);return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}},O=(A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens,I.extend(A));function P(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var N=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof P?t:v(t)?new P(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new P(t.x,t.y):new P(t,e,n)}function R(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function M(t,e){return!t||t instanceof R?t:new R(t,e)}function j(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function F(t,e){return t instanceof j?t:new j(t,e)}function z(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function B(t,e,n){return t instanceof z?t:v(t)&&"object"!=typeof t[0]?3===t.length?new z(t[0],t[1],t[2]):2===t.length?new z(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new z(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new z(t,e,n)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new P(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new P(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x;return t=t.y-this.y,Math.sqrt(e*e+t*t)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},R.prototype={extend:function(t){var e,n;if(t){if(t instanceof P||"number"==typeof t[0]||"x"in t)e=n=D(t);else if(e=(t=M(t)).min,n=t.max,!e||!n)return this;this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=e.clone(),this.max=n.clone())}return this},getCenter:function(t){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t=("number"==typeof t[0]||t instanceof P?D:M)(t))instanceof R?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=M(t);var e=this.min,n=this.max,i=t.min,r=(t=t.max).x>=e.x&&i.x<=n.x;return t=t.y>=e.y&&i.y<=n.y,r&&t},overlaps:function(t){t=M(t);var e=this.min,n=this.max,i=t.min,r=(t=t.max).x>e.x&&i.x<n.x;return t=t.y>e.y&&i.y<n.y,r&&t},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,n=this.max,i=Math.abs(e.x-n.x)*t;return t=Math.abs(e.y-n.y)*t,M(D(e.x-i,e.y-t),D(n.x+i,n.y+t))},equals:function(t){return!!t&&(t=M(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},j.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof z)n=e=t;else{if(!(t instanceof j))return t?this.extend(B(t)||F(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new z(e.lat,e.lng),this._northEast=new z(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t;return t=Math.abs(e.lng-n.lng)*t,new j(new z(e.lat-i,e.lng-t),new z(n.lat+i,n.lng+t))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof z||"lat"in t?B:F)(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof j?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=F(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=(t=t.getNorthEast()).lat>=e.lat&&i.lat<=n.lat;return t=t.lng>=e.lng&&i.lng<=n.lng,r&&t},overlaps:function(t){t=F(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=(t=t.getNorthEast()).lat>e.lat&&i.lat<n.lat;return t=t.lng>e.lng&&i.lng<n.lng,r&&t},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=F(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var U={latLngToPoint:function(t,e){return t=this.projection.project(t),e=this.scale(e),this.transformation._transform(t,e)},pointToLatLng:function(t,e){return e=this.scale(e),t=this.transformation.untransform(t,e),this.projection.unproject(t)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){var e;return this.infinite?null:(e=this.projection.bounds,t=this.scale(t),new R(this.transformation.transform(e.min,t),this.transformation.transform(e.max,t)))},infinite:!(z.prototype={equals:function(t,e){return!!t&&(t=B(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,B(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=(t=180*t/40075017)/Math.cos(Math.PI/180*this.lat);return F([this.lat-t,this.lng-e],[this.lat+t,this.lng+e])},clone:function(){return new z(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?c(t.lng,this.wrapLng,!0):t.lng;return new z(this.wrapLat?c(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat;return e=e.lng-n.lng,0==i&&0==e?t:(n=t.getSouthWest(),t=t.getNorthEast(),new j(new z(n.lat-i,n.lng-e),new z(t.lat-i,t.lng-e)))}},V=e({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,s=Math.sin((e.lat-t.lat)*n/2);return e=Math.sin((e.lng-t.lng)*n/2),t=s*s+Math.cos(i)*Math.cos(r)*e*e,n=2*Math.atan2(Math.sqrt(t),Math.sqrt(1-t)),this.R*n}}),q={R:q=6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE;return n=Math.max(Math.min(n,t.lat),-n),n=Math.sin(n*e),new P(this.R*t.lng*e,this.R*Math.log((1+n)/(1-n))/2)},unproject:function(t){var e=180/Math.PI;return new z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:new R([-(q*=Math.PI),-q],[q,q])};function H(t,e,n,i){v(t)?(this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3]):(this._a=t,this._b=e,this._c=n,this._d=i)}function $(t,e,n,i){return new H(t,e,n,i)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new P((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}};var W=e({},V,{code:"EPSG:3857",projection:q,transformation:$(W=.5/(Math.PI*q.R),.5,-W,.5)}),Z=e({},W,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function G(t,e){for(var n,i,r,s,o="",a=0,c=t.length;a<c;a++){for(n=0,i=(r=t[a]).length;n<i;n++)o+=(n?"L":"M")+(s=r[n]).x+" "+s.y;o+=e?It.svg?"z":"x":""}return o||"M0 0"}var X=document.documentElement.style,Y="ActiveXObject"in window,Q=Y&&!document.addEventListener,J="msLaunchUri"in navigator&&!("documentMode"in document),tt=Ct("webkit"),et=Ct("android"),nt=Ct("android 2")||Ct("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=(it=et&&Ct("Google")&&it<537&&!("AudioNode"in window),!!window.opera),st=!J&&Ct("chrome"),ot=Ct("gecko")&&!tt&&!rt&&!Y,at=!st&&Ct("safari"),ct=Ct("phantom"),lt="OTransition"in X,ut=0===navigator.platform.indexOf("Win"),ht=Y&&"transition"in X,dt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nt,ft=(X="MozPerspective"in X,!window.L_DISABLE_3D&&(ht||dt||X)&&!lt&&!ct),pt=(Zn="undefined"!=typeof orientation||Ct("mobile"))&&tt,mt=Zn&&dt,gt=!window.PointerEvent&&window.MSPointerEvent,vt=!(!window.PointerEvent&&!gt),yt="ontouchstart"in window||!!window.TouchEvent,_t=!window.L_NO_TOUCH&&(yt||vt),bt=Zn&&rt,wt=Zn&&ot,xt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),Et=!!document.createElement("canvas").getContext,St=!(!document.createElementNS||!K("svg").createSVGRect),kt=!!St&&((kt=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(kt.firstChild&&kt.firstChild.namespaceURI));function Ct(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var It={ie:Y,ielt9:Q,edge:J,webkit:tt,android:et,android23:nt,androidStock:it,opera:rt,chrome:st,gecko:ot,safari:at,phantom:ct,opera12:lt,win:ut,ie3d:ht,webkit3d:dt,gecko3d:X,any3d:ft,mobile:Zn,mobileWebkit:pt,mobileWebkit3d:mt,msPointer:gt,pointer:vt,touch:_t,touchNative:yt,mobileOpera:bt,mobileGecko:wt,retina:xt,passiveEvents:Tt,canvas:Et,svg:St,vml:!St&&function(){try{var t=document.createElement("div"),e=(t.innerHTML='<v:shape adj="1"/>',t.firstChild);return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),inlineSvg:kt,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},At=It.msPointer?"MSPointerDown":"pointerdown",Lt=It.msPointer?"MSPointerMove":"pointermove",Ot=It.msPointer?"MSPointerUp":"pointerup",Pt=It.msPointer?"MSPointerCancel":"pointercancel",Nt={touchstart:At,touchmove:Lt,touchend:Ot,touchcancel:Pt},Dt={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Le(e),Bt(t,e)},touchmove:Bt,touchend:Bt,touchcancel:Bt},Rt={},Mt=!1;function jt(t){Rt[t.pointerId]=t}function Ft(t){Rt[t.pointerId]&&(Rt[t.pointerId]=t)}function zt(t){delete Rt[t.pointerId]}function Bt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],Rt)e.touches.push(Rt[n]);e.changedTouches=[e],t(e)}}var Ut=200;var Vt,qt,Ht,$t,Wt,Zt,Kt=ue(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Gt=ue(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xt="webkitTransition"===Gt||"OTransition"===Gt?Gt+"End":"transitionend";function Yt(t){return"string"==typeof t?document.getElementById(t):t}function Qt(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];return"auto"===(n=n&&"auto"!==n||!document.defaultView?n:(t=document.defaultView.getComputedStyle(t,null))?t[e]:null)?null:n}function Jt(t,e,n){return(t=document.createElement(t)).className=e||"",n&&n.appendChild(t),t}function te(t){var e=t.parentNode;e&&e.removeChild(t)}function ee(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ne(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ie(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function re(t,e){return void 0!==t.classList?t.classList.contains(e):0<(t=ce(t)).length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t)}function se(t,e){var n;if(void 0!==t.classList)for(var i=d(e),r=0,s=i.length;r<s;r++)t.classList.add(i[r]);else re(t,e)||ae(t,((n=ce(t))?n+" ":"")+e)}function oe(t,e){void 0!==t.classList?t.classList.remove(e):ae(t,h((" "+ce(t)+" ").replace(" "+e+" "," ")))}function ae(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ce(t){return void 0===(t=t.correspondingElement?t.correspondingElement:t).className.baseVal?t.className:t.className.baseVal}function le(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}}function ue(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function he(t,e,n){e=e||new P(0,0),t.style[Kt]=(It.ie3d?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(n?" scale("+n+")":"")}function de(t,e){t._leaflet_pos=e,It.any3d?he(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function fe(t){return t._leaflet_pos||new P(0,0)}function pe(){be(window,"dragstart",Le)}function me(){xe(window,"dragstart",Le)}function ge(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(ve(),Zt=(Wt=t).style.outline,t.style.outline="none",be(window,"keydown",ve))}function ve(){Wt&&(Wt.style.outline=Zt,Zt=Wt=void 0,xe(window,"keydown",ve))}function ye(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function _e(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}function be(t,e,n,i){if(e&&"object"==typeof e)for(var r in e)Se(t,r,e[r],n);else for(var s=0,o=(e=d(e)).length;s<o;s++)Se(t,e[s],n,i);return this}$t="onselectstart"in document?(Ht=function(){be(window,"selectstart",Le)},function(){xe(window,"selectstart",Le)}):(qt=ue(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),Ht=function(){var t;qt&&(t=document.documentElement.style,Vt=t[qt],t[qt]="none")},function(){qt&&(document.documentElement.style[qt]=Vt,Vt=void 0)}),Y={__proto__:null,TRANSFORM:Kt,TRANSITION:Gt,TRANSITION_END:Xt,get:Yt,getStyle:Qt,create:Jt,remove:te,empty:ee,toFront:ne,toBack:ie,hasClass:re,addClass:se,removeClass:oe,setClass:ae,getClass:ce,setOpacity:le,testProp:ue,setTransform:he,setPosition:de,getPosition:fe,get disableTextSelection(){return Ht},get enableTextSelection(){return $t},disableImageDrag:pe,enableImageDrag:me,preventOutline:ge,restoreOutline:ve,getSizedParentNode:ye,getScale:_e};var we="_leaflet_events";function xe(t,e,n,i){if(1===arguments.length)Te(t),delete t[we];else if(e&&"object"==typeof e)for(var r in e)ke(t,r,e[r],n);else if(e=d(e),2===arguments.length)Te(t,(function(t){return-1!==y(e,t)}));else for(var s=0,o=e.length;s<o;s++)ke(t,e[s],n,i);return this}function Te(t,e){for(var n in t[we]){var i=n.split(/\d/)[0];e&&!e(i)||ke(t,i,null,null,n)}}var Ee={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Se(t,e,n,i){var r,s,a=e+o(n)+(i?"_"+o(i):"");t[we]&&t[we][a]||(s=r=function(e){return n.call(i||t,e||window.event)},!It.touchNative&&It.pointer&&0===e.indexOf("touch")?r=function(t,e,n){return"touchstart"!==e||Mt||(document.addEventListener(At,jt,!0),document.addEventListener(Lt,Ft,!0),document.addEventListener(Ot,zt,!0),document.addEventListener(Pt,zt,!0),Mt=!0),Dt[e]?(n=Dt[e].bind(this,n),t.addEventListener(Nt[e],n,!1),n):(console.warn("wrong event specified:",e),l)}(t,e,r):It.touch&&"dblclick"===e?r=function(t,e){t.addEventListener("dblclick",e);var n,i=0;function r(t){var r;1!==t.detail?n=t.detail:"mouse"===t.pointerType||t.sourceCapabilities&&!t.sourceCapabilities.firesTouchEvents||(r=Pe(t)).some((function(t){return t instanceof HTMLLabelElement&&t.attributes.for}))&&!r.some((function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement}))||((r=Date.now())-i<=Ut?2==++n&&e(function(t){var e,n,i={};for(n in t)e=t[n],i[n]=e&&e.bind?e.bind(t):e;return(t=i).type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}(t)):n=1,i=r)}return t.addEventListener("click",r),{dblclick:e,simDblclick:r}}(t,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ee[e]||e,r,!!It.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?t.addEventListener(Ee[e],r=function(e){e=e||window.event,Me(t,e)&&s(e)},!1):t.addEventListener(e,s,!1):t.attachEvent("on"+e,r),t[we]=t[we]||{},t[we][a]=r)}function ke(t,e,n,i,r){var s,a;r=r||e+o(n)+(i?"_"+o(i):""),(n=t[we]&&t[we][r])&&(!It.touchNative&&It.pointer&&0===e.indexOf("touch")?(i=t,a=n,Nt[s=e]?i.removeEventListener(Nt[s],a,!1):console.warn("wrong event specified:",s)):It.touch&&"dblclick"===e?(i=n,(a=t).removeEventListener("dblclick",i.dblclick),a.removeEventListener("click",i.simDblclick)):"removeEventListener"in t?t.removeEventListener(Ee[e]||e,n,!1):t.detachEvent("on"+e,n),t[we][r]=null)}function Ce(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ie(t){return Se(t,"wheel",Ce),this}function Ae(t){return be(t,"mousedown touchstart dblclick contextmenu",Ce),t._leaflet_disable_click=!0,this}function Le(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Oe(t){return Le(t),Ce(t),this}function Pe(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function Ne(t,e){var n,i;return e?(i=(n=_e(e)).boundingClientRect,new P((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)):new P(t.clientX,t.clientY)}var De=It.linux&&It.chrome?window.devicePixelRatio:It.mac?3*window.devicePixelRatio:0<window.devicePixelRatio?2*window.devicePixelRatio:1;function Re(t){return It.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/De:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function Me(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}Q={__proto__:null,on:be,off:xe,stopPropagation:Ce,disableScrollPropagation:Ie,disableClickPropagation:Ae,preventDefault:Le,stop:Oe,getPropagationPath:Pe,getMousePosition:Ne,getWheelDelta:Re,isExternalTarget:Me,addListener:be,removeListener:xe};var je=O.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=fe(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){t=this._startPos.add(this._offset.multiplyBy(t)),e&&t._round(),de(this._el,t),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Fe=O.extend({options:{crs:W,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(B(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Gt&&It.any3d&&!It.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),be(this._proxy,Xt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(B(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n,i.pan&&i.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(It.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(It.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2);return t=(t instanceof P?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),i=this.containerPointToLatLng(r.add(t)),this.setView(i,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():F(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),i=D(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));return(r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0?{center:t.getCenter(),zoom:r}:(e=i.subtract(n).divideBy(2),i=this.project(t.getSouthWest(),r),n=this.project(t.getNorthEast(),r),{center:this.unproject(i.add(n).divideBy(2).add(e),r),zoom:r})},fitBounds:function(t,e){if((t=F(t)).isValid())return t=this._getBoundsCenterZoom(t,e),this.setView(t.center,t.zoom,e);throw new Error("Bounds are not valid.")},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){var n;return e=e||{},(t=D(t).round()).x||t.y?(!0===e.animate||this.getSize().contains(t)?(this._panAnim||(this._panAnim=new je,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate?(se(this._mapPane,"leaflet-pan-anim"),n=this._getMapPanePos().subtract(t).round(),this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)):(this._rawPanBy(t),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this):this.fire("moveend")},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!It.any3d)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),s=this.getSize(),o=this._zoom,a=(t=B(t),e=void 0===e?o:e,Math.max(s.x,s.y)),c=a*this.getZoomScale(o,e),l=r.distanceTo(i)||1,u=1.42,h=u*u;function d(t){return t=(c*c-a*a+(t?-1:1)*h*h*l*l)/(2*(t?c:a)*h*l),(t=Math.sqrt(t*t+1)-t)<1e-9?-18:Math.log(t)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var m=d(0);var g=Date.now(),v=(d(1)-m)/u,y=n.duration?1e3*n.duration:1e3*v*.8;return this._moveStart(!0,n.noMoveStart),function n(){var s=(Date.now()-g)/y,c=(1-Math.pow(1-s,1.5))*v;s<=1?(this._flyToFrame=S(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(function(t){return a*(p(m)*(f(t=m+u*t)/p(t))-f(m))/h}(c)/l)),o),this.getScaleZoom(a/(s=c,a*(p(m)/p(m+u*s))),o),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){return t=this._getBoundsCenterZoom(t,e),this.flyTo(t.center,t.zoom,e)},setMaxBounds:function(t){return t=F(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter();return t=this._limitCenter(n,this._zoom,F(t)),n.equals(t)||this.panTo(t,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=D(e.paddingBottomRight||e.padding||[0,0]),r=this.project(this.getCenter()),s=(t=this.project(t),(n=M([(s=this.getPixelBounds()).min.add(n),s.max.subtract(i)])).getSize());return n.contains(t)||(this._enforcingBounds=!0,i=t.subtract(n.getCenter()),n=n.extend(t).getSize().subtract(s),r.x+=i.x<0?-n.x:n.x,r.y+=i.y<0?-n.y:n.y,this.panTo(this.unproject(r),e),this._enforcingBounds=!1),this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize(),i=(this._sizeChanged=!0,this._lastCenter=null,this.getSize()),s=n.divideBy(2).round(),o=i.divideBy(2).round();return(s=s.subtract(o)).x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){var n,i;return t=this._locateOptions=e({timeout:1e4,watch:!1},t),"geolocation"in navigator?(n=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this),t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,i,t):navigator.geolocation.getCurrentPosition(n,i,t)):this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e;this._container._leaflet_id&&(e=t.code,t=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout"),this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+t+"."}))},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e,n,i=new z(t.coords.latitude,t.coords.longitude),r=i.toBounds(2*t.coords.accuracy),s=this._locateOptions,o=(s.setView&&(e=this.getBoundsZoom(r),this.setView(i,s.maxZoom?Math.min(e,s.maxZoom):e)),{latlng:i,bounds:r,timestamp:t.timestamp});for(n in t.coords)"number"==typeof t.coords[n]&&(o[n]=t.coords[n]);this.fire("locationfound",o)}},addHandler:function(t,e){return e&&(e=this[t]=new e(this),this._handlers.push(e),this.options[t]&&e.enable()),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(var t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),te(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)te(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){return e=Jt("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane),t&&(this._panes[t]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=F(t),n=D(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),s=this.getMaxZoom(),o=t.getNorthWest(),a=(t=t.getSouthEast(),n=this.getSize().subtract(n),t=M(this.project(t,i),this.project(o,i)).getSize(),o=It.any3d?this.options.zoomSnap:1,n.x/t.x);return n=n.y/t.y,t=e?Math.max(a,n):Math.min(a,n),i=this.getScaleZoom(t,i),o&&(i=Math.round(i/(o/100))*(o/100),i=e?Math.ceil(i/o)*o:Math.floor(i/o)*o),Math.max(r,Math.min(s,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){return new R(t=this._getTopLeftPoint(t,e),t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,t=n.zoom(t*n.scale(e)),isNaN(t)?1/0:t},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(B(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){return t=D(t).add(this.getPixelOrigin()),this.unproject(t)},latLngToLayerPoint:function(t){return this.project(B(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(F(t))},distance:function(t,e){return this.options.crs.distance(B(t),B(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){return t=this.containerPointToLayerPoint(D(t)),this.layerPointToLatLng(t)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return Ne(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){if(!(t=this._container=Yt(t)))throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");be(t,"scroll",this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var t=this._container,e=(this._fadeAnimated=this.options.fadeAnimation&&It.any3d,se(t,"leaflet-container"+(It.touch?" leaflet-touch":"")+(It.retina?" leaflet-retina":"")+(It.ielt9?" leaflet-oldie":"")+(It.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":"")),Qt(t,"position"));"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),de(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(t.markerPane,"leaflet-zoom-hide"),se(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){de(this._mapPane,new P(0,0));var i=!this._loaded,r=(this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset"),this._zoom!==e);this._moveStart(r,n)._move(t,e)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,i){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){de(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?xe:be;e((this._targets[o(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),It.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=S((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((n=this._targets[o(s)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(r&&!Me(s,t))break;if(i.push(n),r)break}if(s===this._container)break;s=s.parentNode}return i.length||a||r||!this.listens(e,!0)?i:[this]},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e,n=t.target||t.srcElement;!this._loaded||n._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(n)||("mousedown"===(e=t.type)&&ge(n),this._fireDOMEvent(t,e))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){"click"===t.type&&((c=e({},t)).type="preclick",this._fireDOMEvent(c,c.type,i));var r=this._findEventTargets(t,n);if(i){for(var s=[],o=0;o<i.length;o++)i[o].listens(n,!0)&&s.push(i[o]);r=s.concat(r)}if(r.length){"contextmenu"===n&&Le(t);var a,c=r[0],l={originalEvent:t};for("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type&&(a=c.getLatLng&&(!c._radius||c._radius<=10),l.containerPoint=a?this.latLngToContainerPoint(c.getLatLng()):this.mouseEventToContainerPoint(t),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=a?c.getLatLng():this.layerPointToLatLng(l.layerPoint)),o=0;o<r.length;o++)if(r[o].fire(n,l,!0),l.originalEvent._stopped||!1===r[o].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return fe(this._mapPane)||new P(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){return n=this._getNewPixelOrigin(n,e),this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,n){return n=this._getNewPixelOrigin(n,e),M([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){var i,r;return!n||(i=this.project(t,e),r=this.getSize().divideBy(2),r=new R(i.subtract(r),i.add(r)),r=this._getBoundsOffset(r,n,e),Math.abs(r.x)<=1&&Math.abs(r.y)<=1)?t:this.unproject(i.add(r),e)},_limitOffset:function(t,e){var n;return e?(n=new R((n=this.getPixelBounds()).min.add(t),n.max.add(t)),t.add(this._getBoundsOffset(n,e))):t},_getBoundsOffset:function(t,e,n){return n=(e=M(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n))).min.subtract(t.min),e=e.max.subtract(t.max),new P(this._rebound(n.x,-e.x),this._rebound(n.y,-e.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=It.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){oe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){return t=this._getCenterOffset(t)._trunc(),!(!0!==(e&&e.animate)&&!this.getSize().contains(t)||(this.panBy(t,e),0))},_createAnimProxy:function(){var t=this._proxy=Jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Kt,n=this._proxy.style[e];he(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){te(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();he(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(!this._animatingZoom){if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e);if(i=this._getCenterOffset(t)._divideBy(1-1/i),!0!==n.animate&&!this.getSize().contains(i))return!1;S((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this)}return!0},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&oe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ze(t){return new Ue(t)}var Be,Ue=I.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition();return t=t._controlCorners[n],se(e,"leaflet-control"),-1!==n.indexOf("bottom")?t.insertBefore(e,t.firstChild):t.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(te(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),Ve=(Fe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=Jt("div",e+"control-container",this._container);function i(i,r){t[i+r]=Jt("div",e+i+" "+e+r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)te(this._controlCorners[t]);te(this._controlContainer),delete this._controlCorners,delete this._controlContainer}}),Ue.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ue.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){return t.off("add remove",this._onLayerChange,this),(t=this._getLayer(o(t)))&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):oe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return oe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Jt("div",t),n=this.options.collapsed,i=(e.setAttribute("aria-haspopup",!0),Ae(e),Ie(e),this._section=Jt("section",t+"-list")),r=(n&&(this._map.on("click",this.collapse,this),be(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this)),this._layersLink=Jt("a",t+"-toggle",e));r.href="#",r.title="Layers",r.setAttribute("role","button"),be(r,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){Le(t),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=Jt("div",t+"-base",i),this._separator=Jt("div",t+"-separator",i),this._overlaysList=Jt("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(this._container){ee(this._baseLayersList),ee(this._overlaysList),this._layerControlInputs=[];for(var t,e,n,i=0,r=0;r<this._layers.length;r++)n=this._layers[r],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,i+=n.overlay?0:1;this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&1<i)?"":"none"),this._separator.style.display=e&&t?"":"none"}return this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target));(t=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null)&&this._map.fire(t,e)},_createRadioElement:function(t,e){return t='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",(e=document.createElement("div")).innerHTML=t,e.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer),r=((t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+o(this),i),this._layerControlInputs.push(e),e.layerId=o(t.layer),be(e,"click",this._onInputClick,this),i=document.createElement("span")).innerHTML=" "+t.name,document.createElement("span"));return n.appendChild(r),r.appendChild(e),r.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var s=n.length-1;0<=s;s--)t=n[s],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(s=0;s<r.length;s++)this._map.hasLayer(r[s])&&this._map.removeLayer(r[s]);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])||this._map.addLayer(i[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;0<=r;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;be(t,"click",Le),this.expand(),setTimeout((function(){xe(t,"click",Le)}))}})),qe=Ue.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=Jt("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){return(n=Jt("a",n,i)).innerHTML=t,n.href="#",n.title=e,n.setAttribute("role","button"),n.setAttribute("aria-label",e),Ae(n),be(n,"click",Oe),be(n,"click",r,this),be(n,"click",this._refocusOnMap,this),n},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";oe(this._zoomInButton,e),oe(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),!this._disabled&&t._zoom!==t.getMinZoom()||(se(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),!this._disabled&&t._zoom!==t.getMaxZoom()||(se(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}}),He=(Fe.mergeOptions({zoomControl:!0}),Fe.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new qe,this.addControl(this.zoomControl))})),Ue.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=Jt("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=Jt("div",e,n)),t.imperial&&(this._iScale=Jt("div",e,n))},_update:function(){var t=(e=this._map).getSize().y/2,e=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(e)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,n;5280<(t*=3.2808399)?(n=this._getRoundNum(e=t/5280),this._updateScale(this._iScale,n+" mi",n/e)):(n=this._getRoundNum(t),this._updateScale(this._iScale,n+" ft",n/t))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1);return e*(10<=(t/=e)?10:5<=t?5:3<=t?3:2<=t?2:1)}})),$e=Ue.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(It.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=Jt("div","leaflet-control-attribution"),Ae(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t,e=[];for(t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}}),We=(Fe.mergeOptions({attributionControl:!0}),Fe.addInitHook((function(){this.options.attributionControl&&(new $e).addTo(this)})),Ue.Layers=Ve,Ue.Zoom=qe,Ue.Scale=He,Ue.Attribution=$e,ze.layers=function(t,e,n){return new Ve(t,e,n)},ze.zoom=function(t){return new qe(t)},ze.scale=function(t){return new He(t)},ze.attribution=function(t){return new $e(t)},J=I.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}}),J.addTo=function(t,e){return t.addHandler(e,this),this},tt={Events:A},It.touch?"touchstart mousedown":"mousedown"),Ze=O.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){f(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(be(this._dragStartTarget,We,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ze._dragging===this&&this.finishDrag(!0),xe(this._dragStartTarget,We,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){var e,n;this._enabled&&(this._moved=!1,re(this._element,"leaflet-zoom-anim")||(t.touches&&1!==t.touches.length?Ze._dragging===this&&this.finishDrag():Ze._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((Ze._dragging=this)._preventOutline&&ge(this._element),pe(),Ht(),this._moving||(this.fire("down"),n=t.touches?t.touches[0]:t,e=ye(this._element),this._startPoint=new P(n.clientX,n.clientY),this._startPos=fe(this._element),this._parentScale=_e(e),n="mousedown"===t.type,be(document,n?"mousemove":"touchmove",this._onMove,this),be(document,n?"mouseup":"touchend touchcancel",this._onUp,this)))))},_onMove:function(t){var e;this._enabled&&(t.touches&&1<t.touches.length?this._moved=!0:!(e=new P((e=t.touches&&1===t.touches.length?t.touches[0]:t).clientX,e.clientY)._subtract(this._startPoint)).x&&!e.y||Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance||(e.x/=this._parentScale.x,e.y/=this._parentScale.y,Le(t),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,this._lastEvent=t,this._updatePosition()))},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),de(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){oe(document.body,"leaflet-dragging"),this._lastTarget&&(oe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),xe(document,"mousemove touchmove",this._onMove,this),xe(document,"mouseup touchend touchcancel",this._onUp,this),me(),$t(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Ze._dragging=!1}});function Ke(t,e){if(e&&t.length){var n=t=function(t,e){for(var n=[t[0]],i=1,r=0,s=t.length;i<s;i++)(function(t,e){var n=e.x-t.x;return n*n+(e=e.y-t.y)*e})(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<s-1&&n.push(t[s-1]),n}(t,e*=e),i=n.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);r[0]=r[i-1]=1,function t(e,n,i,r,s){var o,a,c,l=0;for(a=r+1;a<=s-1;a++)l<(c=Je(e[a],e[r],e[s],!0))&&(o=a,l=c);i<l&&(n[o]=1,t(e,n,i,r,o),t(e,n,i,o,s))}(n,r,e,0,i-1);var s,o=[];for(s=0;s<i;s++)r[s]&&o.push(n[s]);return o}return t.slice()}function Ge(t,e,n){return Math.sqrt(Je(t,e,n,!0))}function Xe(t,e,n,i,r){var s,o,a,c=i?Be:Qe(t,n),l=Qe(e,n);for(Be=l;;){if(!(c|l))return[t,e];if(c&l)return!1;a=Qe(o=Ye(t,e,s=c||l,n,r),n),s===c?(t=o,c=a):(e=o,l=a)}}function Ye(t,e,n,i,r){var s,o,a=e.x-t.x,c=(e=e.y-t.y,i.min);return i=i.max,8&n?(s=t.x+a*(i.y-t.y)/e,o=i.y):4&n?(s=t.x+a*(c.y-t.y)/e,o=c.y):2&n?(s=i.x,o=t.y+e*(i.x-t.x)/a):1&n&&(s=c.x,o=t.y+e*(c.x-t.x)/a),new P(s,o,r)}function Qe(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Je(t,e,n,i){var r=e.x,s=(e=e.y,n.x-r),o=n.y-e,a=s*s+o*o;return 0<a&&(1<(a=((t.x-r)*s+(t.y-e)*o)/a)?(r=n.x,e=n.y):0<a&&(r+=s*a,e+=o*a)),s=t.x-r,o=t.y-e,i?s*s+o*o:new P(r,e)}function tn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function en(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),tn(t)}function nn(t,e){var n,i,r,s,o;if(!t||0===t.length)throw new Error("latlngs not passed");tn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var a,c=[];for(a in t)c.push(e.project(B(t[a])));for(var l=c.length,u=0,h=0;u<l-1;u++)h+=c[u].distanceTo(c[u+1])/2;if(0===h)o=c[0];else for(n=u=0;u<l-1;u++)if(i=c[u],r=c[u+1],h<(n+=s=i.distanceTo(r))){o=[r.x-(s=(n-h)/s)*(r.x-i.x),r.y-s*(r.y-i.y)];break}return e.unproject(D(o))}function rn(t,e,n){for(var i,r,s,o,a,c,l,u=[1,4,2,8],h=0,d=t.length;h<d;h++)t[h]._code=Qe(t[h],e);for(s=0;s<4;s++){for(c=u[s],i=[],h=0,r=(d=t.length)-1;h<d;r=h++)o=t[h],a=t[r],o._code&c?a._code&c||((l=Ye(a,o,c,e,n))._code=Qe(l,e),i.push(l)):(a._code&c&&((l=Ye(a,o,c,e,n))._code=Qe(l,e),i.push(l)),i.push(o));t=i}return t}function sn(t,e){var n,i,r,s,o,a;if(!t||0===t.length)throw new Error("latlngs not passed");tn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var c,l=[];for(c in t)l.push(e.project(B(t[c])));for(var u=l.length,h=s=o=0,d=0,f=u-1;d<u;f=d++)n=l[d],i=l[f],r=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*r,o+=(n.y+i.y)*r,h+=3*r;return a=0===h?l[0]:[s/h,o/h],e.unproject(D(a))}et={__proto__:null,simplify:Ke,pointToSegmentDistance:Ge,closestPointOnSegment:function(t,e,n){return Je(t,e,n)},clipSegment:Xe,_getEdgeIntersection:Ye,_getBitCode:Qe,_sqClosestPointOnSegment:Je,isFlat:tn,_flat:en,polylineCenter:nn},nt={__proto__:null,clipPolygon:rn,polygonCenter:sn},it={project:function(t){return new P(t.lng,t.lat)},unproject:function(t){return new z(t.y,t.x)},bounds:new R([-180,-90],[180,90])},rt={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,s=(r=Math.sqrt(1-r*r))*Math.sin(i);return s=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),r/2),i=-n*Math.log(Math.max(s,1e-10)),new P(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,s=Math.sqrt(1-r*r),o=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(o),c=0,l=.1;c<15&&1e-7<Math.abs(l);c++)e=s*Math.sin(a),e=Math.pow((1-e)/(1+e),s/2),a+=l=Math.PI/2-2*Math.atan(o*e)-a;return new z(a*n,t.x*n/i)}},st={__proto__:null,LonLat:it,Mercator:rt,SphericalMercator:q},at=e({},V,{code:"EPSG:3395",projection:rt,transformation:$(ot=.5/(Math.PI*rt.R),.5,-ot,.5)});var on=e({},V,{code:"EPSG:4326",projection:it,transformation:$(1/180,1,-1/180,.5)}),an=(ct=e({},U,{projection:it,transformation:$(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng;return e=e.lat-t.lat,Math.sqrt(n*n+e*e)},infinite:!0}),U.Earth=V,U.EPSG3395=at,U.EPSG3857=W,U.EPSG900913=Z,U.EPSG4326=on,U.Simple=ct,lt=O.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e,n=t.target;n.hasLayer(this)&&(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents&&(e=this.getEvents(),n.on(e,this),this.once("remove",(function(){n.off(e,this)}),this)),this.onAdd(n),this.fire("add"),n.fire("layeradd",{layer:this}))}}),Fe.include({addLayer:function(t){var e;if(t._layerAdd)return e=o(t),this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this;throw new Error("The provided object is not a Layer.")},removeLayer:function(t){var e=o(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){t=o(t),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var t,e=1/0,n=-1/0,i=this._getZoomSpan();for(t in this._zoomBoundLayers){var r=this._zoomBoundLayers[t].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),n=void 0===r.maxZoom?n:Math.max(n,r.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}}),lt.extend({initialize:function(t,e){var n,i;if(f(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){return t=t in this._layers?t:this.getLayerId(t),this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:o})),cn=an.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),an.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?((t=t in this._layers?this._layers[t]:t).removeEventParent(this),an.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t,e=new j;for(t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),ln=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(n)return n=this._createImg(n,e&&"IMG"===e.tagName?e:null),this._setIconStyles(n,t),!this.options.crossOrigin&&""!==this.options.crossOrigin||(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n;if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null},_setIconStyles:function(t,e){var n=this.options,i=D(i="number"==typeof(i=n[e+"Size"])?[i,i]:i),r=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return It.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),un=ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof un.imagePath&&(un.imagePath=this._detectIconPath()),(this.options.imagePath||un.imagePath)+ln.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){function e(t,e,n){return(e=e.exec(t))&&e[n]}return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Jt("div","leaflet-default-icon-path",document.body),e=Qt(t,"background-image")||Qt(t,"backgroundImage");return document.body.removeChild(t),(e=this._stripUrl(e))?e:(t=document.querySelector('link[href$="leaflet.css"]'))?t.href.substring(0,t.href.length-11-1):""}}),hn=J.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Ze(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&oe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,s=fe(e._icon),o=n.getPixelBounds(),a=n.getPixelOrigin();(a=M(o.min._subtract(a).add(r),o.max._subtract(a).subtract(r))).contains(s)||(r=D((Math.max(a.max.x,s.x)-a.max.x)/(o.max.x-a.max.x)-(Math.min(a.min.x,s.x)-a.min.x)/(o.min.x-a.min.x),(Math.max(a.max.y,s.y)-a.max.y)/(o.max.y-a.max.y)-(Math.min(a.min.y,s.y)-a.min.y)/(o.min.y-a.min.y)).multiplyBy(i),n.panBy(r,{animate:!1}),this._draggable._newPos._add(r),this._draggable._startPos._add(r),de(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=fe(e._icon),r=e._map.layerPointToLatLng(i);n&&de(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),dn=lt.extend({options:{icon:new un,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var t;return this._icon&&this._map&&(t=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(t)),this},_initIcon:function(){var t,e=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=!1,r=!1;(t=e.icon.createIcon(this._icon))!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(t.title=e.title),"IMG"===t.tagName&&(t.alt=e.alt||"")),se(t,n),e.keyboard&&(t.tabIndex="0",t.setAttribute("role","button")),this._icon=t,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&be(t,"focus",this._panOnFocus,this),(t=e.icon.createShadow(this._shadow))!==this._shadow&&(this._removeShadow(),r=!0),t&&(se(t,n),t.alt=""),this._shadow=t,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),t&&r&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xe(this._icon,"focus",this._panOnFocus,this),te(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&te(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round(),this._setPos(t)},_initInteraction:function(){var t;this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hn&&(t=this.options.draggable,this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hn(this),t&&this.dragging.enable()))},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&le(this._icon,t),this._shadow&&le(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t,e,n=this._map;n&&(t=(e=this.options.icon.options).iconSize?D(e.iconSize):D(0,0),e=e.iconAnchor?D(e.iconAnchor):D(0,0),n.panInside(this._latlng,{paddingTopLeft:e,paddingBottomRight:t.subtract(e)}))},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),fn=lt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),pn=fn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return fn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance();t=[t+n,e+n],this._pxBounds=new R(this._point.subtract(t),this._point.add(t))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),mn=pn.extend({initialize:function(t,n,i){if(f(this,n="number"==typeof n?e({},i,{radius:n}):n),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:fn.prototype.setStyle,_project:function(){var t,e,n,i,r,s=this._latlng.lng,o=this._latlng.lat,a=this._map,c=a.options.crs;c.distance===V.distance?(i=Math.PI/180,r=this._mRadius/V.R/i,t=a.project([o+r,s]),e=a.project([o-r,s]),e=t.add(e).divideBy(2),n=a.unproject(e).lat,i=Math.acos((Math.cos(r*i)-Math.sin(o*i)*Math.sin(n*i))/(Math.cos(o*i)*Math.cos(n*i)))/i,!isNaN(i)&&0!==i||(i=r/Math.cos(Math.PI/180*o)),this._point=e.subtract(a.getPixelOrigin()),this._radius=isNaN(i)?0:e.x-a.project([n,s-i]).x,this._radiusY=e.y-t.y):(r=c.unproject(c.project(this._latlng).subtract([this._mRadius,0])),this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(r).x),this._updateBounds()}}),gn=fn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,n=null,i=Je,r=0,s=this._parts.length;r<s;r++)for(var o=this._parts[r],a=1,c=o.length;a<c;a++){var l,u,h=i(t,l=o[a-1],u=o[a],!0);h<e&&(e=h,n=i(t,l,u))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(this._map)return nn(this._defaultShape(),this._map.options.crs);throw new Error("Must add layer to map before using getCenter()")},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=B(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=tn(t),i=0,r=t.length;i<r;i++)n?(e[i]=B(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=new P(t=this._clickTolerance(),t);this._rawPxBounds&&(this._pxBounds=new R([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(t,e,n){var i,r,s=t[0]instanceof z,o=t.length;if(s){for(r=[],i=0;i<o;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<o;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var e,n,i,r,s=this._parts,o=0,a=0,c=this._rings.length;o<c;o++)for(e=0,n=(r=this._rings[o]).length;e<n-1;e++)(i=Xe(r[e],r[e+1],t,e,!0))&&(s[a]=s[a]||[],s[a].push(i[0]),i[1]===r[e+1]&&e!==n-2||(s[a].push(i[1]),a++))},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=Ke(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,s,o,a,c=this._clickTolerance();if(this._pxBounds&&this._pxBounds.contains(t))for(n=0,s=this._parts.length;n<s;n++)for(i=0,r=(o=(a=this._parts[n]).length)-1;i<o;r=i++)if((e||0!==i)&&Ge(t,a[r],a[i])<=c)return!0;return!1}});gn._flat=en;var vn=gn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(this._map)return sn(this._defaultShape(),this._map.options.crs);throw new Error("Must add layer to map before using getCenter()")},_convertLatLngs:function(t){var e=(t=gn.prototype._convertLatLngs.call(this,t)).length;return 2<=e&&t[0]instanceof z&&t[0].equals(t[e-1])&&t.pop(),t},_setLatLngs:function(t){gn.prototype._setLatLngs.call(this,t),tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return(tn(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},_clipPoints:function(){var t=this._renderer._bounds,e=new P(e=this.options.weight,e);if(t=new R(t.min.subtract(e),t.max.add(e)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,i=0,r=this._rings.length;i<r;i++)(n=rn(this._rings[i],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,s,o,a,c,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(s=0,o=(c=(e=this._parts[r]).length)-1;s<c;o=s++)n=e[s],i=e[o],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||gn.prototype._containsPoint.call(this,t,!0)}}),yn=cn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=v(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var s,o=this.options;return o.filter&&!o.filter(t)||!(s=_n(t,o))?this:(s.feature=kn(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s))},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function _n(t,e){var n,i,r,s,o="Feature"===t.type?t.geometry:t,a=o?o.coordinates:null,c=[],l=e&&e.pointToLayer,u=e&&e.coordsToLatLng||wn;if(!a&&!o)return null;switch(o.type){case"Point":return bn(l,t,n=u(a),e);case"MultiPoint":for(r=0,s=a.length;r<s;r++)n=u(a[r]),c.push(bn(l,t,n,e));return new cn(c);case"LineString":case"MultiLineString":return i=xn(a,"LineString"===o.type?0:1,u),new gn(i,e);case"Polygon":case"MultiPolygon":return i=xn(a,"Polygon"===o.type?1:2,u),new vn(i,e);case"GeometryCollection":for(r=0,s=o.geometries.length;r<s;r++){var h=_n({geometry:o.geometries[r],type:"Feature",properties:t.properties},e);h&&c.push(h)}return new cn(c);case"FeatureCollection":for(r=0,s=o.features.length;r<s;r++){var d=_n(o.features[r],e);d&&c.push(d)}return new cn(c);default:throw new Error("Invalid GeoJSON object.")}}function bn(t,e,n,i){return t?t(e,n):new dn(n,i&&i.markersInheritOptions&&i)}function wn(t){return new z(t[1],t[0],t[2])}function xn(t,e,n){for(var i,r=[],s=0,o=t.length;s<o;s++)i=e?xn(t[s],e-1,n):(n||wn)(t[s]),r.push(i);return r}function Tn(t,e){return void 0!==(t=B(t)).alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function En(t,e,n,i){for(var r=[],s=0,o=t.length;s<o;s++)r.push(e?En(t[s],tn(t[s])?0:e-1,n,i):Tn(t[s],i));return!e&&n&&r.push(r[0].slice()),r}function Sn(t,n){return t.feature?e({},t.feature,{geometry:n}):kn(n)}function kn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function Cn(t,e){return new yn(t,e)}ut={toGeoJSON:function(t){return Sn(this,{type:"Point",coordinates:Tn(this.getLatLng(),t)})}},dn.include(ut),mn.include(ut),pn.include(ut),gn.include({toGeoJSON:function(t){var e=!tn(this._latlngs);return Sn(this,{type:(e?"Multi":"")+"LineString",coordinates:En(this._latlngs,e?1:0,!1,t)})}}),vn.include({toGeoJSON:function(t){var e=!tn(this._latlngs),n=e&&!tn(this._latlngs[0]);return t=En(this._latlngs,n?2:e?1:0,!0,t),Sn(this,{type:(n?"Multi":"")+"Polygon",coordinates:t=e?t:[t]})}}),an.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Sn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e,n,i=this.feature&&this.feature.geometry&&this.feature.geometry.type;return"MultiPoint"===i?this.toMultiPoint(t):(e="GeometryCollection"===i,n=[],this.eachLayer((function(i){i.toGeoJSON&&(i=i.toGeoJSON(t),e?n.push(i.geometry):"FeatureCollection"===(i=kn(i)).type?n.push.apply(n,i.features):n.push(i))})),e?Sn(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n})}}),ht=Cn;var In=lt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=F(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){te(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ne(this._image),this},bringToBack:function(){return this._map&&ie(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=F(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:Jt("img");se(e,"leaflet-image-layer"),this._zoomAnimated&&se(e,"leaflet-zoom-animated"),this.options.className&&se(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom);t=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min,he(this._image,t,e)},_reset:function(){var t=this._image,e=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();de(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){le(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),An=In.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:Jt("video");if(se(e,"leaflet-image-layer"),this._zoomAnimated&&se(e,"leaflet-zoom-animated"),this.options.className&&se(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],s=0;s<n.length;s++)i.push(n[s].src);this._url=0<n.length?i:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var a=Jt("source");a.src=this._url[o],e.appendChild(a)}}}}),Ln=In.extend({_initImage:function(){var t=this._image=this._url;se(t,"leaflet-image-layer"),this._zoomAnimated&&se(t,"leaflet-zoom-animated"),this.options.className&&se(t,this.options.className),t.onselectstart=l,t.onmousemove=l}}),On=lt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof z||v(t))?(this._latlng=B(t),f(this,e)):(f(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&le(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&le(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(le(this._container,0),this._removeTimeout=setTimeout(r(te,void 0,this._container),200)):te(this._container),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ne(this._container),this},bringToBack:function(){return this._map&&ie(this._container),this},_prepareOpen:function(t){if(!(n=this._source)._map)return!1;if(n instanceof cn){var e,n=null,i=this._source._layers;for(e in i)if(i[e]._map){n=i[e];break}if(!n)return!1;this._source=n}if(!t)if(n.getCenter)t=n.getCenter();else if(n.getLatLng)t=n.getLatLng();else{if(!n.getBounds)throw new Error("Unable to get source layer LatLng.");t=n.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){var t,e,n;this._map&&(e=this._map.latLngToLayerPoint(this._latlng),t=D(this.options.offset),n=this._getAnchor(),this._zoomAnimated?de(this._container,e.add(n)):t=t.add(e).add(n),e=this._containerBottom=-t.y,n=this._containerLeft=-Math.round(this._containerWidth/2)+t.x,this._container.style.bottom=e+"px",this._container.style.left=n+"px")},_getAnchor:function(){return[0,0]}}),Pn=(Fe.include({_initOverlay:function(t,e,n,i){var r=e;return r instanceof t||(r=new t(i).setContent(e)),n&&r.setLatLng(n),r}}),lt.include({_initOverlay:function(t,e,n,i){var r=n;return r instanceof t?(f(r,i),r._source=this):(r=e&&!i?e:new t(i,this)).setContent(n),r}}),On.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,On.prototype.openOn.call(this,t)},onAdd:function(t){On.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fn||this._source.on("preclick",Ce))},onRemove:function(t){On.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fn||this._source.off("preclick",Ce))},getEvents:function(){var t=On.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=Jt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=Jt("div",t+"-content-wrapper",e);this._contentNode=Jt("div",t+"-content",n),Ae(e),Ie(this._contentNode),be(e,"contextmenu",Ce),this._tipContainer=Jt("div",t+"-tip-container",e),this._tip=Jt("div",t+"-tip",this._tipContainer),this.options.closeButton&&((n=this._closeButton=Jt("a",t+"-close-button",e)).setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',be(n,"click",(function(t){Le(t),this.close()}),this))},_updateLayout:function(){var t=this._contentNode,e=t.style,n=(e.width="",e.whiteSpace="nowrap",t.offsetWidth),i=(n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="",n=t.offsetHeight,this.options.maxHeight);(i&&i<n?(e.height=i+"px",se):oe)(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);var e=this._getAnchor();de(this._container,t.add(e))},_adjustPan:function(){var t,e,n,i,r,s,o,a;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning?this._autopanning=!1:(t=this._map,e=parseInt(Qt(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+e,a=this._containerWidth,(n=new P(this._containerLeft,-e-this._containerBottom))._add(fe(this._container)),n=t.layerPointToContainerPoint(n),r=D(this.options.autoPanPadding),i=D(this.options.autoPanPaddingTopLeft||r),r=D(this.options.autoPanPaddingBottomRight||r),s=t.getSize(),o=0,n.x+a+r.x>s.x&&(o=n.x+a-s.x+r.x),n.x-o-i.x<(a=0)&&(o=n.x-i.x),n.y+e+r.y>s.y&&(a=n.y+e-s.y+r.y),n.y-a-i.y<0&&(a=n.y-i.y),(o||a)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([o,a]))))},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}})),Nn=(Fe.mergeOptions({closePopupOnClick:!0}),Fe.include({openPopup:function(t,e,n){return this._initOverlay(Pn,t,e,n).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),lt.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Pn,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof cn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e;this._popup&&this._map&&(Oe(t),e=t.layer||t.target,this._popup._source!==e||e instanceof fn?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}}),On.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){On.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){On.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=On.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Jt("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n=this._map,i=this._container,r=n.latLngToContainerPoint(n.getCenter()),s=(n=n.layerPointToContainerPoint(t),this.options.direction),o=i.offsetWidth,a=i.offsetHeight,c=D(this.options.offset),l=this._getAnchor();n="top"===s?(e=o/2,a):"bottom"===s?(e=o/2,0):(e="center"===s?o/2:"right"===s?0:"left"===s?o:n.x<r.x?(s="right",0):(s="left",o+2*(c.x+l.x)),a/2),t=t.subtract(D(e,n,!0)).add(c).add(l),oe(i,"leaflet-tooltip-right"),oe(i,"leaflet-tooltip-left"),oe(i,"leaflet-tooltip-top"),oe(i,"leaflet-tooltip-bottom"),se(i,"leaflet-tooltip-"+s),de(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&le(this._container,t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),this._setPosition(t)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}})),Dn=(Fe.include({openTooltip:function(t,e,n){return this._initOverlay(Nn,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),lt.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nn,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){var e,n;!t&&this._tooltipHandlersAdded||(e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t)},openTooltip:function(t){return this._tooltip&&(this instanceof cn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=t.getElement();e&&(be(e,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),be(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){(t=t.getElement())&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var e=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(t=this._map.mouseEventToContainerPoint(t.originalEvent),t=this._map.containerPointToLayerPoint(t),e=this._map.layerPointToLatLng(t)),this._tooltip.setLatLng(e)}}),ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){t=t&&"DIV"===t.tagName?t:document.createElement("div");var e=this.options;return e.html instanceof Element?(ee(t),t.appendChild(e.html)):t.innerHTML=!1!==e.html?e.html:"",e.bgPos&&(e=D(e.bgPos),t.style.backgroundPosition=-e.x+"px "+-e.y+"px"),this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}));ln.Default=un;var Rn=lt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:It.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),te(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ne(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ie(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){var t;return this._map&&(this._removeAllTiles(),(t=this._clampZoom(this._map.getZoom()))!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof P?t:new P(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,s=n.length;r<s;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!It.ielt9){le(this._container,this.options.opacity);var t,e=+new Date,n=!1,i=!1;for(t in this._tiles){var r,s=this._tiles[t];s.current&&s.loaded&&(r=Math.min(1,(e-s.loaded)/200),le(s.el,r),r<1?n=!0:(s.active?i=!0:this._onOpaqueTile(s),s.active=!0))}i&&!this._noPrune&&this._pruneTiles(),n&&(k(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=Jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(te(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=Jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(n=this._tiles[t]).retain=n.current;for(t in this._tiles)(n=this._tiles[t]).current&&!n.active&&(e=n.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)te(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){n-=1;var r=((r=new P(+(t=Math.floor(t/2)),+(e=Math.floor(e/2)))).z=n,this._tileCoordsToKey(r));return(r=this._tiles[r])&&r.active?r.retain=!0:(r&&r.loaded&&(r.retain=!0),i<n&&this._retainParent(t,e,n,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var s=2*e;s<2*e+2;s++){var o=((o=new P(r,s)).z=n+1,this._tileCoordsToKey(o));(o=this._tiles[o])&&o.active?o.retain=!0:(o&&o.loaded&&(o.retain=!0),n+1<i&&this._retainChildren(r,s,n+1,i))}},_resetView:function(t){t=t&&(t.pinch||t.flyTo),this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e),s=(r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r),this.options.updateWhenZooming&&r!==this._tileZoom);i&&!s||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom);e=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round(),It.any3d?he(t.el,e,i):de(t.el,e)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=(n=this._map)._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),n=(e=n.getZoomScale(e,this._tileZoom),t=n.project(t,this._tileZoom).floor(),n.getSize().divideBy(2*e));return new R(t.subtract(n),t.add(n))},_update:function(t){if(i=this._map){var e=this._clampZoom(i.getZoom());if(void 0===t&&(t=i.getCenter()),void 0!==this._tileZoom){var n,i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),s=r.getCenter(),o=[],a=(i=this.options.keepBuffer,new R(r.getBottomLeft().subtract([i,-i]),r.getTopRight().add([i,-i])));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(n in this._tiles){var c=this._tiles[n].coords;c.z===this._tileZoom&&a.contains(new P(c.x,c.y))||(this._tiles[n].current=!1)}if(1<Math.abs(e-this._tileZoom))this._setView(t,e);else{for(var l=r.min.y;l<=r.max.y;l++)for(var u=r.min.x;u<=r.max.x;u++){var h,d=new P(u,l);d.z=this._tileZoom,this._isValidTile(d)&&((h=this._tiles[this._tileCoordsToKey(d)])?h.current=!0:o.push(d))}if(o.sort((function(t,e){return t.distanceTo(s)-e.distanceTo(s)})),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(u=0;u<o.length;u++)this._addTile(o[u],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}return!this.options.bounds||(e=this._tileCoordsToBounds(t),F(this.options.bounds).overlaps(e))},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n);return n=i.add(n),[e.unproject(i,t.z),e.unproject(n,t.z)]},_tileCoordsToBounds:function(t){return t=new j((t=this._tileCoordsToNwSe(t))[0],t[1]),this.options.noWrap?t:this._map.wrapLatLngBounds(t)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=new P(+(t=t.split(":"))[0],+t[1]);return e.z=+t[2],e},_removeTile:function(t){var e=this._tiles[t];e&&(te(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){se(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,It.ielt9&&this.options.opacity<1&&le(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&S(r(this._tileReady,this,t,null,s)),de(s,n),this._tiles[i]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(le(n.el,0),k(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(se(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),It.ielt9||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new P(this._wrapX?c(t.x,this._wrapX):t.x,this._wrapY?c(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new R(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Mn=Rn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&It.retina&&0<e.maxZoom?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return be(n,"load",r(this._tileOnLoad,this,e,n)),be(n,"error",r(this._tileOnError,this,e,n)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:It.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(t=this._globalTileRange.max.y-t.y,this.options.tms&&(n.y=t),n["-y"]=t),g(this._url,e(n,this.options))},_tileOnLoad:function(t,e){It.ielt9?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return(t=this.options.zoomReverse?e-t:t)+this.options.zoomOffset},_getSubdomain:function(t){return t=Math.abs(t.x+t.y)%this.options.subdomains.length,this.options.subdomains[t]},_abortLoading:function(){var t,e,n;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((n=this._tiles[t].el).onload=l,n.onerror=l,n.complete||(n.src=_,e=this._tiles[t].coords,te(n),delete this._tiles[t],this.fire("tileabort",{tile:n,coords:e})))},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",_),Rn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==_))return Rn.prototype._tileReady.call(this,t,e,n)}});function jn(t,e){return new Mn(t,e)}var Fn=Mn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i,r=e({},this.defaultWmsParams);for(i in n)i in this.options||(r[i]=n[i]);t=(n=f(this,n)).detectRetina&&It.retina?2:1;var s=this.getTileSize();r.width=s.x*t,r.height=s.y*t,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,Mn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=(e=(n=M((n=this._crs).project(e[0]),n.project(e[1]))).min,n.max);return e=(1.3<=this._wmsVersion&&this._crs===on?[e.y,e.x,n.y,n.x]:[e.x,e.y,n.x,n.y]).join(","),(n=Mn.prototype.getTileUrl.call(this,t))+p(this.wmsParams,n,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+e},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});Mn.WMS=Fn,jn.wms=function(t,e){return new Fn(t,e)};var zn=lt.extend({options:{padding:.1},initialize:function(t){f(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e);i=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(t,e)),It.any3d?he(this._container,i,n):de(this._container,i)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new R(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bn=zn.extend({options:{tolerance:0},getEvents:function(){var t=zn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");be(t,"mousemove",this._onMouseMove,this),be(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),be(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,te(this._container),xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){var t,e,n,i;this._map._animatingZoom&&this._bounds||(zn.prototype._update.call(this),t=this._bounds,e=this._container,n=t.getSize(),i=It.retina?2:1,de(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",It.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update"))},_reset:function(){zn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),t=(this._layers[o(t)]=t)._order={layer:t,prev:this._drawLast,next:null},this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=(n=t._order).next,n=n.prev;e?e.prev=n:this._drawLast=n,n?n.next=e:this._drawFirst=e,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){for(var e,n=t.options.dashArray.split(/[, ]+/),i=[],r=0;r<n.length;r++){if(e=Number(n[r]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(t){var e;t._pxBounds&&(e=(t.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t,e=this._redrawBounds;e?(t=e.getSize(),this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var t,e,n=this._redrawBounds;this._ctx.save(),n&&(e=n.getSize(),this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,e.x,e.y),this._ctx.clip()),this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,s,o=t._parts,a=o.length,c=this._ctx;if(a){for(c.beginPath(),n=0;n<a;n++){for(i=0,r=o[n].length;i<r;i++)s=o[n][i],c[i?"lineTo":"moveTo"](s.x,s.y);e&&c.closePath()}this._fillStroke(c,t)}}},_updateCircle:function(t){var e,n,i,r;this._drawing&&!t._empty()&&(e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),1!=(r=(Math.max(Math.round(t._radiusY),1)||i)/i)&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!=r&&n.restore(),this._fillStroke(n,t))},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&(("click"===t.type||"preclick"===t.type)&&this._map._draggableMoved(e)||(n=e));this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){var e;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(e=this._map.mouseEventToLayerPoint(t),this._handleMouseHover(t,e))},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(oe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,s=this._drawFirst;s;s=s.next)(n=s.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(se(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(r((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e,n,i=t._order;i&&(e=i.next,n=i.prev,e&&((e.prev=n)?n.next=e:e&&(this._drawFirst=e),i.prev=this._drawLast,(this._drawLast.next=i).next=null,this._drawLast=i,this._requestRedraw(t)))},_bringToBack:function(t){var e,n,i=t._order;i&&(e=i.next,(n=i.prev)&&((n.next=e)?e.prev=n:n&&(this._drawLast=n),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)))}});function Un(t){return It.canvas?new Bn(t):null}var Vn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qn=(dt={_initContainer:function(){this._container=Jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Vn("shape");se(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Vn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;te(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e=e||(t._stroke=Vn("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n=n||(t._fill=Vn("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ne(t._container)},_bringToBack:function(t){ie(t._container)}},It.vml?Vn:K),Hn=zn.extend({_initContainer:function(){this._container=qn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){te(this._container),xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){var t,e,n;this._map._animatingZoom&&this._bounds||(zn.prototype._update.call(this),e=(t=this._bounds).getSize(),n=this._container,this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),de(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update"))},_initPath:function(t){var e=t._path=qn("path");t.options.className&&se(e,t.options.className),t.options.interactive&&se(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){te(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path;t=t.options,e&&(t.stroke?(e.setAttribute("stroke",t.color),e.setAttribute("stroke-opacity",t.opacity),e.setAttribute("stroke-width",t.weight),e.setAttribute("stroke-linecap",t.lineCap),e.setAttribute("stroke-linejoin",t.lineJoin),t.dashArray?e.setAttribute("stroke-dasharray",t.dashArray):e.removeAttribute("stroke-dasharray"),t.dashOffset?e.setAttribute("stroke-dashoffset",t.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),t.fill?(e.setAttribute("fill",t.fillColor||t.color),e.setAttribute("fill-opacity",t.fillOpacity),e.setAttribute("fill-rule",t.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,G(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ";e=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ",this._setPath(t,e)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ne(t._path)},_bringToBack:function(t){ie(t._path)}});function $n(t){return It.svg||It.vml?new Hn(t):null}It.vml&&Hn.include(dt),Fe.include({getRenderer:function(t){return t=(t=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(t){var e;return"overlayPane"!==t&&void 0!==t&&(void 0===(e=this._paneRenderers[t])&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e)},_createRenderer:function(t){return this.options.preferCanvas&&Un(t)||$n(t)}});var Wn=vn.extend({initialize:function(t,e){vn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=F(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Hn.create=qn,Hn.pointsToPath=G,yn.geometryToLayer=_n,yn.coordsToLatLng=wn,yn.coordsToLatLngs=xn,yn.latLngToCoords=Tn,yn.latLngsToCoords=En,yn.getFeature=Sn,yn.asFeature=kn,Fe.mergeOptions({boxZoom:!0}),X=J.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){be(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){te(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Ht(),pe(),this._startPoint=this._map.mouseEventToContainerPoint(t),be(document,{contextmenu:Oe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Jt("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=(t=new R(this._point,this._startPoint)).getSize();de(this._box,t.min),this._box.style.width=e.x+"px",this._box.style.height=e.y+"px"},_finish:function(){this._moved&&(te(this._box),oe(this._container,"leaflet-crosshair")),$t(),me(),xe(document,{contextmenu:Oe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){1!==t.which&&1!==t.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0),t=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})))},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}}),Fe.addInitHook("addHandler","boxZoom",X),Fe.mergeOptions({doubleClickZoom:!0}),ft=J.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta;n=t.originalEvent.shiftKey?n-i:n+i,"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}});var Zn=(Fe.addInitHook("addHandler","doubleClickZoom",ft),Fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),J.extend({addHooks:function(){var t;this._draggable||(t=this._map,this._draggable=new Ze(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))),se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){oe(this._map._container,"leaflet-grab"),oe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t,e=this._map;e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=F(this._map.options.maxBounds),this._offsetLimit=M(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){var e,n;this._map.options.inertia&&(e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(n),this._times.push(e),this._prunePositions(e)),this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){var t,e;this._viscosity&&this._offsetLimit&&(t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit,t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t))},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=((r=this._draggable._newPos.x)-e+n)%t+e-n,r=(r+e+n)%t-e-n;t=Math.abs(i+n)<Math.abs(r+n)?i:r,this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=t},_onDragEnd:function(t){var e,n,i,r,s=this._map,o=s.options,a=!o.inertia||t.noInertia||this._times.length<2;s.fire("dragend",t),!a&&(this._prunePositions(+new Date),t=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,e=o.easeLinearity,a=(t=t.multiplyBy(e/a)).distanceTo([0,0]),n=Math.min(o.inertiaMaxSpeed,a),t=t.multiplyBy(n/a),i=n/(o.inertiaDeceleration*e),(r=t.multiplyBy(-i/2).round()).x||r.y)?(r=s._limitOffset(r,s.options.maxBounds),S((function(){s.panBy(r,{duration:i,easeLinearity:e,noMoveStart:!0,animate:!0})}))):s.fire("moveend")}})),Kn=(Fe.addInitHook("addHandler","dragging",Zn),Fe.mergeOptions({keyboard:!0,keyboardPanDelta:80}),pt=J.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),be(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var t,e,n;this._focused||(n=document.body,t=document.documentElement,e=n.scrollTop||t.scrollTop,n=n.scrollLeft||t.scrollLeft,this._map._container.focus(),window.scrollTo(n,e))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){for(var e=this._panKeys={},n=this.keyCodes,i=0,r=n.left.length;i<r;i++)e[n.left[i]]=[-1*t,0];for(i=0,r=n.right.length;i<r;i++)e[n.right[i]]=[t,0];for(i=0,r=n.down.length;i<r;i++)e[n.down[i]]=[0,t];for(i=0,r=n.up.length;i<r;i++)e[n.up[i]]=[0,-1*t]},_setZoomDelta:function(t){for(var e=this._zoomKeys={},n=this.keyCodes,i=0,r=n.zoomIn.length;i<r;i++)e[n.zoomIn[i]]=t;for(i=0,r=n.zoomOut.length;i<r;i++)e[n.zoomOut[i]]=-t},_addHooks:function(){be(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n,i=t.keyCode,r=this._map;if(i in this._panKeys)r._panAnim&&r._panAnim._inProgress||(n=this._panKeys[i],t.shiftKey&&(n=D(n).multiplyBy(3)),r.options.maxBounds&&(n=r._limitOffset(D(n),r.options.maxBounds)),r.options.worldCopyJump?(e=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(n))),r.panTo(e)):r.panBy(n));else if(i in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Oe(t)}}}),Fe.addInitHook("addHandler","keyboard",pt),Fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),mt=J.extend({addHooks:function(){be(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Re(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date),e=Math.max(n-(+new Date-this._startTime),0),clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),e),Oe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0,i=(t._stop(),this._delta/(4*this._map.options.wheelPxPerZoomLevel));i=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,n=n?Math.ceil(i/n)*n:i,i=t._limitZoom(e+(0<this._delta?n:-n))-e,this._delta=0,this._startTime=null,i&&("center"===t.options.scrollWheelZoom?t.setZoom(e+i):t.setZoomAround(this._lastMousePos,e+i))}}),Fe.addInitHook("addHandler","scrollWheelZoom",mt),Fe.mergeOptions({tapHold:It.touchNative&&It.safari&&It.mobile,tapTolerance:15}),gt=J.extend({addHooks:function(){be(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){var e;clearTimeout(this._holdTimeout),1===t.touches.length&&(e=t.touches[0],this._startPos=this._newPos=new P(e.clientX,e.clientY),this._holdTimeout=setTimeout(r((function(){this._cancel(),this._isTapValid()&&(be(document,"touchend",Le),be(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),600),be(document,"touchend touchcancel contextmenu",this._cancel,this),be(document,"touchmove",this._onMove,this))},_cancelClickPrevent:function t(){xe(document,"touchend",Le),xe(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),xe(document,"touchend touchcancel contextmenu",this._cancel,this),xe(document,"touchmove",this._onMove,this)},_onMove:function(t){t=t.touches[0],this._newPos=new P(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){(t=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY}))._simulated=!0,e.target.dispatchEvent(t)}}),Fe.addInitHook("addHandler","tapHold",gt),Fe.mergeOptions({touchZoom:It.touch,bounceAtZoomLimits:!0}),vt=J.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),be(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e,n,i=this._map;!t.touches||2!==t.touches.length||i._animatingZoom||this._zooming||(e=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]),this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(e.add(n)._divideBy(2))),this._startDist=e.distanceTo(n),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),be(document,"touchmove",this._onTouchMove,this),be(document,"touchend touchcancel",this._onTouchEnd,this),Le(t))},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),s=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&1<s)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==s)return}else{if(n=n._add(i)._divideBy(2)._subtract(this._centerPoint),1==s&&0===n.x&&0===n.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(n),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest),i=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0),this._animRequest=S(i,this,!0),Le(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}}),Fe.addInitHook("addHandler","touchZoom",vt),Fe.BoxZoom=X,Fe.DoubleClickZoom=ft,Fe.Drag=Zn,Fe.Keyboard=pt,Fe.ScrollWheelZoom=mt,Fe.TapHold=gt,Fe.TouchZoom=vt,t.Bounds=R,t.Browser=It,t.CRS=U,t.Canvas=Bn,t.Circle=mn,t.CircleMarker=pn,t.Class=I,t.Control=Ue,t.DivIcon=Dn,t.DivOverlay=On,t.DomEvent=Q,t.DomUtil=Y,t.Draggable=Ze,t.Evented=O,t.FeatureGroup=cn,t.GeoJSON=yn,t.GridLayer=Rn,t.Handler=J,t.Icon=ln,t.ImageOverlay=In,t.LatLng=z,t.LatLngBounds=j,t.Layer=lt,t.LayerGroup=an,t.LineUtil=et,t.Map=Fe,t.Marker=dn,t.Mixin=tt,t.Path=fn,t.Point=P,t.PolyUtil=nt,t.Polygon=vn,t.Polyline=gn,t.Popup=Pn,t.PosAnimation=je,t.Projection=st,t.Rectangle=Wn,t.Renderer=zn,t.SVG=Hn,t.SVGOverlay=Ln,t.TileLayer=Mn,t.Tooltip=Nn,t.Transformation=H,t.Util=C,t.VideoOverlay=An,t.bind=r,t.bounds=M,t.canvas=Un,t.circle=function(t,e,n){return new mn(t,e,n)},t.circleMarker=function(t,e){return new pn(t,e)},t.control=ze,t.divIcon=function(t){return new Dn(t)},t.extend=e,t.featureGroup=function(t,e){return new cn(t,e)},t.geoJSON=Cn,t.geoJson=ht,t.gridLayer=function(t){return new Rn(t)},t.icon=function(t){return new ln(t)},t.imageOverlay=function(t,e,n){return new In(t,e,n)},t.latLng=B,t.latLngBounds=F,t.layerGroup=function(t,e){return new an(t,e)},t.map=function(t,e){return new Fe(t,e)},t.marker=function(t,e){return new dn(t,e)},t.point=D,t.polygon=function(t,e){return new vn(t,e)},t.polyline=function(t,e){return new gn(t,e)},t.popup=function(t,e){return new Pn(t,e)},t.rectangle=function(t,e){return new Wn(t,e)},t.setOptions=f,t.stamp=o,t.svg=$n,t.svgOverlay=function(t,e,n){return new Ln(t,e,n)},t.tileLayer=jn,t.tooltip=function(t,e){return new Nn(t,e)},t.transformation=$,t.version="1.9.3",t.videoOverlay=function(t,e,n){return new An(t,e,n)},window.L);t.noConflict=function(){return window.L=Kn,this},window.L=t}(e)}},t=>{t(t.s=377)}]);